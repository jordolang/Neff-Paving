/* empty css                      */import{g as e,r as t,a as n}from"../chunks/chunk-DzqCDR9G.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const r={},a=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));a=e(t.map(e=>{if((e=function(e){return"/Neff-Paving/"+e}(e))in r)return;r[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,i&&a.setAttribute("nonce",i),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};function i(e={}){var t;if("undefined"==typeof window||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});const n=function(e){return e.scriptSrc?e.scriptSrc:e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}(e);if(document.head.querySelector(`script[src*="${n}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));const r=document.createElement("script");return r.src=n,r.defer=!0,r.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),r.dataset.sdkv="1.2.0",e.sampleRate&&(r.dataset.sampleRate=e.sampleRate.toString()),e.route&&(r.dataset.route=e.route),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{},document.head.appendChild(r),{setRoute:e=>{r.dataset.route=null!=e?e:void 0}}}function o(){return"undefined"!=typeof window}function s(){try{}catch(e){}return"production"}function l(){return"development"===((o()?window.vam:s())||"production")}function c(e={debug:!0}){var t;if(!o())return;!function(e="auto"){window.vam="auto"!==e?e:s()}(e.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=function(e){return e.scriptSrc?e.scriptSrc:l()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),r.dataset.sdkv="1.5.0",e.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{l()},l()&&!1===e.debug&&(r.dataset.debug="false"),document.head.appendChild(r)}const d={apiKey:"",libraries:["drawing","geometry","places"]},p="undefined"!=typeof google&&google.maps?{zoom:15,center:{lat:39.9612,lng:-82.9988},mapTypeId:"hybrid",mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},fullscreenControl:!0}:{zoom:15,center:{lat:39.9612,lng:-82.9988},mapTypeId:"hybrid",mapTypeControl:!0,zoomControl:!0,scaleControl:!0,streetViewControl:!0,fullscreenControl:!0},u="undefined"!=typeof google&&google.maps?{drawingMode:google.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE,google.maps.drawing.OverlayType.CIRCLE]},polygonOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1},rectangleOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1},circleOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1}}:{drawingMode:"polygon",drawingControl:!0,polygonOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1},rectangleOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1},circleOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1}},m={GOOGLE_MAPS_DATA:"neff_paving_google_maps_measurements",ARCGIS_DATA:"neff_paving_arcgis_measurements",ACTIVE_TOOL:"neff_paving_active_measurement_tool",MEASUREMENT_SESSION:"neff_paving_measurement_session"};function g(e,t){try{const n=S(e),r={data:t,timestamp:(new Date).toISOString(),toolType:e};sessionStorage.setItem(n,JSON.stringify(r)),sessionStorage.setItem(m.ACTIVE_TOOL,e),k()}catch(n){}}function h(e){try{const t=S(e),n=sessionStorage.getItem(t);if(!n)return null;const r=JSON.parse(n),a=Date.now()-new Date(r.timestamp).getTime();return a>864e5?(f(e),null):r.data}catch(t){return null}}function f(e){try{const t=S(e);sessionStorage.removeItem(t),k()}catch(t){}}function v(){try{Object.values(m).forEach(e=>{sessionStorage.removeItem(e)})}catch(e){}}function y(){return sessionStorage.getItem(m.ACTIVE_TOOL)||"google-maps"}function b(){return Object.values(m).some(e=>e!==m.MEASUREMENT_SESSION&&null!==sessionStorage.getItem(e))}function w(){return{googleMaps:h("google-maps"),arcgis:h("arcgis"),activeTool:y()}}function x(){v()}function S(e){switch(e){case"google-maps":return m.GOOGLE_MAPS_DATA;case"arcgis":return m.ARCGIS_DATA;default:throw new Error(`Unknown tool type: ${e}`)}}function k(){try{const e={lastUpdated:(new Date).toISOString(),tools:[]};sessionStorage.getItem(m.GOOGLE_MAPS_DATA)&&e.tools.push("google-maps"),sessionStorage.getItem(m.ARCGIS_DATA)&&e.tools.push("arcgis"),sessionStorage.setItem(m.MEASUREMENT_SESSION,JSON.stringify(e))}catch(e){}}function E(){try{const e=sessionStorage.getItem(m.MEASUREMENT_SESSION);if(e){const t=JSON.parse(e),n=Date.now()-new Date(t.lastUpdated).getTime();n>864e5&&v()}}catch(e){}}const C=Object.freeze(Object.defineProperty({__proto__:null,clearAllMeasurementData:v,clearMeasurementData:f,getActiveTool:y,getAllMeasurementData:w,getMeasurementData:h,handleFormReset:function(){v()},handleFormSubmission:x,hasMeasurementData:b,initializeStorage:E,storeMeasurementData:g},Symbol.toStringTag,{value:"Module"}));class I{constructor(e,t={}){if(this.containerId=e,this.container=document.getElementById(e),this.options={showCalculator:!0,showAddressSearch:!0,showAreaInfo:!0,onAreaCalculated:()=>{},...t},this.map=null,this.drawingManager=null,this.currentShape=null,this.currentArea=null,this.geocoder=null,this.searchBox=null,!this.container)throw new Error(`Container with ID "${e}" not found`);this.init()}async init(){try{this.render(),await this.loadGoogleMaps(),this.initMap(),this.setupEventListeners()}catch(e){this.showError("Failed to initialize area finder")}}render(){this.container.innerHTML=`\n            <div class="area-finder-container">\n                ${this.options.showAddressSearch?'\n                <div class="area-finder-controls">\n                    <div class="search-section">\n                        <label for="address-search">Search Location</label>\n                        <div class="search-input-group">\n                            <input \n                                type="text" \n                                id="address-search" \n                                placeholder="Enter address or coordinates..."\n                                class="form-control"\n                            >\n                            <button type="button" id="search-btn" class="btn btn-primary">Search</button>\n                        </div>\n                    </div>\n                    \n                    <div class="drawing-controls">\n                        <button type="button" id="clear-shapes" class="btn btn-outline-danger" disabled>Clear All</button>\n                        <button type="button" id="calculate-area" class="btn btn-outline-success" disabled>Calculate Area</button>\n                    </div>\n                </div>\n                ':""}\n                \n                <div class="map-section">\n                    <div id="${this.containerId}-map" class="area-finder-map"></div>\n                    \n                    <div class="map-instructions">\n                        <h6>Instructions:</h6>\n                        <ul>\n                            <li>Click on the map to start drawing</li>\n                            <li>Continue clicking to add points</li>\n                            <li>Click the first point again to close the shape</li>\n                            <li>Use the drawing tools above the map to switch between shapes</li>\n                        </ul>\n                    </div>\n                </div>\n                \n                ${this.options.showAreaInfo?'\n                <div class="area-info-section">\n                    <div id="area-results" class="area-results" style="display: none;">\n                        <h6>Area Calculation Results</h6>\n                        <div class="results-grid">\n                            <div class="result-item">\n                                <span class="result-label">Area:</span>\n                                <span class="result-value" id="area-sqft">0 sq ft</span>\n                            </div>\n                            <div class="result-item">\n                                <span class="result-label">Perimeter:</span>\n                                <span class="result-value" id="perimeter-ft">0 ft</span>\n                            </div>\n                            <div class="result-item">\n                                <span class="result-label">Acres:</span>\n                                <span class="result-value" id="area-acres">0 acres</span>\n                            </div>\n                            <div class="result-item">\n                                <span class="result-label">Square Meters:</span>\n                                <span class="result-value" id="area-sqm">0 mÂ²</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                ':""}\n            </div>\n        `,this.addStyles()}addStyles(){if(document.getElementById("area-finder-styles"))return;const e=document.createElement("style");e.id="area-finder-styles",e.textContent="\n            .area-finder-container {\n                background: #ffffff;\n                border-radius: 12px;\n                overflow: hidden;\n                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n            }\n\n            .area-finder-controls {\n                padding: 20px;\n                background: #f8f9fa;\n                border-bottom: 1px solid #e9ecef;\n                display: flex;\n                flex-wrap: wrap;\n                gap: 20px;\n                align-items: end;\n            }\n\n            .search-section {\n                flex: 1;\n                min-width: 300px;\n            }\n\n            .search-section label {\n                display: block;\n                margin-bottom: 6px;\n                font-weight: 500;\n                color: #374151;\n            }\n\n            .search-input-group {\n                display: flex;\n                gap: 8px;\n            }\n\n            .search-input-group input {\n                flex: 1;\n                padding: 10px 12px;\n                border: 1px solid #d1d5db;\n                border-radius: 8px;\n                font-size: 14px;\n            }\n\n            .search-input-group input:focus {\n                outline: none;\n                border-color: #2563eb;\n                box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n            }\n\n            .drawing-controls {\n                display: flex;\n                gap: 10px;\n            }\n\n            .btn {\n                padding: 8px 16px;\n                border-radius: 6px;\n                font-size: 14px;\n                font-weight: 500;\n                border: 1px solid transparent;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .btn-primary {\n                background: #2563eb;\n                color: white;\n                border-color: #2563eb;\n            }\n\n            .btn-primary:hover {\n                background: #1d4ed8;\n            }\n\n            .btn-outline-danger {\n                color: #dc2626;\n                border-color: #dc2626;\n                background: transparent;\n            }\n\n            .btn-outline-danger:hover {\n                background: #dc2626;\n                color: white;\n            }\n\n            .btn-outline-success {\n                color: #16a34a;\n                border-color: #16a34a;\n                background: transparent;\n            }\n\n            .btn-outline-success:hover {\n                background: #16a34a;\n                color: white;\n            }\n\n            .btn:disabled {\n                opacity: 0.5;\n                cursor: not-allowed;\n            }\n\n            .map-section {\n                position: relative;\n            }\n\n            .area-finder-map {\n                height: 500px;\n                width: 100%;\n            }\n\n            .map-instructions {\n                position: absolute;\n                top: 10px;\n                left: 10px;\n                background: rgba(255, 255, 255, 0.95);\n                padding: 15px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n                max-width: 300px;\n                font-size: 13px;\n                z-index: 10;\n            }\n\n            .map-instructions h6 {\n                margin: 0 0 10px 0;\n                color: #1f2937;\n                font-weight: 600;\n            }\n\n            .map-instructions ul {\n                margin: 0;\n                padding-left: 16px;\n                color: #6b7280;\n            }\n\n            .map-instructions li {\n                margin-bottom: 4px;\n            }\n\n            .area-info-section {\n                padding: 20px;\n                background: #f8f9fa;\n                border-top: 1px solid #e9ecef;\n            }\n\n            .area-results {\n                background: white;\n                border-radius: 8px;\n                padding: 20px;\n                border: 1px solid #e5e7eb;\n            }\n\n            .area-results h6 {\n                margin: 0 0 15px 0;\n                color: #1f2937;\n                font-weight: 600;\n            }\n\n            .results-grid {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 15px;\n            }\n\n            .result-item {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 12px;\n                background: #f9fafb;\n                border-radius: 6px;\n                border: 1px solid #f3f4f6;\n            }\n\n            .result-label {\n                font-weight: 500;\n                color: #6b7280;\n            }\n\n            .result-value {\n                font-weight: 600;\n                color: #1f2937;\n                font-family: 'Courier New', monospace;\n            }\n\n            .error-message {\n                background: #fef2f2;\n                color: #dc2626;\n                padding: 12px 16px;\n                border-radius: 8px;\n                border: 1px solid #fecaca;\n                margin: 10px;\n            }\n\n            @media (max-width: 768px) {\n                .area-finder-controls {\n                    flex-direction: column;\n                    align-items: stretch;\n                }\n\n                .search-input-group {\n                    flex-direction: column;\n                }\n\n                .drawing-controls {\n                    justify-content: center;\n                }\n\n                .results-grid {\n                    grid-template-columns: 1fr;\n                }\n\n                .map-instructions {\n                    position: static;\n                    margin: 10px;\n                    max-width: none;\n                }\n            }\n        ",document.head.appendChild(e)}async loadGoogleMaps(){return new Promise((e,t)=>{if("undefined"!=typeof google&&google.maps)return void e();window.initAreaFinderMap=()=>{delete window.initAreaFinderMap,e()};const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${d.apiKey}&libraries=${d.libraries.join(",")}&callback=initAreaFinderMap`,n.onerror=t,document.head.appendChild(n)})}initMap(){const e=document.getElementById(`${this.containerId}-map`);this.map=new google.maps.Map(e,{...p,center:{lat:39.9612,lng:-82.9988}}),this.geocoder=new google.maps.Geocoder,this.initDrawingManager(),this.initSearchBox(),this.restorePreviousData()}initDrawingManager(){this.drawingManager=new google.maps.drawing.DrawingManager({...u,map:this.map}),google.maps.event.addListener(this.drawingManager,"overlaycomplete",e=>{this.handleShapeComplete(e)})}initSearchBox(){const e=document.getElementById("address-search");e&&(this.searchBox=new google.maps.places.SearchBox(e),this.map.addListener("bounds_changed",()=>{this.searchBox.setBounds(this.map.getBounds())}),this.searchBox.addListener("places_changed",()=>{const e=this.searchBox.getPlaces();if(0===e.length)return;const t=e[0];t.geometry&&t.geometry.location&&(this.map.setCenter(t.geometry.location),this.map.setZoom(18))}))}setupEventListeners(){const e=document.getElementById("search-btn"),t=document.getElementById("clear-shapes"),n=document.getElementById("calculate-area");e&&e.addEventListener("click",()=>this.searchLocation()),t&&t.addEventListener("click",()=>this.clearShapes()),n&&n.addEventListener("click",()=>this.calculateArea());const r=document.getElementById("address-search");r&&r.addEventListener("keypress",e=>{"Enter"===e.key&&this.searchLocation()})}handleShapeComplete(e){this.currentShape&&this.currentShape.setMap(null),this.currentShape=e.overlay,this.drawingManager.setDrawingMode(null),this.enableButton("clear-shapes"),this.enableButton("calculate-area"),!1!==this.options.autoCalculate&&this.calculateArea()}async calculateArea(){if(this.currentShape)try{const e=this.getShapeCoordinates(this.currentShape),t=await fetch("/api/maps/calculate-area",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({coordinates:e})}),n=await t.json();if(!n.success)throw new Error(n.message||"Calculation failed");this.displayAreaResults(n.data),this.currentArea=n.data;g("google-maps",{...n.data,coordinates:e,timestamp:(new Date).toISOString()}),this.options.onAreaCalculated(n.data)}catch(e){this.showError("Failed to calculate area. Please try again.")}else this.showError("No shape to calculate. Please draw a shape first.")}getShapeCoordinates(e){let t=[];if(e.getPath){const n=e.getPath();for(let e=0;e<n.getLength();e++){const r=n.getAt(e);t.push({lat:r.lat(),lng:r.lng()})}}else if(e.getBounds){const n=e.getBounds(),r=n.getNorthEast(),a=n.getSouthWest();if(e.getRadius){const n=e.getCenter(),r=e.getRadius(),a=32;for(let e=0;e<a;e++){const i=360*e/a*(Math.PI/180),o=n.lat()+r/111320*Math.cos(i),s=n.lng()+r/(111320*Math.cos(n.lat()*Math.PI/180))*Math.sin(i);t.push({lat:o,lng:s})}}else t=[{lat:r.lat(),lng:r.lng()},{lat:r.lat(),lng:a.lng()},{lat:a.lat(),lng:a.lng()},{lat:a.lat(),lng:r.lng()}]}return t}displayAreaResults(e){const t=document.getElementById("area-results");t&&(document.getElementById("area-sqft").textContent=`${e.areaInSquareFeet.toLocaleString()} sq ft`,document.getElementById("perimeter-ft").textContent=`${(3.28084*e.perimeter).toFixed(2)} ft`,document.getElementById("area-acres").textContent=`${e.areaInAcres} acres`,document.getElementById("area-sqm").textContent=`${e.area.toLocaleString()} mÂ²`,t.style.display="block")}searchLocation(){const e=document.getElementById("address-search").value.trim();e?this.geocoder.geocode({address:e},(e,t)=>{if("OK"===t&&e[0]){const t=e[0].geometry.location;this.map.setCenter(t),this.map.setZoom(18),new google.maps.Marker({position:t,map:this.map,title:"Search Result"})}else this.showError("Location not found. Please try a different address.")}):this.showError("Please enter an address or coordinates")}clearShapes(){this.currentShape&&(this.currentShape.setMap(null),this.currentShape=null);const e=document.getElementById("area-results");e&&(e.style.display="none"),this.disableButton("clear-shapes"),this.disableButton("calculate-area"),this.currentArea=null}enableButton(e){const t=document.getElementById(e);t&&(t.disabled=!1)}disableButton(e){const t=document.getElementById(e);t&&(t.disabled=!0)}showError(e){const t=document.createElement("div");t.className="error-message",t.textContent=e,this.container.insertBefore(t,this.container.firstChild),setTimeout(()=>{t.remove()},5e3)}getAreaData(){return this.currentArea}setLocation(e,t,n=18){this.map&&(this.map.setCenter({lat:e,lng:t}),this.map.setZoom(n))}destroy(){this.currentShape&&this.currentShape.setMap(null),this.drawingManager&&this.drawingManager.setMap(null),this.container.innerHTML=""}restoreAreaData(e){if(!e)return;this.clearShapes();const t=e.coordinates.map(e=>new google.maps.LatLng(e.lat,e.lng));this.currentShape=new google.maps.Polygon({path:t,map:this.map}),this.calculateArea()}restorePreviousData(){try{const e=h("google-maps");if(e&&e.coordinates&&e.coordinates.length>0){const t=e.coordinates.map(e=>new google.maps.LatLng(e.lat,e.lng));this.currentShape=new google.maps.Polygon({path:t,map:this.map,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}),this.currentArea=e,this.displayAreaResults(e),this.enableButton("clear-shapes"),this.enableButton("calculate-area");const n=new google.maps.LatLngBounds;e.coordinates.forEach(e=>{n.extend(new google.maps.LatLng(e.lat,e.lng))}),this.map.fitBounds(n)}}catch(e){}}}class L{constructor(){this.locations={reynoldsburg:{address:"1847 Brice Road, Reynoldsburg, OH 43068",name:"Reynoldsburg Office",mapId:"reynoldsburg-google-map"},zanesville:{address:"6575 W Pike, Zanesville, OH 43701",name:"Main Location/Zanesville Office",mapId:"zanesville-google-map"}},this.init()}init(){this.setupMapPlaceholders(),this.bindEvents()}setupMapPlaceholders(){Object.values(this.locations).forEach(e=>{const t=document.getElementById(e.mapId);t&&(t.style.cursor="pointer",t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",`View ${e.name} on Google Maps`))})}bindEvents(){Object.entries(this.locations).forEach(([e,t])=>{const n=document.getElementById(t.mapId);n&&(n.addEventListener("click",()=>this.loadMap(e)),n.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.loadMap(e))}))})}loadMap(e){const t=this.locations[e];if(!t)return;const n=document.getElementById(t.mapId);if(!n)return;const r=this.createEmbedUrl(t.address);n.innerHTML=`\n            <iframe \n                src="${r}"\n                width="100%" \n                height="400" \n                style="border:0; border-radius: 8px;" \n                allowfullscreen="" \n                loading="lazy" \n                referrerpolicy="no-referrer-when-downgrade"\n                title="${t.name} Location Map">\n            </iframe>\n        `,n.style.cursor="default",n.classList.add("map-loaded")}createEmbedUrl(e){return`https://www.google.com/maps/embed/v1/place?key=&q=${encodeURIComponent(e)}&zoom=15&maptype=roadmap`}openInGoogleMaps(e){const t=this.locations[e];if(!t)return;const n=`https://www.google.com/maps/search/${encodeURIComponent(t.address)}`;window.open(n,"_blank")}initWithoutApiKey(){Object.entries(this.locations).forEach(([e,t])=>{const n=document.getElementById(t.mapId);if(!n)return;n.innerHTML=`\n                <div class="static-map-view" onclick="window.open('https://www.google.com/maps/search/${encodeURIComponent(t.address)}', '_blank')" style="cursor: pointer;">\n                    <div class="map-static-content">\n                        <svg viewBox="0 0 24 24" fill="currentColor" style="width: 48px; height: 48px; color: #4285f4; margin-bottom: 16px;">\n                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n                        </svg>\n                        <h4 style="margin: 0 0 8px 0; color: #1a73e8;">${t.address}</h4>\n                        <p style="margin: 0; color: #5f6368;">Click to view in Google Maps</p>\n                        <div style="margin-top: 12px; padding: 8px 16px; background: #4285f4; color: white; border-radius: 4px; display: inline-block;">\n                            View on Google Maps\n                        </div>\n                    </div>\n                </div>\n            `;const r=n.querySelector(".static-map-view");r&&(Object.assign(r.style,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"300px",backgroundColor:"#f8f9fa",border:"2px dashed #dadce0",borderRadius:"8px",textAlign:"center",transition:"all 0.3s ease",padding:"20px"}),r.addEventListener("mouseenter",function(){this.style.backgroundColor="#e8f0fe",this.style.borderColor="#4285f4"}),r.addEventListener("mouseleave",function(){this.style.backgroundColor="#f8f9fa",this.style.borderColor="#dadce0"}))})}loadEmbeddedMaps(){Object.entries(this.locations).forEach(([e,t])=>{const n=document.getElementById(t.mapId);if(!n)return;const r=encodeURIComponent(t.address);n.innerHTML=`\n                <iframe \n                    src="https://www.google.com/maps?q=${r}&output=embed"\n                    width="100%" \n                    height="350" \n                    style="border:0; border-radius: 8px;" \n                    allowfullscreen="" \n                    loading="lazy" \n                    referrerpolicy="no-referrer-when-downgrade"\n                    title="${t.name} Location Map">\n                </iframe>\n            `,n.classList.add("map-loaded")})}}document.addEventListener("DOMContentLoaded",()=>{(new L).loadEmbeddedMaps()});class A{constructor(){this.currentIndex=0,this.images=[],this.isOpen=!1,this.init()}init(){this.createLightbox(),this.bindEvents()}createLightbox(){document.body.insertAdjacentHTML("beforeend",'\n            <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-labelledby="lightbox-title" aria-describedby="lightbox-description">\n                <div class="lightbox-overlay"></div>\n                <div class="lightbox-content">\n                    <div class="lightbox-header">\n                        <h2 id="lightbox-title" class="lightbox-title"></h2>\n                        <button class="lightbox-close" aria-label="Close lightbox" title="Close">&times;</button>\n                    </div>\n                    <div class="lightbox-main">\n                        <button class="lightbox-nav lightbox-prev" aria-label="Previous image" title="Previous">\n                            <svg viewBox="0 0 24 24" fill="currentColor">\n                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>\n                            </svg>\n                        </button>\n                        <div class="lightbox-image-container">\n                            <img class="lightbox-image" src="" alt="" loading="lazy">\n                            <div class="lightbox-loading">\n                                <div class="loading-spinner"></div>\n                            </div>\n                        </div>\n                        <button class="lightbox-nav lightbox-next" aria-label="Next image" title="Next">\n                            <svg viewBox="0 0 24 24" fill="currentColor">\n                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="lightbox-footer">\n                        <p id="lightbox-description" class="lightbox-description"></p>\n                        <div class="lightbox-counter">\n                            <span class="current-index">1</span> / <span class="total-images">1</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),this.lightboxElement=document.getElementById("lightbox"),this.lightboxImage=this.lightboxElement.querySelector(".lightbox-image"),this.lightboxTitle=this.lightboxElement.querySelector(".lightbox-title"),this.lightboxDescription=this.lightboxElement.querySelector(".lightbox-description"),this.lightboxLoading=this.lightboxElement.querySelector(".lightbox-loading"),this.currentIndexElement=this.lightboxElement.querySelector(".current-index"),this.totalImagesElement=this.lightboxElement.querySelector(".total-images")}bindEvents(){this.lightboxElement.querySelector(".lightbox-close").addEventListener("click",()=>{this.close()}),this.lightboxElement.querySelector(".lightbox-prev").addEventListener("click",()=>{this.prev()}),this.lightboxElement.querySelector(".lightbox-next").addEventListener("click",()=>{this.next()}),this.lightboxElement.querySelector(".lightbox-overlay").addEventListener("click",()=>{this.close()}),document.addEventListener("keydown",e=>{if(this.isOpen)switch(e.key){case"Escape":this.close();break;case"ArrowLeft":this.prev();break;case"ArrowRight":this.next()}}),this.lightboxImage.addEventListener("load",()=>{this.lightboxLoading.style.display="none"}),this.lightboxImage.addEventListener("error",()=>{this.lightboxLoading.style.display="none",this.lightboxImage.alt="Image failed to load"})}open(e,t=0){this.images=e,this.currentIndex=t,this.isOpen=!0,this.totalImagesElement.textContent=this.images.length,this.lightboxElement.classList.add("active"),this.lightboxElement.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",this.loadImage(),this.lightboxElement.querySelector(".lightbox-close").focus()}close(){this.isOpen=!1,this.lightboxElement.classList.remove("active"),this.lightboxElement.setAttribute("aria-hidden","true"),document.body.style.overflow="",setTimeout(()=>{this.lightboxImage.src=""},300)}prev(){this.images.length<=1||(this.currentIndex=this.currentIndex>0?this.currentIndex-1:this.images.length-1,this.loadImage())}next(){this.images.length<=1||(this.currentIndex=this.currentIndex<this.images.length-1?this.currentIndex+1:0,this.loadImage())}loadImage(){const e=this.images[this.currentIndex];this.lightboxLoading.style.display="flex",this.lightboxTitle.textContent=e.title||"",this.lightboxDescription.textContent=e.category||"",this.currentIndexElement.textContent=this.currentIndex+1,this.lightboxImage.src=e.src,this.lightboxImage.alt=e.alt||e.title||"";const t=this.lightboxElement.querySelector(".lightbox-prev"),n=this.lightboxElement.querySelector(".lightbox-next");this.images.length<=1?(t.style.display="none",n.style.display="none"):(t.style.display="flex",n.style.display="flex")}}const T={commercial:[{filename:"advance-auto-parking-lot-2.webp",title:"Advance Auto Parking Lot 2",alt:"Commercial parking lot paving for Advance Auto Parts"},{filename:"advance-auto-parking-lot-3.webp",title:"Advance Auto Parking Lot 3",alt:"Commercial parking lot paving for Advance Auto Parts"},{filename:"advance-auto-parking-lot.webp",title:"Advance Auto Parking Lot",alt:"Commercial parking lot paving for Advance Auto Parts"},{filename:"amg.webp",title:"AMG Commercial Project",alt:"Commercial paving project for AMG facility"},{filename:"apartment-complex-2.webp",title:"Apartment Complex 2",alt:"Apartment complex parking lot paving project"},{filename:"apartment-complex-3.webp",title:"Apartment Complex 3",alt:"Apartment complex parking lot paving project"},{filename:"apartment-complex-4.webp",title:"Apartment Complex 4",alt:"Apartment complex parking lot paving project"},{filename:"apartment-complex.webp",title:"Apartment Complex",alt:"Apartment complex parking lot paving project"},{filename:"apartments-garages-parking-lot-2.webp",title:"Apartments Garages Parking Lot 2",alt:"Parking lot paving for apartments with garages"},{filename:"apartments-garages-parking-lot-3-leeboy.webp",title:"Apartments Garages Parking Lot with Leeboy",alt:"Apartment parking lot paving with Leeboy equipment"},{filename:"apartments-garages-parking-lot.webp",title:"Apartments Garages Parking Lot",alt:"Parking lot paving for apartments with garages"},{filename:"asphalt-around-garage.webp",title:"Asphalt Around Garage",alt:"Asphalt paving work around commercial garage"},{filename:"before-after-riesebecks.webp",title:"Before After Riesbecks",alt:"Before and after comparison of Riesbecks parking lot"},{filename:"before-apartment-wreck.webp",title:"Before Apartment Reconstruction",alt:"Apartment parking lot before reconstruction work"},{filename:"behind-overhang-parking-lot.webp",title:"Behind Overhang Parking Lot",alt:"Parking lot paving behind building overhang"},{filename:"church-parking-lot-2.webp",title:"Church Parking Lot 2",alt:"Church parking lot paving project"},{filename:"church-parking-lot.webp",title:"Church Parking Lot",alt:"Church parking lot paving project"},{filename:"cinemark-colony-square.webp",title:"Cinemark Colony Square",alt:"Parking lot paving for Cinemark Colony Square theater"},{filename:"commercial-parking-lot-apartments-church.webp",title:"Commercial Parking Lot Apartments Church",alt:"Combined commercial parking lot for apartments and church"},{filename:"downtown-st-james-2.webp",title:"Downtown St James 2",alt:"Downtown St. James street paving project"},{filename:"downtown-st-james-stripped.webp",title:"Downtown St James Stripped",alt:"Downtown St. James with fresh line striping"},{filename:"downtown-st-james.webp",title:"Downtown St James",alt:"Downtown St. James street paving project"},{filename:"east-pike-shopping-center.webp",title:"East Pike Shopping Center",alt:"East Pike Shopping Center parking lot paving"},{filename:"five-below-2.webp",title:"Five Below 2",alt:"Five Below store parking lot paving project"},{filename:"five-below.webp",title:"Five Below",alt:"Five Below store parking lot paving project"},{filename:"florist.webp",title:"Florist",alt:"Florist shop parking lot paving project"},{filename:"formal-affairs.webp",title:"Formal Affairs",alt:"Formal Affairs business parking lot paving"},{filename:"garage-apartments-parking-lot.webp",title:"Garage Apartments Parking Lot",alt:"Parking lot for apartment garages"},{filename:"hamilton-waltman-melsheimer-2.webp",title:"Hamilton Waltman Melsheimer 2",alt:"Hamilton Waltman Melsheimer commercial paving project"},{filename:"hamilton-waltman-melsheimer-3.webp",title:"Hamilton Waltman Melsheimer 3",alt:"Hamilton Waltman Melsheimer commercial paving project"},{filename:"hamilton-waltman-melsheimer-4.webp",title:"Hamilton Waltman Melsheimer 4",alt:"Hamilton Waltman Melsheimer commercial paving project"},{filename:"hamilton-waltman-melsheimer-5.webp",title:"Hamilton Waltman Melsheimer 5",alt:"Hamilton Waltman Melsheimer commercial paving project"},{filename:"hamilton-waltman-melsheimer.webp",title:"Hamilton Waltman Melsheimer",alt:"Hamilton Waltman Melsheimer commercial paving project"},{filename:"holiday-inn-express-2.webp",title:"Holiday Inn Express 2",alt:"Holiday Inn Express parking lot paving project"},{filename:"holiday-inn-express.webp",title:"Holiday Inn Express",alt:"Holiday Inn Express parking lot paving project"},{filename:"large-open-parking-lot.webp",title:"Large Open Parking Lot",alt:"Large open commercial parking lot paving"},{filename:"leeboy-colony-square-mall.webp",title:"Leeboy Colony Square Mall",alt:"Colony Square Mall paving with Leeboy equipment"},{filename:"leeboy-condos.webp",title:"Leeboy Condos",alt:"Condominium parking lot paving with Leeboy equipment"},{filename:"leeboy-overhang.webp",title:"Leeboy Overhang",alt:"Paving work under overhang with Leeboy equipment"},{filename:"leeboy-riesbecks.webp",title:"Leeboy Riesbecks",alt:"Riesbecks parking lot paving with Leeboy equipment"},{filename:"leeboy-trailer-park.webp",title:"Leeboy Trailer Park",alt:"Trailer park paving with Leeboy equipment"},{filename:"lined-parking-lot.webp",title:"Lined Parking Lot",alt:"Commercial parking lot with fresh line striping"},{filename:"military-apartments-parking-lot.webp",title:"Military Apartments Parking Lot",alt:"Military apartments parking lot paving project"},{filename:"open-parking-area-behind-apartments.webp",title:"Open Parking Area Behind Apartments",alt:"Open parking area behind apartment complex"},{filename:"open-parking-lot-2.webp",title:"Open Parking Lot 2",alt:"Open commercial parking lot paving project"},{filename:"open-parking-lot-3.webp",title:"Open Parking Lot 3",alt:"Open commercial parking lot paving project"},{filename:"open-parking-lot-4.webp",title:"Open Parking Lot 4",alt:"Open commercial parking lot paving project"},{filename:"open-parking-lot.webp",title:"Open Parking Lot",alt:"Open commercial parking lot paving project"},{filename:"parking-lot-paved-wooded-area.webp",title:"Parking Lot Paved Wooded Area",alt:"Parking lot paving in wooded area"},{filename:"parking-lot.webp",title:"Parking Lot",alt:"Commercial parking lot paving project"},{filename:"paved-strip-mall.webp",title:"Paved Strip Mall",alt:"Strip mall parking lot paving project"},{filename:"paver-parking-lot.webp",title:"Paver Parking Lot",alt:"Commercial parking lot with paver work"},{filename:"private-road-apartments.webp",title:"Private Road Apartments",alt:"Private road paving for apartment complex"},{filename:"reisbecks-parking-lot-5.webp",title:"Riesbecks Parking Lot 5",alt:"Riesbecks store parking lot paving project"},{filename:"reisebecks-parking-lot-2.webp",title:"Riesbecks Parking Lot 2",alt:"Riesbecks store parking lot paving project"},{filename:"reisebecks-parking-lot-3.webp",title:"Riesbecks Parking Lot 3",alt:"Riesbecks store parking lot paving project"},{filename:"reisebecks-parking-lot-4.webp",title:"Riesbecks Parking Lot 4",alt:"Riesbecks store parking lot paving project"},{filename:"reisebecks-parking-lot.webp",title:"Riesbecks Parking Lot",alt:"Riesbecks store parking lot paving project"},{filename:"roller-dump-workers-working.webp",title:"Roller Dump Workers Working",alt:"Workers operating roller and dump equipment"},{filename:"roller-open-parking-lot.webp",title:"Roller Open Parking Lot",alt:"Open parking lot paving with roller equipment"},{filename:"roller-parking-lot.webp",title:"Roller Parking Lot",alt:"Parking lot paving with roller equipment"},{filename:"rolller-private-road.webp",title:"Roller Private Road",alt:"Private road paving with roller equipment"},{filename:"roseville-drive-thru-parking-lot-2.webp",title:"Roseville Drive Thru Parking Lot 2",alt:"Roseville drive-thru parking lot paving"},{filename:"roseville-drive-thru-parking-lot-e.webp",title:"Roseville Drive Thru Parking Lot E",alt:"Roseville drive-thru parking lot paving"},{filename:"roseville-drive-thru-parking-lot.webp",title:"Roseville Drive Thru Parking Lot",alt:"Roseville drive-thru parking lot paving"},{filename:"school-0-ring.webp",title:"School O Ring",alt:"School property paving with circular design"},{filename:"school-entryway.webp",title:"School Entryway",alt:"School entryway paving project"},{filename:"steamy-parking-lot.webp",title:"Steamy Parking Lot",alt:"Parking lot with steam from fresh asphalt"},{filename:"the-barn-after.webp",title:"The Barn After",alt:"The Barn parking lot after paving completion"},{filename:"the-barn-before.webp",title:"The Barn Before",alt:"The Barn parking lot before paving work"},{filename:"the-barn-parking-lot.webp",title:"The Barn Parking Lot",alt:"The Barn parking lot paving project"},{filename:"wilsons.webp",title:"Wilsons",alt:"Wilsons business parking lot paving project"},{filename:"workers-not-working-more.webp",title:"Workers Not Working More",alt:"Construction workers taking a break"},{filename:"workers-not-working.webp",title:"Workers Not Working",alt:"Construction workers taking a break"},{filename:"workers-working-overhang.webp",title:"Workers Working Overhang",alt:"Workers paving under building overhang"}],residential:[{filename:"asphalt-driveway-barn.webp",title:"Asphalt Driveway Barn",alt:"Residential driveway leading to barn"},{filename:"asphalt-driveway-turnaround-2.webp",title:"Asphalt Driveway Turnaround 2",alt:"Residential driveway with turnaround area"},{filename:"asphalt-driveway-turnaround.webp",title:"Asphalt Driveway Turnaround",alt:"Residential driveway with turnaround area"},{filename:"austins-truck-college.webp",title:"Austins Truck College",alt:"Driveway for Austins Truck College"},{filename:"bungalow-driveway.webp",title:"Bungalow Driveway",alt:"Charming bungalow house driveway"},{filename:"cart-path-to-landing.webp",title:"Cart Path To Landing",alt:"Cart path leading to landing area"},{filename:"clearing-driveway.webp",title:"Clearing Driveway",alt:"Driveway through cleared wooded area"},{filename:"custom-mansion-driveway-2.webp",title:"Custom Mansion Driveway 2",alt:"Luxury mansion custom driveway design"},{filename:"custom-mansion-driveway-3.webp",title:"Custom Mansion Driveway 3",alt:"Luxury mansion custom driveway design"},{filename:"custom-mansion-driveway-4.webp",title:"Custom Mansion Driveway 4",alt:"Luxury mansion custom driveway design"},{filename:"custom-mansion-driveway.webp",title:"Custom Mansion Driveway",alt:"Luxury mansion custom driveway design"},{filename:"driveway-garage-door.webp",title:"Driveway Garage Door",alt:"Residential driveway leading to garage"},{filename:"driveway-turnaround-area-2.webp",title:"Driveway Turnaround Area 2",alt:"Residential driveway turnaround area"},{filename:"driveway-turnaround-area.webp",title:"Driveway Turnaround Area",alt:"Residential driveway turnaround area"},{filename:"flagpole-driveway-country-2.webp",title:"Flagpole Driveway Country 2",alt:"Country driveway with flagpole"},{filename:"flagpole-driveway-country.webp",title:"Flagpole Driveway Country",alt:"Country driveway with flagpole"},{filename:"long-driveway-bridge.webp",title:"Long Driveway Bridge",alt:"Long residential driveway with bridge"},{filename:"long-driveway-to-road.webp",title:"Long Driveway To Road",alt:"Long residential driveway connecting to road"},{filename:"open-basketball-court.webp",title:"Open Basketball Court",alt:"Residential basketball court paving"},{filename:"pond-asphalt-driveway.webp",title:"Pond Asphalt Driveway",alt:"Asphalt driveway near pond"},{filename:"roller-residential-driveway.webp",title:"Roller Residential Driveway",alt:"Residential driveway with roller equipment"},{filename:"stone-lined-paved-driveway-2.webp",title:"Stone Lined Paved Driveway 2",alt:"Paved driveway with decorative stone lining"},{filename:"stone-lined-paved-driveway.webp",title:"Stone Lined Paved Driveway",alt:"Paved driveway with decorative stone lining"}],equipment:[{filename:"leeboy-closeup.webp",title:"Leeboy Closeup",alt:"Close-up view of Leeboy paving equipment"},{filename:"leeboy-dropping-tar.webp",title:"Leeboy Dropping Tar",alt:"Leeboy equipment applying tar/asphalt"},{filename:"leeboy-top-down.webp",title:"Leeboy Top Down",alt:"Top-down view of Leeboy paving equipment"},{filename:"loading-leeboy-2.webp",title:"Loading Leeboy 2",alt:"Loading Leeboy paving equipment"},{filename:"loading-leeboy.webp",title:"Loading Leeboy",alt:"Loading Leeboy paving equipment"}],concrete:[{filename:"concrete-pad.webp",title:"Concrete Pad",alt:"Concrete pad installation project"},{filename:"convenience-store.webp",title:"Convenience Store",alt:"Concrete work at convenience store"},{filename:"manhole-cover.webp",title:"Manhole Cover",alt:"Concrete manhole cover installation"},{filename:"square-drain-cover.webp",title:"Square Drain Cover",alt:"Square concrete drain cover installation"}]};class M{constructor(e){this.galleryElement=e,this.galleryContainer=e.querySelector(".gallery"),this.filterButtons=document.querySelectorAll(".button-group .button"),this.galleryItems=[],this.lightbox=new A,this.allImagesData=[],this.displayedImages={},this.currentFilter="all",this.init()}init(){this.loadGalleryImages(),this.initFilters(),this.initLightbox(),this.filterButtons.length>0&&this.filterButtons[0].classList.add("cs-active")}loadGalleryImages(){this.galleryContainer.innerHTML="",this.galleryItems=[],this.allImagesData=[],this.displayedImages={},Object.entries(T).forEach(([e,t])=>{t.forEach(t=>{this.allImagesData.push({...t,category:e})})});Object.keys(T).forEach(e=>{const t=T[e].map(t=>({...t,category:e})),n=this.shuffleArray([...t]);this.displayedImages[e]=n.slice(0,8)});const e=this.shuffleArray([...this.allImagesData]);this.displayedImages.all=e.slice(0,8),Object.entries(this.displayedImages).forEach(([e,t])=>{t.forEach(t=>{const n=this.createGalleryCard(t,t.category,e);this.galleryContainer.appendChild(n),this.galleryItems.push(n)})}),this.filterItems("all")}shuffleArray(e){const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}createGalleryCard(e,t,n){const r=document.createElement("div");r.className="gallery-card",r.setAttribute("data-category",t),r.setAttribute("data-display-category",n);const a=`/assets/gallery/${t}/${e.filename}`;r.innerHTML=`\n            <div class="card-image">\n                <div class="image-loading-placeholder">\n                    <div class="loading-spinner"></div>\n                </div>\n                <picture class="image">\n                    <source media="(max-width: 600px)">\n                    <source media="(min-width: 601px)">\n                    <img loading="eager" decoding="async" alt="${e.alt}" width="630" height="400">\n                </picture>\n            </div>\n            <div class="card-overlay">\n                <div class="card-title">${e.title}</div>\n                <div class="card-category">${t.charAt(0).toUpperCase()+t.slice(1)}</div>\n            </div>\n        `;const i=r.querySelector("img"),o=r.querySelectorAll("source"),s=r.querySelector(".image-loading-placeholder"),l=r.querySelector(".card-image");l.style.backgroundColor="#f5f5f5",i.style.opacity="0";const c=new Image;return c.onload=()=>{o.forEach(e=>{e.srcset=a}),i.src=a,i.style.opacity="1",s.style.opacity="0",l.style.backgroundColor="transparent",setTimeout(()=>{s.style.display="none"},300)},c.onerror=()=>{s.innerHTML='\n                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #666;">\n                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ“·</div>\n                    <div style="font-size: 0.875rem;">Image not available</div>\n                </div>\n            ',i.style.display="none"},c.src=a,r}initFilters(){this.filterButtons.forEach(e=>{e.addEventListener("click",()=>this.handleFilterClick(e))})}initLightbox(){this.galleryContainer.addEventListener("click",e=>{const t=e.target.closest(".gallery-card");if(!t)return;const n=t.querySelector("img").src.split("/").pop(),r=(t.querySelector(".card-title").textContent,t.dataset.category);let a=[],i=0;a="all"===this.currentFilter?this.allImagesData:this.allImagesData.filter(e=>e.category===this.currentFilter);const o=a.map(e=>({src:`/assets/gallery/${e.category}/${e.filename}`,title:e.title,category:e.category.charAt(0).toUpperCase()+e.category.slice(1),alt:e.alt}));i=a.findIndex(e=>e.filename===n&&e.category===r),-1===i&&(i=0),this.lightbox.open(o,i)})}handleFilterClick(e){this.filterButtons.forEach(e=>e.classList.remove("cs-active")),e.classList.add("cs-active");const t=e.dataset.filter;this.filterItems(t)}filterItems(t){this.currentFilter=t,this.galleryItems.forEach(e=>{const n=e.dataset.displayCategory===t;e.style.display=n?"block":"none"});const n=this.galleryItems.filter(e=>"block"===e.style.display);e.fromTo(n,{opacity:0,y:40},{opacity:1,y:0,duration:.8,stagger:.15,ease:"power2.out"})}}const P=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));var D={};const O=function(){if("undefined"!=typeof window){const e=window.location.hostname;if(e.endsWith(".vercel.app"))return!0;if(e.includes("vercel.app"))return!0;if(document.querySelector('script[src*="vercel-scripts.com"]'))return!0}if("undefined"!=typeof process&&D){if(D.VERCEL||D.VERCEL_ENV||D.VERCEL_URL)return!0;if("vercel"===D.VITE_PLATFORM||"vercel"===D.DEPLOY_PLATFORM)return!0}return!1}(),q=function(){if("undefined"!=typeof window){const e=window.location.hostname;if(e.endsWith(".github.io"))return!0;if("github.io"===e)return!0;if(window.location.pathname.startsWith("/Neff-Paving/"))return!0}if("undefined"!=typeof process&&D){if(D.GITHUB_PAGES||D.GITHUB_ACTIONS)return!0;if("github"===D.VITE_PLATFORM||"github"===D.DEPLOY_PLATFORM)return!0}return!1}(),F=(()=>"/Neff-Paving/")(),_=(()=>"production")(),B=O,R=q,j=("undefined"!=typeof window&&window.location.search.includes("debug=assets"),{vercel:{useRelativePaths:!1,assetPrefix:"",cdnEnabled:!0,cacheStrategy:"aggressive"},github:{useRelativePaths:!0,assetPrefix:"/Neff-Paving",cdnEnabled:!1,cacheStrategy:"moderate"},development:{useRelativePaths:!1,assetPrefix:"",cdnEnabled:!1,cacheStrategy:"none"}});function z(){return j[_]||j.github}function $(e,t={}){"undefined"!=typeof window&&window.location.search.includes("debug=assets");const n=z(),{useRelative:r=n.useRelativePaths,addCacheBusting:a=!0,forceAbsolute:i=!1}=t;let o=e;if(e.startsWith("http://")||e.startsWith("https://"))return e;const s=e.startsWith("/")?e.slice(1):e;if(i||"vercel"===_||B)o="/"+s;else if(r&&("github"===_||R)){o=("/"===F?"":F.endsWith("/")?F.slice(0,-1):F)+"/"+s}else o="/"+s;if(o=o.replace(/([^:])\/{2,}/g,"$1/"),a&&"none"!==n.cacheStrategy){const e=o.includes("?")?"&":"?";o+=`${e}v=${"aggressive"===n.cacheStrategy?1753970518307:"2025-07-31T14:01:58.307Z"}`}return o}function N(){if("undefined"!=typeof document&&(function(e=[]){if("undefined"==typeof document)return;[{type:"style",href:"/assets/main.css",as:"style"},{type:"script",href:"/src/main.js",as:"script"},{type:"font",href:"https://fonts.gstatic.com/s/oswald/v49/TK3IWkUHHAIjg75cFRf3bXL8LICs1_Fw.woff2",as:"font",crossorigin:!0},{type:"image",href:"/assets/images/logo.png",as:"image"},...e].forEach(e=>{if(document.querySelector(`link[href="${e.href}"]`))return;const t=document.createElement("link");t.rel="font"===e.type?"preload":"prefetch",t.href=$(e.href,{addCacheBusting:!1}),t.as=e.as,e.crossorigin&&(t.crossOrigin="anonymous"),"font"===e.type&&(t.type="font/woff2"),document.head.appendChild(t)})}(),function(){if("undefined"==typeof document)return;document.querySelectorAll(['a[href^="/"]:not([href^="//"])','img[src^="/"]:not([src^="//"])','link[href^="/"]:not([href^="//"])','script[src^="/"]:not([src^="//"])','source[src^="/"]:not([src^="//"])','video[src^="/"]:not([src^="//"])','audio[src^="/"]:not([src^="//"])','[style*="url(/"]'].join(", ")).forEach(e=>{try{const t=e.tagName.toLowerCase();let n,r;if("a"===t||"link"===t)n="href";else if(["img","script","source","video","audio"].includes(t))n="src";else if(e.hasAttribute("style")){const t=e.getAttribute("style"),n=t.match(/url\(([^)]+)\)/g);if(n){let r=t;n.forEach(e=>{const t=e.replace(/url\(['"]?([^'"]+)['"]?\)/,"$1");if(t.startsWith("/")&&!t.startsWith("//")){const n=$(t);r=r.replace(e,`url(${n})`)}}),e.setAttribute("style",r)}return}if(n&&(r=e.getAttribute(n),r&&r.startsWith("/")&&!r.startsWith("//")&&!r.startsWith(F)&&!r.startsWith("http"))){const t=$(r,{addCacheBusting:!e.hasAttribute("data-no-cache-bust")});e.setAttribute(n,t)}}catch(t){}})}(),"IntersectionObserver"in window)){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.dataset.src&&(n.src=$(n.dataset.src),n.removeAttribute("data-src"),t.unobserve(n))}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}"undefined"!=typeof document&&"loading"===document.readyState?document.addEventListener("DOMContentLoaded",N):"undefined"!=typeof document&&N();const G="loaded",H="error",W=new Map,V=new Map;const Y=new class{constructor(e={}){this.config={maxConcurrentLoads:6,retryAttempts:3,retryDelay:1e3,enableCache:!0,enablePreloading:!0,enableLazyLoading:!0,...e},this.currentLoads=0,this.loadQueue=[],this.observers=new Map,this.config.enableLazyLoading&&"IntersectionObserver"in window&&this.initLazyLoading()}async loadAsset(e,t={}){const n=$(e),r=n;if(this.config.enableCache&&W.has(r)){const e=W.get(r);if(e.state===G)return e.data;if(e.state===H&&!t.forceRetry)throw e.error}if(V.has(r))return V.get(r);const a=this._loadAssetWithRetry(n,t);V.set(r,a);try{const e=await a;return this.config.enableCache&&W.set(r,{state:G,data:e,timestamp:Date.now()}),e}catch(i){throw this.config.enableCache&&W.set(r,{state:H,error:i,timestamp:Date.now()}),i}finally{V.delete(r),this.currentLoads--,this._processQueue()}}async loadAssets(e,t={}){const{failFast:n=!1,maxConcurrent:r=this.config.maxConcurrentLoads}=t,a=e.map(e=>{const n="string"==typeof e?e:e.path,r="object"==typeof e?{...t,...e}:t;return this.loadAsset(n,r)});return n?Promise.all(a):Promise.allSettled(a)}preloadCriticalAssets(e=[]){if(!this.config.enablePreloading)return;[{path:"/assets/styles/main.css",type:"style",priority:"high"},{path:"/entries/main.js",type:"script",priority:"high"},{path:"/assets/images/logo.png",type:"image",priority:"medium"},...e].forEach(e=>{this._createPreloadLink(e)})}initLazyLoading(){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(this._loadLazyImage(e.target),t.unobserve(e.target))})},{rootMargin:"50px 0px",threshold:.01});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)}),this.observers.set("lazyImages",e)}addLazyImages(e=document){if(!this.observers.has("lazyImages"))return;const t=this.observers.get("lazyImages");e.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})}loadImage(e,t={}){return new Promise((n,r)=>{const a=new Image,i=$(e);a.onload=()=>n(a),a.onerror=()=>{if(t.fallback){const a=new Image;a.onload=()=>n(a),a.onerror=()=>r(new Error(`Failed to load image: ${e} and fallback`)),a.src=$(t.fallback)}else r(new Error(`Failed to load image: ${e}`))},t.crossOrigin&&(a.crossOrigin=t.crossOrigin),t.decoding&&(a.decoding=t.decoding),t.loading&&(a.loading=t.loading),a.src=i})}loadCSS(e,t={}){return new Promise((n,r)=>{const a=document.createElement("link"),i=$(e);a.rel="stylesheet",a.type="text/css",a.href=i,t.media&&(a.media=t.media),t.crossOrigin&&(a.crossOrigin=t.crossOrigin),a.onload=()=>n(a),a.onerror=()=>r(new Error(`Failed to load CSS: ${e}`)),document.head.appendChild(a)})}loadJS(e,t={}){return new Promise((n,r)=>{const a=document.createElement("script"),i=$(e);a.src=i,a.type=t.type||"text/javascript",void 0!==t.async&&(a.async=t.async),void 0!==t.defer&&(a.defer=t.defer),t.crossOrigin&&(a.crossOrigin=t.crossOrigin),t.integrity&&(a.integrity=t.integrity),a.onload=()=>n(a),a.onerror=()=>r(new Error(`Failed to load script: ${e}`)),document.head.appendChild(a)})}clearCache(e=null){if(e){const t=new RegExp(e);for(const[e]of W)t.test(e)&&W.delete(e)}else W.clear()}getCacheStats(){const e={size:W.size,loaded:0,error:0,totalSize:0};for(const[t,n]of W)n.state===G?e.loaded++:n.state===H&&e.error++;return e}async _loadAssetWithRetry(e,t={}){const{retryAttempts:n=this.config.retryAttempts}=t;for(let a=0;a<=n;a++)try{return await this._loadAssetDirect(e,t)}catch(r){if(a===n)throw r;await new Promise(e=>setTimeout(e,this.config.retryDelay*Math.pow(2,a)))}}async _loadAssetDirect(e,t={}){const{type:n=this._detectAssetType(e)}=t;switch(n){case"image":return this.loadImage(e,t);case"css":return this.loadCSS(e,t);case"js":return this.loadJS(e,t);default:const n=await fetch(e);if(!n.ok)throw new Error(`Failed to load asset: ${e} (${n.status})`);return n}}_detectAssetType(e){var t;const n=null==(t=e.split(".").pop())?void 0:t.toLowerCase();return["jpg","jpeg","png","gif","svg","webp"].includes(n)?"image":"css"===n?"css":["js","mjs"].includes(n)?"js":"unknown"}_createPreloadLink(e){if(document.querySelector(`link[href="${$(e.path)}"]`))return;const t=document.createElement("link");t.rel="font"===e.type?"preload":"prefetch",t.href=$(e.path),t.as=e.as||e.type,"font"===e.type&&(t.type="font/woff2",t.crossOrigin="anonymous"),"high"===e.priority&&(t.fetchPriority="high"),document.head.appendChild(t)}async _loadLazyImage(e){try{const t=e.dataset.src;if(!t)return;const n=await this.loadImage(t,{crossOrigin:e.crossOrigin,decoding:"async"});e.src=n.src,e.removeAttribute("data-src"),e.classList.add("loaded"),e.dispatchEvent(new Event("load"))}catch(t){e.classList.add("error")}}_processQueue(){for(;this.loadQueue.length>0&&this.currentLoads<this.config.maxConcurrentLoads;){const e=this.loadQueue.shift();this.currentLoads++,e()}}};function U(){const e=["/assets/images/logo.png","/assets/styles/main.css","/entries/main.js","assets/images/hero-bg.jpg","styles/main.css","https://external.com/image.jpg","/favicon.ico"];e.forEach(e=>{const t=$(e);t.includes("//")&&t.startsWith("http"),t.includes("/Neff-Paving//")});return["index.html","/index.html","services/","/services/"].forEach(e=>{!function(e){const t=e.startsWith("/")?e.slice(1):e;(("/"===F?"/":F.endsWith("/")?F:F+"/")+t).replace(/([^:])\/{2,}/g,"$1/")}(e)}),{buildVars:{baseUrl:"/Neff-Paving/",deployMode:"production",isVercel:!1,isGitHub:!1},computedValues:{BASE_URL:F,DEPLOY_MODE:_,baseUrl:F,envConfig:z()},testResults:e.map(e=>({input:e,output:$(e),hasIssues:$(e).includes("//")&&!$(e).startsWith("http")}))}}function X(){const e=new Image,t=$("/assets/images/logo.png");e.onload=()=>{},e.onerror=()=>{},e.src=t;const n=document.createElement("link");n.rel="stylesheet",n.type="text/css";const r=$("/assets/styles/test.css");n.onload=()=>{n.remove()},n.onerror=()=>{n.remove()},n.href=r,document.head.appendChild(n)}function J(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}
/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{Y.preloadCriticalAssets()}):Y.preloadCriticalAssets(),"undefined"!=typeof window&&window.location.search.includes("debug=assets")&&document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{U(),X()},1e3)}),"undefined"!=typeof window&&(window.debugAssetPaths=U,window.testAssetLoading=X,window.fixDoubleSlashes=function(){['img[src*="//"]','link[href*="//"]','script[src*="//"]','a[href*="//"]'].forEach(e=>{document.querySelectorAll(e).forEach(e=>{const t="a"===e.tagName.toLowerCase()||"link"===e.tagName.toLowerCase()?"href":"src",n=e.getAttribute(t);if(n&&n.includes("//")&&!n.startsWith("http")){const r=n.replace(/\/+/g,"/");e.setAttribute(t,r)}})})},window.disableAssetOptimization=function(){window.originalGetAssetPath=window.getAssetPath,window.getAssetPath=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/"+e}},window.enableAssetOptimization=function(){window.originalGetAssetPath&&(window.getAssetPath=window.originalGetAssetPath,delete window.originalGetAssetPath)});var Q,Z,K,ee,te,ne,re,ae,ie,oe,se,le,ce,de=function(){return Q||"undefined"!=typeof window&&(Q=window.gsap)&&Q.registerPlugin&&Q},pe=1,ue=[],me=[],ge=[],he=Date.now,fe=function(e,t){return t},ve=function(e,t){return~ge.indexOf(e)&&ge[ge.indexOf(e)+1][t]},ye=function(e){return!!~oe.indexOf(e)},be=function(e,t,n,r,a){return e.addEventListener(t,n,{passive:!1!==r,capture:!!a})},we=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},xe="scrollLeft",Se="scrollTop",ke=function(){return se&&se.isPressed||me.cache++},Ee=function(e,t){var n=function n(r){if(r||0===r){pe&&(K.history.scrollRestoration="manual");var a=se&&se.isPressed;r=n.v=Math.round(r)||(se&&se.iOS?1:0),e(r),n.cacheID=me.cache,a&&fe("ss",r)}else(t||me.cache!==n.cacheID||fe("ref"))&&(n.cacheID=me.cache,n.v=e());return n.v+n.offset};return n.offset=0,e&&n},Ce={s:xe,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Ee(function(e){return arguments.length?K.scrollTo(e,Ie.sc()):K.pageXOffset||ee[xe]||te[xe]||ne[xe]||0})},Ie={s:Se,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ce,sc:Ee(function(e){return arguments.length?K.scrollTo(Ce.sc(),e):K.pageYOffset||ee[Se]||te[Se]||ne[Se]||0})},Le=function(e,t){return(t&&t._ctx&&t._ctx.selector||Q.utils.toArray)(e)[0]||("string"==typeof e&&!1!==Q.config().nullTargetWarn?void 0:null)},Ae=function(e,t){var n=t.s,r=t.sc;ye(e)&&(e=ee.scrollingElement||te);var a=me.indexOf(e),i=r===Ie.sc?1:2;!~a&&(a=me.push(e)-1),me[a+i]||be(e,"scroll",ke);var o=me[a+i],s=o||(me[a+i]=Ee(ve(e,n),!0)||(ye(e)?r:Ee(function(t){return arguments.length?e[n]=t:e[n]})));return s.target=e,o||(s.smooth="smooth"===Q.getProperty(e,"scrollBehavior")),s},Te=function(e,t,n){var r=e,a=e,i=he(),o=i,s=t||50,l=Math.max(500,3*s),c=function(e,t){var l=he();t||l-i>s?(a=r,r=e,o=i,i=l):n?r+=e:r=a+(e-a)/(l-o)*(i-o)};return{update:c,reset:function(){a=r=n?0:r,o=i=0},getVelocity:function(e){var t=o,s=a,d=he();return(e||0===e)&&e!==r&&c(e),i===o||d-o>l?0:(r+(n?s:-s))/((n?d:i)-t)*1e3}}},Me=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Pe=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},De=function(){var e,t,n,r;(ie=Q.core.globals().ScrollTrigger)&&ie.core&&(e=ie.core,t=e.bridge||{},n=e._scrollers,r=e._proxies,n.push.apply(n,me),r.push.apply(r,ge),me=n,ge=r,fe=function(e,n){return t[e](n)})},Oe=function(e){return Q=e||de(),!Z&&Q&&"undefined"!=typeof document&&document.body&&(K=window,ee=document,te=ee.documentElement,ne=ee.body,oe=[K,ee,te,ne],Q.utils.clamp,ce=Q.core.context||function(){},ae="onpointerenter"in ne?"pointer":"mouse",re=qe.isTouch=K.matchMedia&&K.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in K||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,le=qe.eventTypes=("ontouchstart"in te?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in te?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return pe=0},500),De(),Z=1),Z};Ce.op=Ie,me.cache=0;var qe=function(){function e(e){this.init(e)}return e.prototype.init=function(e){Z||Oe(Q),ie||De();var t=e.tolerance,n=e.dragMinimum,r=e.type,a=e.target,i=e.lineHeight,o=e.debounce,s=e.preventDefault,l=e.onStop,c=e.onStopDelay,d=e.ignore,p=e.wheelSpeed,u=e.event,m=e.onDragStart,g=e.onDragEnd,h=e.onDrag,f=e.onPress,v=e.onRelease,y=e.onRight,b=e.onLeft,w=e.onUp,x=e.onDown,S=e.onChangeX,k=e.onChangeY,E=e.onChange,C=e.onToggleX,I=e.onToggleY,L=e.onHover,A=e.onHoverEnd,T=e.onMove,M=e.ignoreCheck,P=e.isNormalizer,D=e.onGestureStart,O=e.onGestureEnd,q=e.onWheel,F=e.onEnable,_=e.onDisable,B=e.onClick,R=e.scrollSpeed,j=e.capture,z=e.allowClicks,$=e.lockAxis,N=e.onLockAxis;this.target=a=Le(a)||te,this.vars=e,d&&(d=Q.utils.toArray(d)),t=t||1e-9,n=n||0,p=p||1,R=R||1,r=r||"wheel,touch,pointer",o=!1!==o,i||(i=parseFloat(K.getComputedStyle(ne).lineHeight)||22);var G,H,W,V,Y,U,X,J=this,oe=0,de=0,pe=e.passive||!s&&!1!==e.passive,me=Ae(a,Ce),ge=Ae(a,Ie),fe=me(),ve=ge(),xe=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===le[0],Se=ye(a),Ee=a.ownerDocument||ee,qe=[0,0,0],Fe=[0,0,0],_e=0,Be=function(){return _e=he()},Re=function(e,t){return(J.event=e)&&d&&function(e,t){for(var n=t.length;n--;)if(t[n]===e||t[n].contains(e))return!0;return!1}(e.target,d)||t&&xe&&"touch"!==e.pointerType||M&&M(e,t)},je=function(){var e=J.deltaX=Pe(qe),n=J.deltaY=Pe(Fe),r=Math.abs(e)>=t,a=Math.abs(n)>=t;E&&(r||a)&&E(J,e,n,qe,Fe),r&&(y&&J.deltaX>0&&y(J),b&&J.deltaX<0&&b(J),S&&S(J),C&&J.deltaX<0!=oe<0&&C(J),oe=J.deltaX,qe[0]=qe[1]=qe[2]=0),a&&(x&&J.deltaY>0&&x(J),w&&J.deltaY<0&&w(J),k&&k(J),I&&J.deltaY<0!=de<0&&I(J),de=J.deltaY,Fe[0]=Fe[1]=Fe[2]=0),(V||W)&&(T&&T(J),W&&(m&&1===W&&m(J),h&&h(J),W=0),V=!1),U&&!(U=!1)&&N&&N(J),Y&&(q(J),Y=!1),G=0},ze=function(e,t,n){qe[n]+=e,Fe[n]+=t,J._vx.update(e),J._vy.update(t),o?G||(G=requestAnimationFrame(je)):je()},$e=function(e,t){$&&!X&&(J.axis=X=Math.abs(e)>Math.abs(t)?"x":"y",U=!0),"y"!==X&&(qe[2]+=e,J._vx.update(e,!0)),"x"!==X&&(Fe[2]+=t,J._vy.update(t,!0)),o?G||(G=requestAnimationFrame(je)):je()},Ne=function(e){if(!Re(e,1)){var t=(e=Me(e,s)).clientX,r=e.clientY,a=t-J.x,i=r-J.y,o=J.isDragging;J.x=t,J.y=r,(o||(a||i)&&(Math.abs(J.startX-t)>=n||Math.abs(J.startY-r)>=n))&&(W=o?2:1,o||(J.isDragging=!0),$e(a,i))}},Ge=J.onPress=function(e){Re(e,1)||e&&e.button||(J.axis=X=null,H.pause(),J.isPressed=!0,e=Me(e),oe=de=0,J.startX=J.x=e.clientX,J.startY=J.y=e.clientY,J._vx.reset(),J._vy.reset(),be(P?a:Ee,le[1],Ne,pe,!0),J.deltaX=J.deltaY=0,f&&f(J))},He=J.onRelease=function(e){if(!Re(e,1)){we(P?a:Ee,le[1],Ne,!0);var t=!isNaN(J.y-J.startY),n=J.isDragging,r=n&&(Math.abs(J.x-J.startX)>3||Math.abs(J.y-J.startY)>3),i=Me(e);!r&&t&&(J._vx.reset(),J._vy.reset(),s&&z&&Q.delayedCall(.08,function(){if(he()-_e>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(Ee.createEvent){var t=Ee.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,K,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}})),J.isDragging=J.isGesturing=J.isPressed=!1,l&&n&&!P&&H.restart(!0),W&&je(),g&&n&&g(J),v&&v(J,r)}},We=function(e){return e.touches&&e.touches.length>1&&(J.isGesturing=!0)&&D(e,J.isDragging)},Ve=function(){return(J.isGesturing=!1)||O(J)},Ye=function(e){if(!Re(e)){var t=me(),n=ge();ze((t-fe)*R,(n-ve)*R,1),fe=t,ve=n,l&&H.restart(!0)}},Ue=function(e){if(!Re(e)){e=Me(e,s),q&&(Y=!0);var t=(1===e.deltaMode?i:2===e.deltaMode?K.innerHeight:1)*p;ze(e.deltaX*t,e.deltaY*t,0),l&&!P&&H.restart(!0)}},Xe=function(e){if(!Re(e)){var t=e.clientX,n=e.clientY,r=t-J.x,a=n-J.y;J.x=t,J.y=n,V=!0,l&&H.restart(!0),(r||a)&&$e(r,a)}},Je=function(e){J.event=e,L(J)},Qe=function(e){J.event=e,A(J)},Ze=function(e){return Re(e)||Me(e,s)&&B(J)};H=J._dc=Q.delayedCall(c||.25,function(){J._vx.reset(),J._vy.reset(),H.pause(),l&&l(J)}).pause(),J.deltaX=J.deltaY=0,J._vx=Te(0,50,!0),J._vy=Te(0,50,!0),J.scrollX=me,J.scrollY=ge,J.isDragging=J.isGesturing=J.isPressed=!1,ce(this),J.enable=function(e){return J.isEnabled||(be(Se?Ee:a,"scroll",ke),r.indexOf("scroll")>=0&&be(Se?Ee:a,"scroll",Ye,pe,j),r.indexOf("wheel")>=0&&be(a,"wheel",Ue,pe,j),(r.indexOf("touch")>=0&&re||r.indexOf("pointer")>=0)&&(be(a,le[0],Ge,pe,j),be(Ee,le[2],He),be(Ee,le[3],He),z&&be(a,"click",Be,!0,!0),B&&be(a,"click",Ze),D&&be(Ee,"gesturestart",We),O&&be(Ee,"gestureend",Ve),L&&be(a,ae+"enter",Je),A&&be(a,ae+"leave",Qe),T&&be(a,ae+"move",Xe)),J.isEnabled=!0,J.isDragging=J.isGesturing=J.isPressed=V=W=!1,J._vx.reset(),J._vy.reset(),fe=me(),ve=ge(),e&&e.type&&Ge(e),F&&F(J)),J},J.disable=function(){J.isEnabled&&(ue.filter(function(e){return e!==J&&ye(e.target)}).length||we(Se?Ee:a,"scroll",ke),J.isPressed&&(J._vx.reset(),J._vy.reset(),we(P?a:Ee,le[1],Ne,!0)),we(Se?Ee:a,"scroll",Ye,j),we(a,"wheel",Ue,j),we(a,le[0],Ge,j),we(Ee,le[2],He),we(Ee,le[3],He),we(a,"click",Be,!0),we(a,"click",Ze),we(Ee,"gesturestart",We),we(Ee,"gestureend",Ve),we(a,ae+"enter",Je),we(a,ae+"leave",Qe),we(a,ae+"move",Xe),J.isEnabled=J.isPressed=J.isDragging=!1,_&&_(J))},J.kill=J.revert=function(){J.disable();var e=ue.indexOf(J);e>=0&&ue.splice(e,1),se===J&&(se=0)},ue.push(J),P&&ye(a)&&(se=J),J.enable(u)},J(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();qe.version="3.13.0",qe.create=function(e){return new qe(e)},qe.register=Oe,qe.getAll=function(){return ue.slice()},qe.getById=function(e){return ue.filter(function(t){return t.vars.id===e})[0]},de()&&Q.registerPlugin(qe);
/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var Fe,_e,Be,Re,je,ze,$e,Ne,Ge,He,We,Ve,Ye,Ue,Xe,Je,Qe,Ze,Ke,et,tt,nt,rt,at,it,ot,st,lt,ct,dt,pt,ut,mt,gt,ht,ft,vt,yt,bt=1,wt=Date.now,xt=wt(),St=0,kt=0,Et=function(e,t,n){var r=Rt(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},Ct=function(e,t){return!t||Rt(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},It=function e(){return kt&&requestAnimationFrame(e)},Lt=function(){return Ue=1},At=function(){return Ue=0},Tt=function(e){return e},Mt=function(e){return Math.round(1e5*e)/1e5||0},Pt=function(){return"undefined"!=typeof window},Dt=function(){return Fe||Pt()&&(Fe=window.gsap)&&Fe.registerPlugin&&Fe},Ot=function(e){return!!~$e.indexOf(e)},qt=function(e){return("Height"===e?pt:Be["inner"+e])||je["client"+e]||ze["client"+e]},Ft=function(e){return ve(e,"getBoundingClientRect")||(Ot(e)?function(){return Xn.width=Be.innerWidth,Xn.height=pt,Xn}:function(){return ln(e)})},_t=function(e,t){var n=t.s,r=t.d2,a=t.d,i=t.a;return Math.max(0,(n="scroll"+r)&&(i=ve(e,n))?i()-Ft(e)()[a]:Ot(e)?(je[n]||ze[n])-qt(r):e[n]-e["offset"+r])},Bt=function(e,t){for(var n=0;n<Ke.length;n+=3)(!t||~t.indexOf(Ke[n+1]))&&e(Ke[n],Ke[n+1],Ke[n+2])},Rt=function(e){return"string"==typeof e},jt=function(e){return"function"==typeof e},zt=function(e){return"number"==typeof e},$t=function(e){return"object"==typeof e},Nt=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},Gt=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add(function(){return t(e)}):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},Ht=Math.abs,Wt="left",Vt="right",Yt="bottom",Ut="width",Xt="height",Jt="Right",Qt="Left",Zt="Top",Kt="Bottom",en="padding",tn="margin",nn="Width",rn="Height",an="px",on=function(e){return Be.getComputedStyle(e)},sn=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},ln=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==on(e)[Xe]&&Fe.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},cn=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},dn=function(e){var t,n=[],r=e.labels,a=e.duration();for(t in r)n.push(r[t]/a);return n},pn=function(e){var t=Fe.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(e,t){return e-t});return n?function(e,r,a){var i;if(void 0===a&&(a=.001),!r)return t(e);if(r>0){for(e-=a,i=0;i<n.length;i++)if(n[i]>=e)return n[i];return n[i-1]}for(i=n.length,e+=a;i--;)if(n[i]<=e)return n[i];return n[0]}:function(n,r,a){void 0===a&&(a=.001);var i=t(n);return!r||Math.abs(i-n)<a||i-n<0==r<0?i:t(r<0?n-e:n+e)}},un=function(e,t,n,r){return n.split(",").forEach(function(n){return e(t,n,r)})},mn=function(e,t,n,r,a){return e.addEventListener(t,n,{passive:!r,capture:!!a})},gn=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},hn=function(e,t,n){(n=n&&n.wheelHandler)&&(e(t,"wheel",n),e(t,"touchmove",n))},fn={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},vn={toggleActions:"play",anticipatePin:0},yn={top:0,left:0,center:.5,bottom:1,right:1},bn=function(e,t){if(Rt(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in yn?yn[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},wn=function(e,t,n,r,a,i,o,s){var l=a.startColor,c=a.endColor,d=a.fontSize,p=a.indent,u=a.fontWeight,m=Re.createElement("div"),g=Ot(n)||"fixed"===ve(n,"pinType"),h=-1!==e.indexOf("scroller"),f=g?ze:n,v=-1!==e.indexOf("start"),y=v?l:c,b="border-color:"+y+";font-size:"+d+";color:"+y+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((h||s)&&g?"fixed;":"absolute;"),(h||s||!g)&&(b+=(r===Ie?Vt:Yt)+":"+(i+parseFloat(p))+"px;"),o&&(b+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=v,m.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),m.style.cssText=b,m.innerText=t||0===t?e+"-"+t:e,f.children[0]?f.insertBefore(m,f.children[0]):f.appendChild(m),m._offset=m["offset"+r.op.d2],xn(m,0,r,v),m},xn=function(e,t,n,r){var a={display:"block"},i=n[r?"os2":"p2"],o=n[r?"p2":"os2"];e._isFlipped=r,a[n.a+"Percent"]=r?-100:0,a[n.a]=r?"1px":0,a["border"+i+nn]=1,a["border"+o+nn]=0,a[n.p]=t+"px",Fe.set(e,a)},Sn=[],kn={},En=function(){return wt()-St>34&&(ht||(ht=requestAnimationFrame(Nn)))},Cn=function(){(!rt||!rt.isPressed||rt.startX>ze.clientWidth)&&(me.cache++,rt?ht||(ht=requestAnimationFrame(Nn)):Nn(),St||Pn("scrollStart"),St=wt())},In=function(){ot=Be.innerWidth,it=Be.innerHeight},Ln=function(e){me.cache++,(!0===e||!Ye&&!nt&&!Re.fullscreenElement&&!Re.webkitFullscreenElement&&(!at||ot!==Be.innerWidth||Math.abs(Be.innerHeight-it)>.25*Be.innerHeight))&&Ne.restart(!0)},An={},Tn=[],Mn=function e(){return gn(nr,"scrollEnd",e)||jn(!0)},Pn=function(e){return An[e]&&An[e].map(function(e){return e()})||Tn},Dn=[],On=function(e){for(var t=0;t<Dn.length;t+=5)(!e||Dn[t+4]&&Dn[t+4].query===e)&&(Dn[t].style.cssText=Dn[t+1],Dn[t].getBBox&&Dn[t].setAttribute("transform",Dn[t+2]||""),Dn[t+3].uncache=1)},qn=function(e,t){var n;for(Je=0;Je<Sn.length;Je++)!(n=Sn[Je])||t&&n._ctx!==t||(e?n.kill(1):n.revert(!0,!0));ut=!0,t&&On(t),t||Pn("revert")},Fn=function(e,t){me.cache++,(t||!ft)&&me.forEach(function(e){return jt(e)&&e.cacheID++&&(e.rec=0)}),Rt(e)&&(Be.history.scrollRestoration=ct=e)},_n=0,Bn=function(){ze.appendChild(dt),pt=!rt&&dt.offsetHeight||Be.innerHeight,ze.removeChild(dt)},Rn=function(e){return Ge(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},jn=function(e,t){if(je=Re.documentElement,ze=Re.body,$e=[Be,Re,je,ze],!St||e||ut){Bn(),ft=nr.isRefreshing=!0,me.forEach(function(e){return jt(e)&&++e.cacheID&&(e.rec=e())});var n=Pn("refreshInit");et&&nr.sort(),t||qn(),me.forEach(function(e){jt(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),Sn.slice(0).forEach(function(e){return e.refresh()}),ut=!1,Sn.forEach(function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",n=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-n),e.refresh()}}),mt=1,Rn(!0),Sn.forEach(function(e){var t=_t(e.scroller,e._dir),n="max"===e.vars.end||e._endClamp&&e.end>t,r=e._startClamp&&e.start>=t;(n||r)&&e.setPositions(r?t-1:e.start,n?Math.max(r?t:e.start+1,t):e.end,!0)}),Rn(!1),mt=0,n.forEach(function(e){return e&&e.render&&e.render(-1)}),me.forEach(function(e){jt(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec&&e(e.rec))}),Fn(ct,1),Ne.pause(),_n++,ft=2,Nn(2),Sn.forEach(function(e){return jt(e.vars.onRefresh)&&e.vars.onRefresh(e)}),ft=nr.isRefreshing=!1,Pn("refresh")}else mn(nr,"scrollEnd",Mn)},zn=0,$n=1,Nn=function(e){if(2===e||!ft&&!ut){nr.isUpdating=!0,yt&&yt.update(0);var t=Sn.length,n=wt(),r=n-xt>=50,a=t&&Sn[0].scroll();if($n=zn>a?-1:1,ft||(zn=a),r&&(St&&!Ue&&n-St>200&&(St=0,Pn("scrollEnd")),We=xt,xt=n),$n<0){for(Je=t;Je-- >0;)Sn[Je]&&Sn[Je].update(0,r);$n=1}else for(Je=0;Je<t;Je++)Sn[Je]&&Sn[Je].update(0,r);nr.isUpdating=!1}ht=0},Gn=[Wt,"top",Yt,Vt,tn+Kt,tn+Jt,tn+Zt,tn+Qt,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Hn=Gn.concat([Ut,Xt,"boxSizing","max"+nn,"max"+rn,"position",tn,en,en+Zt,en+Jt,en+Kt,en+Qt]),Wn=function(e,t,n,r){if(!e._gsap.swappedIn){for(var a,i=Gn.length,o=t.style,s=e.style;i--;)o[a=Gn[i]]=n[a];o.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(o.display="inline-block"),s[Yt]=s[Vt]="auto",o.flexBasis=n.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Ut]=cn(e,Ce)+an,o[Xt]=cn(e,Ie)+an,o[en]=s[tn]=s.top=s[Wt]="0",Yn(r),s[Ut]=s["max"+nn]=n[Ut],s[Xt]=s["max"+rn]=n[Xt],s[en]=n[en],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Vn=/([A-Z])/g,Yn=function(e){if(e){var t,n,r=e.t.style,a=e.length,i=0;for((e.t._gsap||Fe.core.getCache(e.t)).uncache=1;i<a;i+=2)n=e[i+1],t=e[i],n?r[t]=n:r[t]&&r.removeProperty(t.replace(Vn,"-$1").toLowerCase())}},Un=function(e){for(var t=Hn.length,n=e.style,r=[],a=0;a<t;a++)r.push(Hn[a],n[Hn[a]]);return r.t=e,r},Xn={left:0,top:0},Jn=function(e,t,n,r,a,i,o,s,l,c,d,p,u,m){jt(e)&&(e=e(s)),Rt(e)&&"max"===e.substr(0,3)&&(e=p+("="===e.charAt(4)?bn("0"+e.substr(3),n):0));var g,h,f,v=u?u.time():0;if(u&&u.seek(0),isNaN(e)||(e=+e),zt(e))u&&(e=Fe.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,p,e)),o&&xn(o,n,r,!0);else{jt(t)&&(t=t(s));var y,b,w,x,S=(e||"0").split(" ");f=Le(t,s)||ze,(y=ln(f)||{})&&(y.left||y.top)||"none"!==on(f).display||(x=f.style.display,f.style.display="block",y=ln(f),x?f.style.display=x:f.style.removeProperty("display")),b=bn(S[0],y[r.d]),w=bn(S[1]||"0",n),e=y[r.p]-l[r.p]-c+b+a-w,o&&xn(o,w,r,n-w<20||o._isStart&&w>20),n-=n-w}if(m&&(s[m]=e||-.001,e<0&&(e=0)),i){var k=e+n,E=i._isStart;g="scroll"+r.d2,xn(i,k,r,E&&k>20||!E&&(d?Math.max(ze[g],je[g]):i.parentNode[g])<=k+1),d&&(l=ln(o),d&&(i.style[r.op.p]=l[r.op.p]-r.op.m-i._offset+an))}return u&&f&&(g=ln(f),u.seek(p),h=ln(f),u._caScrollDist=g[r.p]-h[r.p],e=e/u._caScrollDist*p),u&&u.seek(v),u?e:Math.round(e)},Qn=/(webkit|moz|length|cssText|inset)/i,Zn=function(e,t,n,r){if(e.parentNode!==t){var a,i,o=e.style;if(t===ze){for(a in e._stOrig=o.cssText,i=on(e))+a||Qn.test(a)||!i[a]||"string"!=typeof o[a]||"0"===a||(o[a]=i[a]);o.top=n,o.left=r}else o.cssText=e._stOrig;Fe.core.getCache(e).uncache=1,t.appendChild(e)}},Kn=function(e,t,n){var r=t,a=r;return function(t){var i=Math.round(e());return i!==r&&i!==a&&Math.abs(i-r)>3&&Math.abs(i-a)>3&&(t=i,n&&n()),a=r,r=Math.round(t)}},er=function(e,t,n){var r={};r[t.p]="+="+n,Fe.set(e,r)},tr=function(e,t){var n=Ae(e,t),r="_scroll"+t.p2,a=function t(a,i,o,s,l){var c=t.tween,d=i.onComplete,p={};o=o||n();var u=Kn(n,o,function(){c.kill(),t.tween=0});return l=s&&l||0,s=s||a-o,c&&c.kill(),i[r]=a,i.inherit=!1,i.modifiers=p,p[r]=function(){return u(o+s*c.ratio+l*c.ratio*c.ratio)},i.onUpdate=function(){me.cache++,t.tween&&Nn()},i.onComplete=function(){t.tween=0,d&&d.call(c)},c=t.tween=Fe.to(e,i)};return e[r]=n,n.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},mn(e,"wheel",n.wheelHandler),nr.isTouch&&mn(e,"touchmove",n.wheelHandler),a},nr=function(){function e(t,n){_e||e.register(Fe),lt(this),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),kt){var r,a,i,o,s,l,c,d,p,u,m,g,h,f,v,y,b,w,x,S,k,E,C,I,L,A,T,M,P,D,O,q,F,_,B,R,j,z,$,N,G,H,W=t=sn(Rt(t)||zt(t)||t.nodeType?{trigger:t}:t,vn),V=W.onUpdate,Y=W.toggleClass,U=W.id,X=W.onToggle,J=W.onRefresh,Q=W.scrub,Z=W.trigger,K=W.pin,ee=W.pinSpacing,te=W.invalidateOnRefresh,ne=W.anticipatePin,re=W.onScrubComplete,ae=W.onSnapComplete,ie=W.once,oe=W.snap,se=W.pinReparent,le=W.pinSpacer,ce=W.containerAnimation,de=W.fastScrollEnd,pe=W.preventOverlaps,ue=t.horizontal||t.containerAnimation&&!1!==t.horizontal?Ce:Ie,he=!Q&&0!==Q,fe=Le(t.scroller||Be),ye=Fe.core.getCache(fe),be=Ot(fe),we="fixed"===("pinType"in t?t.pinType:ve(fe,"pinType")||be&&"fixed"),xe=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Se=he&&t.toggleActions.split(" "),ke="markers"in t?t.markers:vn.markers,Ee=be?0:parseFloat(on(fe)["border"+ue.p2+nn])||0,Te=this,Me=t.onRefreshInit&&function(){return t.onRefreshInit(Te)},Pe=function(e,t,n){var r=n.d,a=n.d2,i=n.a;return(i=ve(e,"getBoundingClientRect"))?function(){return i()[r]}:function(){return(t?qt(a):e["client"+a])||0}}(fe,be,ue),De=function(e,t){return!t||~ge.indexOf(e)?Ft(e):function(){return Xn}}(fe,be),Oe=0,qe=0,_e=0,$e=Ae(fe,ue);if(Te._startClamp=Te._endClamp=!1,Te._dir=ue,ne*=45,Te.scroller=fe,Te.scroll=ce?ce.time.bind(ce):$e,o=$e(),Te.vars=t,n=n||t.animation,"refreshPriority"in t&&(et=1,-9999===t.refreshPriority&&(yt=Te)),ye.tweenScroll=ye.tweenScroll||{top:tr(fe,Ie),left:tr(fe,Ce)},Te.tweenTo=r=ye.tweenScroll[ue.p],Te.scrubDuration=function(e){(F=zt(e)&&e)?q?q.duration(e):q=Fe.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:F,paused:!0,onComplete:function(){return re&&re(Te)}}):(q&&q.progress(1).kill(),q=0)},n&&(n.vars.lazy=!1,n._initted&&!Te.isReverted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.duration()&&n.render(0,!0,!0),Te.animation=n.pause(),n.scrollTrigger=Te,Te.scrubDuration(Q),D=0,U||(U=n.vars.id)),oe&&($t(oe)&&!oe.push||(oe={snapTo:oe}),"scrollBehavior"in ze.style&&Fe.set(be?[ze,je]:fe,{scrollBehavior:"auto"}),me.forEach(function(e){return jt(e)&&e.target===(be?Re.scrollingElement||je:fe)&&(e.smooth=!1)}),i=jt(oe.snapTo)?oe.snapTo:"labels"===oe.snapTo?function(e){return function(t){return Fe.utils.snap(dn(e),t)}}(n):"labelsDirectional"===oe.snapTo?(N=n,function(e,t){return pn(dn(N))(e,t.direction)}):!1!==oe.directional?function(e,t){return pn(oe.snapTo)(e,wt()-qe<500?0:t.direction)}:Fe.utils.snap(oe.snapTo),_=oe.duration||{min:.1,max:2},_=$t(_)?He(_.min,_.max):He(_,_),B=Fe.delayedCall(oe.delay||F/2||.1,function(){var e=$e(),t=wt()-qe<500,a=r.tween;if(!(t||Math.abs(Te.getVelocity())<10)||a||Ue||Oe===e)Te.isActive&&Oe!==e&&B.restart(!0);else{var o,s,d=(e-l)/f,p=n&&!he?n.totalProgress():d,u=t?0:(p-O)/(wt()-We)*1e3||0,m=Fe.utils.clamp(-d,1-d,Ht(u/2)*u/.185),g=d+(!1===oe.inertia?0:m),h=oe,v=h.onStart,y=h.onInterrupt,b=h.onComplete;if(o=i(g,Te),zt(o)||(o=g),s=Math.max(0,Math.round(l+o*f)),e<=c&&e>=l&&s!==e){if(a&&!a._initted&&a.data<=Ht(s-e))return;!1===oe.inertia&&(m=o-d),r(s,{duration:_(Ht(.185*Math.max(Ht(g-p),Ht(o-p))/u/.05||0)),ease:oe.ease||"power3",data:Ht(s-e),onInterrupt:function(){return B.restart(!0)&&y&&y(Te)},onComplete:function(){Te.update(),Oe=$e(),n&&!he&&(q?q.resetTo("totalProgress",o,n._tTime/n._tDur):n.progress(o)),D=O=n&&!he?n.totalProgress():Te.progress,ae&&ae(Te),b&&b(Te)}},e,m*f,s-e-m*f),v&&v(Te,r.tween)}}}).pause()),U&&(kn[U]=Te),($=(Z=Te.trigger=Le(Z||!0!==K&&K))&&Z._gsap&&Z._gsap.stRevert)&&($=$(Te)),K=!0===K?Z:Le(K),Rt(Y)&&(Y={targets:Z,className:Y}),K&&(!1===ee||ee===tn||(ee=!(!ee&&K.parentNode&&K.parentNode.style&&"flex"===on(K.parentNode).display)&&en),Te.pin=K,(a=Fe.core.getCache(K)).spacer?v=a.pinState:(le&&((le=Le(le))&&!le.nodeType&&(le=le.current||le.nativeElement),a.spacerIsNative=!!le,le&&(a.spacerState=Un(le))),a.spacer=w=le||Re.createElement("div"),w.classList.add("pin-spacer"),U&&w.classList.add("pin-spacer-"+U),a.pinState=v=Un(K)),!1!==t.force3D&&Fe.set(K,{force3D:!0}),Te.spacer=w=a.spacer,P=on(K),I=P[ee+ue.os2],S=Fe.getProperty(K),k=Fe.quickSetter(K,ue.a,an),Wn(K,w,P),b=Un(K)),ke){g=$t(ke)?sn(ke,fn):fn,u=wn("scroller-start",U,fe,ue,g,0),m=wn("scroller-end",U,fe,ue,g,0,u),x=u["offset"+ue.op.d2];var Ne=Le(ve(fe,"content")||fe);d=this.markerStart=wn("start",U,Ne,ue,g,x,0,ce),p=this.markerEnd=wn("end",U,Ne,ue,g,x,0,ce),ce&&(z=Fe.quickSetter([d,p],ue.a,an)),we||ge.length&&!0===ve(fe,"fixedMarkers")||(H=on(G=be?ze:fe).position,G.style.position="absolute"===H||"fixed"===H?H:"relative",Fe.set([u,m],{force3D:!0}),A=Fe.quickSetter(u,ue.a,an),M=Fe.quickSetter(m,ue.a,an))}if(ce){var Ve=ce.vars.onUpdate,Xe=ce.vars.onUpdateParams;ce.eventCallback("onUpdate",function(){Te.update(0,0,1),Ve&&Ve.apply(ce,Xe||[])})}if(Te.previous=function(){return Sn[Sn.indexOf(Te)-1]},Te.next=function(){return Sn[Sn.indexOf(Te)+1]},Te.revert=function(e,t){if(!t)return Te.kill(!0);var r=!1!==e||!Te.enabled,a=Ye;r!==Te.isReverted&&(r&&(R=Math.max($e(),Te.scroll.rec||0),_e=Te.progress,j=n&&n.progress()),d&&[d,p,u,m].forEach(function(e){return e.style.display=r?"none":"block"}),r&&(Ye=Te,Te.update(r)),!K||se&&Te.isActive||(r?function(e,t,n){Yn(n);var r=e._gsap;if(r.spacerIsNative)Yn(r.spacerState);else if(e._gsap.swappedIn){var a=t.parentNode;a&&(a.insertBefore(e,t),a.removeChild(t))}e._gsap.swappedIn=!1}(K,w,v):Wn(K,w,on(K),L)),r||Te.update(r),Ye=a,Te.isReverted=r)},Te.refresh=function(a,i,g,x){if(!Ye&&Te.enabled||i)if(K&&a&&St)mn(e,"scrollEnd",Mn);else{!ft&&Me&&Me(Te),Ye=Te,r.tween&&!g&&(r.tween.kill(),r.tween=0),q&&q.pause(),te&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren&&n.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)})),Te.isReverted||Te.revert(!0,!0),Te._subPinOffset=!1;var k,I,A,M,P,D,O,F,_,z,$,N,G,H=Pe(),W=De(),V=ce?ce.duration():_t(fe,ue),Y=f<=.01||!f,U=0,X=x||0,Q=$t(g)?g.end:t.end,ne=t.endTrigger||Z,re=$t(g)?g.start:t.start||(0!==t.start&&Z?K?"0 0":"0 100%":0),ae=Te.pinnedContainer=t.pinnedContainer&&Le(t.pinnedContainer,Te),ie=Z&&Math.max(0,Sn.indexOf(Te))||0,oe=ie;for(ke&&$t(g)&&(N=Fe.getProperty(u,ue.p),G=Fe.getProperty(m,ue.p));oe-- >0;)(D=Sn[oe]).end||D.refresh(0,1)||(Ye=Te),!(O=D.pin)||O!==Z&&O!==K&&O!==ae||D.isReverted||(z||(z=[]),z.unshift(D),D.revert(!0,!0)),D!==Sn[oe]&&(ie--,oe--);for(jt(re)&&(re=re(Te)),re=Et(re,"start",Te),l=Jn(re,Z,H,ue,$e(),d,u,Te,W,Ee,we,V,ce,Te._startClamp&&"_startClamp")||(K?-.001:0),jt(Q)&&(Q=Q(Te)),Rt(Q)&&!Q.indexOf("+=")&&(~Q.indexOf(" ")?Q=(Rt(re)?re.split(" ")[0]:"")+Q:(U=bn(Q.substr(2),H),Q=Rt(re)?re:(ce?Fe.utils.mapRange(0,ce.duration(),ce.scrollTrigger.start,ce.scrollTrigger.end,l):l)+U,ne=Z)),Q=Et(Q,"end",Te),c=Math.max(l,Jn(Q||(ne?"100% 0":V),ne,H,ue,$e()+U,p,m,Te,W,Ee,we,V,ce,Te._endClamp&&"_endClamp"))||-.001,U=0,oe=ie;oe--;)(O=(D=Sn[oe]).pin)&&D.start-D._pinPush<=l&&!ce&&D.end>0&&(k=D.end-(Te._startClamp?Math.max(0,D.start):D.start),(O===Z&&D.start-D._pinPush<l||O===ae)&&isNaN(re)&&(U+=k*(1-D.progress)),O===K&&(X+=k));if(l+=U,c+=U,Te._startClamp&&(Te._startClamp+=U),Te._endClamp&&!ft&&(Te._endClamp=c||-.001,c=Math.min(c,_t(fe,ue))),f=c-l||(l-=.01)&&.001,Y&&(_e=Fe.utils.clamp(0,1,Fe.utils.normalize(l,c,R))),Te._pinPush=X,d&&U&&((k={})[ue.a]="+="+U,ae&&(k[ue.p]="-="+$e()),Fe.set([d,p],k)),!K||mt&&Te.end>=_t(fe,ue)){if(Z&&$e()&&!ce)for(I=Z.parentNode;I&&I!==ze;)I._pinOffset&&(l-=I._pinOffset,c-=I._pinOffset),I=I.parentNode}else k=on(K),M=ue===Ie,A=$e(),E=parseFloat(S(ue.a))+X,!V&&c>1&&($={style:$=(be?Re.scrollingElement||je:fe).style,value:$["overflow"+ue.a.toUpperCase()]},be&&"scroll"!==on(ze)["overflow"+ue.a.toUpperCase()]&&($.style["overflow"+ue.a.toUpperCase()]="scroll")),Wn(K,w,k),b=Un(K),I=ln(K,!0),F=we&&Ae(fe,M?Ce:Ie)(),ee?((L=[ee+ue.os2,f+X+an]).t=w,(oe=ee===en?cn(K,ue)+f+X:0)&&(L.push(ue.d,oe+an),"auto"!==w.style.flexBasis&&(w.style.flexBasis=oe+an)),Yn(L),ae&&Sn.forEach(function(e){e.pin===ae&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),we&&$e(R)):(oe=cn(K,ue))&&"auto"!==w.style.flexBasis&&(w.style.flexBasis=oe+an),we&&((P={top:I.top+(M?A-l:F)+an,left:I.left+(M?F:A-l)+an,boxSizing:"border-box",position:"fixed"})[Ut]=P["max"+nn]=Math.ceil(I.width)+an,P[Xt]=P["max"+rn]=Math.ceil(I.height)+an,P[tn]=P[tn+Zt]=P[tn+Jt]=P[tn+Kt]=P[tn+Qt]="0",P[en]=k[en],P[en+Zt]=k[en+Zt],P[en+Jt]=k[en+Jt],P[en+Kt]=k[en+Kt],P[en+Qt]=k[en+Qt],y=function(e,t,n){for(var r,a=[],i=e.length,o=n?8:0;o<i;o+=2)r=e[o],a.push(r,r in t?t[r]:e[o+1]);return a.t=e.t,a}(v,P,se),ft&&$e(0)),n?(_=n._initted,tt(1),n.render(n.duration(),!0,!0),C=S(ue.a)-E+f+X,T=Math.abs(f-C)>1,we&&T&&y.splice(y.length-2,2),n.render(0,!0,!0),_||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),tt(0)):C=f,$&&($.value?$.style["overflow"+ue.a.toUpperCase()]=$.value:$.style.removeProperty("overflow-"+ue.a));z&&z.forEach(function(e){return e.revert(!1,!0)}),Te.start=l,Te.end=c,o=s=ft?R:$e(),ce||ft||(o<R&&$e(R),Te.scroll.rec=0),Te.revert(!1,!0),qe=wt(),B&&(Oe=-1,B.restart(!0)),Ye=0,n&&he&&(n._initted||j)&&n.progress()!==j&&n.progress(j||0,!0).render(n.time(),!0,!0),(Y||_e!==Te.progress||ce||te||n&&!n._initted)&&(n&&!he&&(n._initted||_e||!1!==n.vars.immediateRender)&&n.totalProgress(ce&&l<-.001&&!_e?Fe.utils.normalize(l,c,0):_e,!0),Te.progress=Y||(o-l)/f===_e?0:_e),K&&ee&&(w._pinOffset=Math.round(Te.progress*C)),q&&q.invalidate(),isNaN(N)||(N-=Fe.getProperty(u,ue.p),G-=Fe.getProperty(m,ue.p),er(u,ue,N),er(d,ue,N-(x||0)),er(m,ue,G),er(p,ue,G-(x||0))),Y&&!ft&&Te.update(),!J||ft||h||(h=!0,J(Te),h=!1)}},Te.getVelocity=function(){return($e()-s)/(wt()-We)*1e3||0},Te.endAnimation=function(){Nt(Te.callbackAnimation),n&&(q?q.progress(1):n.paused()?he||Nt(n,Te.direction<0,1):Nt(n,n.reversed()))},Te.labelToScroll=function(e){return n&&n.labels&&(l||Te.refresh()||l)+n.labels[e]/n.duration()*f||0},Te.getTrailing=function(e){var t=Sn.indexOf(Te),n=Te.direction>0?Sn.slice(0,t).reverse():Sn.slice(t+1);return(Rt(e)?n.filter(function(t){return t.vars.preventOverlaps===e}):n).filter(function(e){return Te.direction>0?e.end<=l:e.start>=c})},Te.update=function(e,t,a){if(!ce||a||e){var i,d,p,m,g,h,v,x=!0===ft?R:Te.scroll(),S=e?0:(x-l)/f,L=S<0?0:S>1?1:S||0,P=Te.progress;if(t&&(s=o,o=ce?$e():x,oe&&(O=D,D=n&&!he?n.totalProgress():L)),ne&&K&&!Ye&&!bt&&St&&(!L&&l<x+(x-s)/(wt()-We)*ne?L=1e-4:1===L&&c>x+(x-s)/(wt()-We)*ne&&(L=.9999)),L!==P&&Te.enabled){if(m=(g=(i=Te.isActive=!!L&&L<1)!==(!!P&&P<1))||!!L!=!!P,Te.direction=L>P?1:-1,Te.progress=L,m&&!Ye&&(d=L&&!P?0:1===L?1:1===P?2:3,he&&(p=!g&&"none"!==Se[d+1]&&Se[d+1]||Se[d],v=n&&("complete"===p||"reset"===p||p in n))),pe&&(g||v)&&(v||Q||!n)&&(jt(pe)?pe(Te):Te.getTrailing(pe).forEach(function(e){return e.endAnimation()})),he||(!q||Ye||bt?n&&n.totalProgress(L,!(!Ye||!qe&&!e)):(q._dp._time-q._start!==q._time&&q.render(q._dp._time-q._start),q.resetTo?q.resetTo("totalProgress",L,n._tTime/n._tDur):(q.vars.totalProgress=L,q.invalidate().restart()))),K)if(e&&ee&&(w.style[ee+ue.os2]=I),we){if(m){if(h=!e&&L>P&&c+1>x&&x+1>=_t(fe,ue),se)if(e||!i&&!h)Zn(K,w);else{var F=ln(K,!0),_=x-l;Zn(K,ze,F.top+(ue===Ie?_:0)+an,F.left+(ue===Ie?0:_)+an)}Yn(i||h?y:b),T&&L<1&&i||k(E+(1!==L||h?0:C))}}else k(Mt(E+C*L));oe&&!r.tween&&!Ye&&!bt&&B.restart(!0),Y&&(g||ie&&L&&(L<1||!gt))&&Ge(Y.targets).forEach(function(e){return e.classList[i||ie?"add":"remove"](Y.className)}),V&&!he&&!e&&V(Te),m&&!Ye?(he&&(v&&("complete"===p?n.pause().totalProgress(1):"reset"===p?n.restart(!0).pause():"restart"===p?n.restart(!0):n[p]()),V&&V(Te)),!g&&gt||(X&&g&&Gt(Te,X),xe[d]&&Gt(Te,xe[d]),ie&&(1===L?Te.kill(!1,1):xe[d]=0),g||xe[d=1===L?1:3]&&Gt(Te,xe[d])),de&&!i&&Math.abs(Te.getVelocity())>(zt(de)?de:2500)&&(Nt(Te.callbackAnimation),q?q.progress(1):Nt(n,"reverse"===p?1:!L,1))):he&&V&&!Ye&&V(Te)}if(M){var j=ce?x/ce.duration()*(ce._caScrollDist||0):x;A(j+(u._isFlipped?1:0)),M(j)}z&&z(-x/ce.duration()*(ce._caScrollDist||0))}},Te.enable=function(t,n){Te.enabled||(Te.enabled=!0,mn(fe,"resize",Ln),be||mn(fe,"scroll",Cn),Me&&mn(e,"refreshInit",Me),!1!==t&&(Te.progress=_e=0,o=s=Oe=$e()),!1!==n&&Te.refresh())},Te.getTween=function(e){return e&&r?r.tween:q},Te.setPositions=function(e,t,n,r){if(ce){var a=ce.scrollTrigger,i=ce.duration(),o=a.end-a.start;e=a.start+o*e/i,t=a.start+o*t/i}Te.refresh(!1,!1,{start:Ct(e,n&&!!Te._startClamp),end:Ct(t,n&&!!Te._endClamp)},r),Te.update()},Te.adjustPinSpacing=function(e){if(L&&e){var t=L.indexOf(ue.d)+1;L[t]=parseFloat(L[t])+e+an,L[1]=parseFloat(L[1])+e+an,Yn(L)}},Te.disable=function(t,n){if(Te.enabled&&(!1!==t&&Te.revert(!0,!0),Te.enabled=Te.isActive=!1,n||q&&q.pause(),R=0,a&&(a.uncache=1),Me&&gn(e,"refreshInit",Me),B&&(B.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!be)){for(var i=Sn.length;i--;)if(Sn[i].scroller===fe&&Sn[i]!==Te)return;gn(fe,"resize",Ln),be||gn(fe,"scroll",Cn)}},Te.kill=function(e,r){Te.disable(e,r),q&&!r&&q.kill(),U&&delete kn[U];var i=Sn.indexOf(Te);i>=0&&Sn.splice(i,1),i===Je&&$n>0&&Je--,i=0,Sn.forEach(function(e){return e.scroller===Te.scroller&&(i=1)}),i||ft||(Te.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.revert({kill:!1}),r||n.kill()),d&&[d,p,u,m].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),yt===Te&&(yt=0),K&&(a&&(a.uncache=1),i=0,Sn.forEach(function(e){return e.pin===K&&i++}),i||(a.spacer=0)),t.onKill&&t.onKill(Te)},Sn.push(Te),Te.enable(!1,!1),$&&$(Te),n&&n.add&&!f){var Qe=Te.update;Te.update=function(){Te.update=Qe,me.cache++,l||c||Te.refresh()},Fe.delayedCall(.01,Te.update),f=.01,l=c=0}else Te.refresh();K&&function(){if(vt!==_n){var e=vt=_n;requestAnimationFrame(function(){return e===_n&&jn(!0)})}}()}else this.update=this.refresh=this.kill=Tt},e.register=function(t){return _e||(Fe=t||Dt(),Pt()&&window.document&&e.enable(),_e=kt),_e},e.defaults=function(e){if(e)for(var t in e)vn[t]=e[t];return vn},e.disable=function(e,t){kt=0,Sn.forEach(function(n){return n[t?"kill":"disable"](e)}),gn(Be,"wheel",Cn),gn(Re,"scroll",Cn),clearInterval(Ve),gn(Re,"touchcancel",Tt),gn(ze,"touchstart",Tt),un(gn,Re,"pointerdown,touchstart,mousedown",Lt),un(gn,Re,"pointerup,touchend,mouseup",At),Ne.kill(),Bt(gn);for(var n=0;n<me.length;n+=3)hn(gn,me[n],me[n+1]),hn(gn,me[n],me[n+2])},e.enable=function(){if(Be=window,Re=document,je=Re.documentElement,ze=Re.body,Fe&&(Ge=Fe.utils.toArray,He=Fe.utils.clamp,lt=Fe.core.context||Tt,tt=Fe.core.suppressOverwrites||Tt,ct=Be.history.scrollRestoration||"auto",zn=Be.pageYOffset||0,Fe.core.globals("ScrollTrigger",e),ze)){kt=1,(dt=document.createElement("div")).style.height="100vh",dt.style.position="absolute",Bn(),It(),qe.register(Fe),e.isTouch=qe.isTouch,st=qe.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),at=1===qe.isTouch,mn(Be,"wheel",Cn),$e=[Be,Re,je,ze],Fe.matchMedia&&(e.matchMedia=function(e){var t,n=Fe.matchMedia();for(t in e)n.add(t,e[t]);return n},Fe.addEventListener("matchMediaInit",function(){return qn()}),Fe.addEventListener("matchMediaRevert",function(){return On()}),Fe.addEventListener("matchMedia",function(){jn(0,1),Pn("matchMedia")}),Fe.matchMedia().add("(orientation: portrait)",function(){return In(),In})),In(),mn(Re,"scroll",Cn);var t,n,r=ze.hasAttribute("style"),a=ze.style,i=a.borderTopStyle,o=Fe.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),a.borderTopStyle="solid",t=ln(ze),Ie.m=Math.round(t.top+Ie.sc())||0,Ce.m=Math.round(t.left+Ce.sc())||0,i?a.borderTopStyle=i:a.removeProperty("border-top-style"),r||(ze.setAttribute("style",""),ze.removeAttribute("style")),Ve=setInterval(En,250),Fe.delayedCall(.5,function(){return bt=0}),mn(Re,"touchcancel",Tt),mn(ze,"touchstart",Tt),un(mn,Re,"pointerdown,touchstart,mousedown",Lt),un(mn,Re,"pointerup,touchend,mouseup",At),Xe=Fe.utils.checkPrefix("transform"),Hn.push(Xe),_e=wt(),Ne=Fe.delayedCall(.2,jn).pause(),Ke=[Re,"visibilitychange",function(){var e=Be.innerWidth,t=Be.innerHeight;Re.hidden?(Qe=e,Ze=t):Qe===e&&Ze===t||Ln()},Re,"DOMContentLoaded",jn,Be,"load",jn,Be,"resize",Ln],Bt(mn),Sn.forEach(function(e){return e.enable(0,1)}),n=0;n<me.length;n+=3)hn(gn,me[n],me[n+1]),hn(gn,me[n],me[n+2])}},e.config=function(t){"limitCallbacks"in t&&(gt=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(Ve)||(Ve=n)&&setInterval(En,n),"ignoreMobileResize"in t&&(at=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Bt(gn)||Bt(mn,t.autoRefreshEvents||"none"),nt=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=Le(e),r=me.indexOf(n),a=Ot(n);~r&&me.splice(r,a?6:2),t&&(a?ge.unshift(Be,t,ze,t,je,t):ge.unshift(n,t))},e.clearMatchMedia=function(e){Sn.forEach(function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)})},e.isInViewport=function(e,t,n){var r=(Rt(e)?Le(e):e).getBoundingClientRect(),a=r[n?Ut:Xt]*t||0;return n?r.right-a>0&&r.left+a<Be.innerWidth:r.bottom-a>0&&r.top+a<Be.innerHeight},e.positionInViewport=function(e,t,n){Rt(e)&&(e=Le(e));var r=e.getBoundingClientRect(),a=r[n?Ut:Xt],i=null==t?a/2:t in yn?yn[t]*a:~t.indexOf("%")?parseFloat(t)*a/100:parseFloat(t)||0;return n?(r.left+i)/Be.innerWidth:(r.top+i)/Be.innerHeight},e.killAll=function(e){if(Sn.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e){var t=An.killAll||[];An={},t.forEach(function(e){return e()})}},e}();nr.version="3.13.0",nr.saveStyles=function(e){return e?Ge(e).forEach(function(e){if(e&&e.style){var t=Dn.indexOf(e);t>=0&&Dn.splice(t,5),Dn.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Fe.core.getCache(e),lt())}}):Dn},nr.revert=function(e,t){return qn(!e,t)},nr.create=function(e,t){return new nr(e,t)},nr.refresh=function(e){return e?Ln(!0):(_e||nr.register())&&jn(!0)},nr.update=function(e){return++me.cache&&Nn(!0===e?2:0)},nr.clearScrollMemory=Fn,nr.maxScroll=function(e,t){return _t(e,t?Ce:Ie)},nr.getScrollFunc=function(e,t){return Ae(Le(e),t?Ce:Ie)},nr.getById=function(e){return kn[e]},nr.getAll=function(){return Sn.filter(function(e){return"ScrollSmoother"!==e.vars.id})},nr.isScrolling=function(){return!!St},nr.snapDirectional=pn,nr.addEventListener=function(e,t){var n=An[e]||(An[e]=[]);~n.indexOf(t)||n.push(t)},nr.removeEventListener=function(e,t){var n=An[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},nr.batch=function(e,t){var n,r=[],a={},i=t.interval||.016,o=t.batchMax||1e9,s=function(e,t){var n=[],r=[],a=Fe.delayedCall(i,function(){t(n,r),n=[],r=[]}).pause();return function(e){n.length||a.restart(!0),n.push(e.trigger),r.push(e),o<=n.length&&a.progress(1)}};for(n in t)a[n]="on"===n.substr(0,2)&&jt(t[n])&&"onRefreshInit"!==n?s(0,t[n]):t[n];return jt(o)&&(o=o(),mn(nr,"refresh",function(){return o=t.batchMax()})),Ge(e).forEach(function(e){var t={};for(n in a)t[n]=a[n];t.trigger=e,r.push(nr.create(t))}),r};var rr,ar=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},ir=function e(t,n){!0===n?t.style.removeProperty("touch-action"):t.style.touchAction=!0===n?"auto":n?"pan-"+n+(qe.isTouch?" pinch-zoom":""):"none",t===je&&e(ze,n)},or={auto:1,scroll:1},sr=function(e){var t,n=e.event,r=e.target,a=e.axis,i=(n.changedTouches?n.changedTouches[0]:n).target,o=i._gsap||Fe.core.getCache(i),s=wt();if(!o._isScrollT||s-o._isScrollT>2e3){for(;i&&i!==ze&&(i.scrollHeight<=i.clientHeight&&i.scrollWidth<=i.clientWidth||!or[(t=on(i)).overflowY]&&!or[t.overflowX]);)i=i.parentNode;o._isScroll=i&&i!==r&&!Ot(i)&&(or[(t=on(i)).overflowY]||or[t.overflowX]),o._isScrollT=s}(o._isScroll||"x"===a)&&(n.stopPropagation(),n._gsapAllow=!0)},lr=function(e,t,n,r){return qe.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&sr,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&mn(Re,qe.eventTypes[0],dr,!1,!0)},onDisable:function(){return gn(Re,qe.eventTypes[0],dr,!0)}})},cr=/(input|label|select|textarea)/i,dr=function(e){var t=cr.test(e.target.tagName);(t||rr)&&(e._gsapAllow=!0,rr=t)},pr=function(e){$t(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,r,a,i,o,s,l,c=e,d=c.normalizeScrollX,p=c.momentum,u=c.allowNestedScroll,m=c.onRelease,g=Le(e.target)||je,h=Fe.core.globals().ScrollSmoother,f=h&&h.get(),v=st&&(e.content&&Le(e.content)||f&&!1!==e.content&&!f.smooth()&&f.content()),y=Ae(g,Ie),b=Ae(g,Ce),w=1,x=(qe.isTouch&&Be.visualViewport?Be.visualViewport.scale*Be.visualViewport.width:Be.outerWidth)/Be.innerWidth,S=0,k=jt(p)?function(){return p(t)}:function(){return p||2.8},E=lr(g,e.type,!0,u),C=function(){return a=!1},I=Tt,L=Tt,A=function(){n=_t(g,Ie),L=He(st?1:0,n),d&&(I=He(0,_t(g,Ce))),r=_n},T=function(){v._gsap.y=Mt(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},M=function(){A(),i.isActive()&&i.vars.scrollY>n&&(y()>n?i.progress(1)&&y(n):i.resetTo("scrollY",n))};return v&&Fe.set(v,{y:"+=0"}),e.ignoreCheck=function(e){return st&&"touchmove"===e.type&&function(){if(a){requestAnimationFrame(C);var e=Mt(t.deltaY/2),n=L(y.v-e);if(v&&n!==y.v+y.offset){y.offset=n-y.v;var r=Mt((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",v._gsap.y=r+"px",y.cacheID=me.cache,Nn()}return!0}y.offset&&T(),a=!0}()||w>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){a=!1;var e=w;w=Mt((Be.visualViewport&&Be.visualViewport.scale||1)/x),i.pause(),e!==w&&ir(g,w>1.01||!d&&"x"),o=b(),s=y(),A(),r=_n},e.onRelease=e.onGestureStart=function(e,t){if(y.offset&&T(),t){me.cache++;var r,a,o=k();d&&(a=(r=b())+.05*o*-e.velocityX/.227,o*=ar(b,r,a,_t(g,Ce)),i.vars.scrollX=I(a)),a=(r=y())+.05*o*-e.velocityY/.227,o*=ar(y,r,a,_t(g,Ie)),i.vars.scrollY=L(a),i.invalidate().duration(o).play(.01),(st&&i.vars.scrollY>=n||r>=n-1)&&Fe.to({},{onUpdate:M,duration:o})}else l.restart(!0);m&&m(e)},e.onWheel=function(){i._ts&&i.pause(),wt()-S>1e3&&(r=0,S=wt())},e.onChange=function(e,t,n,a,i){if(_n!==r&&A(),t&&d&&b(I(a[2]===t?o+(e.startX-e.x):b()+t-a[1])),n){y.offset&&T();var l=i[2]===n,c=l?s+e.startY-e.y:y()+n-i[1],p=L(c);l&&c!==p&&(s+=p-c),y(p)}(n||t)&&Nn()},e.onEnable=function(){ir(g,!d&&"x"),nr.addEventListener("refresh",M),mn(Be,"resize",M),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=b.smooth=!1),E.enable()},e.onDisable=function(){ir(g,!0),gn(Be,"resize",M),nr.removeEventListener("refresh",M),E.kill()},e.lockAxis=!1!==e.lockAxis,(t=new qe(e)).iOS=st,st&&!y()&&y(1),st&&Fe.ticker.add(Tt),l=t._dc,i=Fe.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:d?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Kn(y,y(),function(){return i.pause()})},onUpdate:Nn,onComplete:l.vars.onComplete}),t};nr.sort=function(e){if(jt(e))return Sn.sort(e);var t=Be.pageYOffset||0;return nr.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+Be.innerHeight}),Sn.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},nr.observe=function(e){return new qe(e)},nr.normalizeScroll=function(e){if(void 0===e)return rt;if(!0===e&&rt)return rt.enable();if(!1===e)return rt&&rt.kill(),void(rt=e);var t=e instanceof qe?e:pr(e);return rt&&rt.target===t.target&&rt.kill(),Ot(t.target)&&(rt=t),t},nr.core={_getVelocityProp:Te,_inputObserver:lr,_scrollers:me,_proxies:ge,bridge:{ss:function(){St||Pn("scrollStart"),St=wt()},ref:function(){return Ye}}},Dt()&&Fe.registerPlugin(nr);const ur=n(t());e.registerPlugin(nr);class mr{constructor(){this.scrollRevealElements=[],this.isLoading=!1,this.formProgress=0,this.areaFinderInstance=null,this.arcGISInstance=null,this.arcGISLoaded=!1,this.arcGISLoading=!1,this.activeMeasurementTool="google-maps",this.galleryFilter=null,this.init()}init(){N(),E(),this.preloadCriticalAssets(),this.initHeroVideo(),this.initLoadingAnimation(),this.initAnimations(),this.initScrollEffects(),this.initRevealOnScroll(),this.initNavigation();try{this.initGalleryFilters()}catch(e){}try{this.initContactForm()}catch(e){}this.initSectionAnimations(),this.initConversionOptimizations(),this.initInteractiveFeatures(),this.initClickToCall(),this.initEmergencyServiceHighlight(),this.initNotificationSystem();try{this.initLocationMaps()}catch(e){}this.initLazyLoading(),this.initMeasurementToolToggle();try{this.initServiceWorker()}catch(e){}try{c(),i({beforeSend:e=>e})}catch(e){}}initMeasurementToolToggle(){const e=document.querySelectorAll(".toggle-btn");document.getElementById("google-maps-container");const t=document.getElementById("arcgis-container"),n=document.getElementById("arcgis-placeholder");t&&(t.style.display="block",t.style.visibility="visible",t.style.opacity="1"),this.arcGISLoaded||this.arcGISLoading||(this.arcGISLoading=!0,n&&(n.style.display="flex"),this.loadArcGIS().then(()=>{this.arcGISLoaded=!0,this.arcGISLoading=!1,n&&(n.style.display="none")}).catch(e=>{this.arcGISLoading=!1,n&&this.showArcGISError(n,e)})),e.forEach(e=>{const t=e.dataset.tool;e.classList.remove("active"),"arcgis-3d"===t&&e.classList.add("active"),e.style.pointerEvents="none",e.style.opacity="0.6"}),this.activeMeasurementTool="arcgis-3d"}async loadArcGIS(){return new Promise((e,t)=>{if(this.arcGISLoaded)return void e();const n=document.createElement("link");n.rel="stylesheet",n.href="https://js.arcgis.com/4.33/esri/themes/light/main.css",document.head.appendChild(n);const r=document.createElement("script");r.type="module",r.src="https://js.arcgis.com/calcite-components/3.2.1/calcite.esm.js",document.head.appendChild(r);const a=document.createElement("script");a.src="https://js.arcgis.com/4.33/",a.onload=()=>{const n=document.createElement("script");n.type="module",n.src="https://js.arcgis.com/4.33/map-components/",n.onload=()=>{this.initializeArcGISScene(),e()},n.onerror=t,document.head.appendChild(n)},a.onerror=t,document.head.appendChild(a)})}initializeArcGISScene(){const e=document.getElementById("arcgis-scene-view");document.getElementById("arcgis-placeholder");const t=document.getElementById("arcgis-results"),n=document.getElementById("line-result"),r=document.getElementById("area-result");e.innerHTML='\n            <arcgis-scene item-id="5ce0de673d3b41a3bf3a217942211c4b" style="height: 100%; width: 100%;">\n                <arcgis-zoom position="top-left"></arcgis-zoom>\n                <arcgis-navigation-toggle position="top-left"></arcgis-navigation-toggle>\n                <arcgis-compass position="top-left"></arcgis-compass>\n                <arcgis-expand id="expand-line" position="top-right" group="top-right">\n                    <arcgis-direct-line-measurement-3d></arcgis-direct-line-measurement-3d>\n                </arcgis-expand>\n                <arcgis-expand id="expand-area" position="top-right" group="top-right">\n                    <arcgis-area-measurement-3d></arcgis-area-measurement-3d>\n                </arcgis-expand>\n            </arcgis-scene>\n        ',setTimeout(()=>{const a=e.querySelector("arcgis-scene"),i=e.querySelector("arcgis-direct-line-measurement-3d"),o=e.querySelector("arcgis-area-measurement-3d"),s=e.querySelector("#expand-line"),l=e.querySelector("#expand-area");a&&i&&o&&a.viewOnReady().then(()=>{this.setupArcGISMeasurementObservers(s,l,i,o,n,r,t)})},1e3)}setupArcGISMeasurementObservers(e,t,n,r,a,i,o){new MutationObserver(e=>{e.forEach(e=>{e.target.expanded?(n.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",i.textContent="0 mÂ²",t.expanded||(o.style.display="none"))})}).observe(e,{attributeFilter:["expanded"]});new MutationObserver(t=>{t.forEach(t=>{t.target.expanded?(r.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",i.textContent="0 mÂ²",e.expanded||(o.style.display="none"))})}).observe(t,{attributeFilter:["expanded"]}),n.addEventListener("measure-complete",e=>{e.detail&&e.detail.distance&&(a.textContent=`${e.detail.distance.toFixed(2)} ${e.detail.unit||"m"}`,this.updateProjectSizeFromMeasurement(e.detail,"distance"))}),r.addEventListener("measure-complete",e=>{e.detail&&e.detail.area&&(i.textContent=`${e.detail.area.toFixed(2)} ${e.detail.unit||"mÂ²"}`,this.updateProjectSizeFromMeasurement(e.detail,"area"))}),window.arcGISTool={getMeasurementData:()=>{const e=a.textContent,t=i.textContent,n=parseFloat(t.split(" ")[0]),r=parseFloat(e.split(" ")[0]);return n>0?{area:10.764*n,perimeter:3.28084*r,coordinates:[],unit:"sqft"}:null},clearMeasurements:()=>{n.clear(),r.clear(),a.textContent="0 m",i.textContent="0 mÂ²",o.style.display="none"}}}updateProjectSizeFromMeasurement(e,t){const n=document.getElementById("project-size");if(n&&"area"===t&&e.area){const t=Math.round(10.764*e.area);n.value=`${t} sq ft`,n.dispatchEvent(new Event("input",{bubbles:!0}))}}showArcGISError(e,t){e.innerHTML='\n            <div style="text-align: center; padding: 2rem; color: #dc3545;">\n                <div style="font-size: 48px; margin-bottom: 1rem;">âš ï¸</div>\n                <h3 style="margin-bottom: 1rem; color: #dc3545;">Failed to Load ArcGIS</h3>\n                <p style="margin-bottom: 1.5rem; color: #6c757d;">Unable to load the 3D measurement tool. This might be due to a network issue or service unavailability.</p>\n                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">\n                    <button onclick="window.location.reload();" \n                            style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Retry</button>\n                </div>\n                <p style="margin-top: 1rem; font-size: 0.9rem; color: #6c757d;">Please try refreshing the page or contact us directly for assistance.</p>\n            </div>\n        '}initHeroVideo(){const e=document.getElementById("hero-video");if(!e)return;const t=e.querySelector("source");if(t){const e="/assets/videos/optimized/neff-paving-1080p.mp4";t.src=e}e.addEventListener("error",e=>{const t=document.getElementById("hero");t&&(t.style.backgroundColor="#2c2c2c")}),e.addEventListener("loadeddata",()=>{e.play().catch(e=>{})}),e.style.opacity="1"}preloadCriticalAssets(){Y.preloadCriticalAssets([{path:"/assets/images/hero-bg.jpg",type:"image",priority:"high"},{path:"/assets/videos/optimized/neff-paving-1080p.mp4",type:"video",priority:"medium"},{path:"/assets/images/logo.png",type:"image",priority:"high"}])}initLazyLoading(){document.querySelectorAll("img[src]").forEach(e=>{const t=e.src;!t||t.startsWith("data:")||e.hasAttribute("data-no-lazy")||(e.dataset.src=t,e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB2aWV3Qm94PSIwIDAgMSAxIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiNGOEY5RkEiIGQ9Ik0wIDBoMXYxSDB6Ii8+PC9zdmc+",e.loading="lazy",e.classList.add("lazy-load"))}),Y.addLazyImages()}initSectionAnimations(){document.querySelectorAll(".service-card").forEach(t=>{t.addEventListener("mouseenter",()=>{e.to(t,{scale:1.03,duration:.3,ease:"power2.out"})}),t.addEventListener("mouseleave",()=>{e.to(t,{scale:1,duration:.3,ease:"power2.out"})})}),document.querySelectorAll(".team-member").forEach((t,n)=>{e.from(t,{y:50,opacity:0,duration:.8,delay:.1*n,scrollTrigger:{trigger:t,start:"top 80%",toggleActions:"play none none reverse"}})}),document.querySelectorAll(".contact-method").forEach((e,t)=>{e.style.opacity="1",e.style.transform="none"}),document.querySelectorAll(".stat-number").forEach(t=>{const n=t.textContent;t.textContent="0",e.to(t,{textContent:n,duration:2,ease:"power2.out",snap:{textContent:1},scrollTrigger:{trigger:t,start:"top 80%",toggleActions:"play none none none"}})}),document.querySelectorAll(".cert-icon").forEach((t,n)=>{e.from(t,{scale:0,rotation:180,duration:.5,delay:.05*n,ease:"back.out(1.7)",scrollTrigger:{trigger:t,start:"top 85%",toggleActions:"play none none reverse"}})})}initAnimations(){ur.init({duration:1e3,once:!0,offset:100}),e.from(".hero-content h2",{duration:1.5,y:50,opacity:0,ease:"power3.out"}),e.from(".hero-content p",{duration:1.5,y:30,opacity:0,delay:.3,ease:"power3.out"})}initAreaFinder(){const e=document.querySelector(".map-placeholder");if(e){e.innerHTML='\n                <div id="area-finder-container">\n                    <h4>Project Area Calculator</h4>\n                    <p>Draw the area of your project on the map to get an accurate estimate.</p>\n                </div>\n            ';try{this.areaFinderInstance=new I("area-finder-container",{showCalculator:!0,showAddressSearch:!0,showAreaInfo:!0,onAreaCalculated:e=>{this.updateProjectSizeFromArea(e)}})}catch(t){e.innerHTML='\n                    <div class="error-message">\n                        <p>Unable to load map. Please enter project size manually in the form above.</p>\n                    </div>\n                '}}}updateProjectSizeFromArea(e){const t=document.getElementById("project-size");t&&e.areaInSquareFeet&&(t.value=`${Math.round(e.areaInSquareFeet)} sq ft`,t.dispatchEvent(new Event("input",{bubbles:!0})))}initScrollEffects(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||e.to(".hero-content",{yPercent:10,ease:"none",scrollTrigger:{trigger:"#hero",start:"top bottom",end:"bottom top",scrub:2}});e.timeline({scrollTrigger:{trigger:"#hero",start:"top 80%",toggleActions:"play none none reverse"}}).from(".hero-title",{y:60,opacity:0,duration:1.2,ease:"power3.out"}).from(".hero-subtitle",{y:40,opacity:0,duration:1,ease:"power3.out"},"-=0.8").from(".hero-cta .btn",{y:30,opacity:0,duration:.8,stagger:.2,ease:"power3.out"},"-=0.6").from(".feature-badge",{y:20,opacity:0,duration:.6,stagger:.1,ease:"power3.out"},"-=0.4"),e.from(".asphalt-service-grid .service-card, .concrete-service-container .service-card",{y:80,opacity:0,duration:1,stagger:.2,ease:"power3.out",scrollTrigger:{trigger:".services-section",start:"top 80%",toggleActions:"play none none reverse"}}),e.from(".gallery-item",{scale:.8,opacity:0,duration:.8,stagger:.1,ease:"power3.out",scrollTrigger:{trigger:".gallery-container",start:"top 80%",toggleActions:"play none none reverse"}}),e.to("header",{backgroundColor:"rgba(44, 62, 80, 0.98)",scrollTrigger:{trigger:"body",start:"top -50px",end:"top -100px",scrub:1}}),e.utils.toArray("section").forEach((t,n)=>{"hero"!==t.id&&e.from(t,{opacity:0,y:50,duration:1,scrollTrigger:{trigger:t,start:"top 85%",toggleActions:"play none none reverse"}})})}initNavigation(){document.querySelectorAll('nav a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});let e=0;window.addEventListener("scroll",()=>{const t=window.pageYOffset||document.documentElement.scrollTop,n=document.querySelector("header");n.style.transform=t>e&&t>100?"translateY(-100%)":"translateY(0)",e=t<=0?0:t})}initGalleryFilters(){const e=document.getElementById("gallery");e&&(this.galleryFilter=new M(e))}initContactForm(){const e=document.getElementById("contact-form");e&&e.addEventListener("submit",async t=>{t.preventDefault();const n=new FormData(e),r=Object.fromEntries(n),a=this.getMeasurementData();if(a&&!this.validateMeasurementData(a))return void this.showValidationErrors(["measurement-invalid"]);if(a&&(r.measurementData=a,r.areaInSquareFeet=a.areaInSquareFeet,r.measurementTool=a.toolType),!this.validateForm(r))return;const i=e.querySelector('button[type="submit"]'),o=i.textContent;i.textContent="Sending...",i.disabled=!0;try{const t=await fetch("/api/estimates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await t.json();if(!n.success)throw new Error(n.message||"Submission failed");this.showSuccessMessage("Your estimate request has been submitted successfully!"),e.reset(),this.clearMeasurementData(),x()}catch(s){this.showSuccessMessage("Form submitted! We will contact you within 2 business hours.","warning")}finally{i.textContent=o,i.disabled=!1}});const t=document.getElementById("start-chat");t&&t.addEventListener("click",()=>{alert("Chat widget would open here. In a real implementation, this would integrate with a chat service like Intercom, Zendesk, or custom solution.")})}validateForm(e){const t=[];["firstName","lastName","email","phone","serviceType"].forEach(n=>{e[n]&&""!==e[n].trim()||t.push(n)});e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&t.push("email-format");return e.phone&&!/^[\d\s\-\+\(\)]{10,}$/.test(e.phone.replace(/\D/g,""))&&t.push("phone-format"),!(t.length>0)||(this.showValidationErrors(t),!1)}showValidationErrors(e){document.querySelectorAll(".error-message").forEach(e=>e.remove()),e.forEach(e=>{let t,n;switch(e){case"firstName":t="first-name",n="First name is required";break;case"lastName":t="last-name",n="Last name is required";break;case"email":t="email",n="Email is required";break;case"email-format":t="email",n="Please enter a valid email address";break;case"phone":t="phone",n="Phone number is required";break;case"phone-format":t="phone",n="Please enter a valid phone number";break;case"serviceType":t="service-type",n="Please select a service type";break;case"measurement-invalid":t="project-size",n="Please complete the measurement or clear the drawing to proceed"}const r=document.getElementById(t);if(r){const e=document.createElement("div");e.className="error-message",e.style.color="var(--error-red)",e.style.fontSize="14px",e.style.marginTop="var(--spacing-xs)",e.textContent=n,r.parentNode.appendChild(e),r.style.borderColor="var(--error-red)"}})}getMeasurementData(){if(this.areaFinderInstance&&this.areaFinderInstance.getAreaData()){const e=this.areaFinderInstance.getAreaData();return{toolType:"google-maps",areaInSquareFeet:e.areaInSquareFeet,areaInAcres:e.areaInAcres,perimeter:e.perimeter,coordinates:e.coordinates||[],timestamp:(new Date).toISOString()}}if(window.arcGISTool&&window.arcGISTool.getMeasurementData){const e=window.arcGISTool.getMeasurementData();if(e&&e.area)return{toolType:"arcgis",areaInSquareFeet:e.area,areaInAcres:e.area/43560,perimeter:e.perimeter||0,coordinates:e.coordinates||[],timestamp:(new Date).toISOString()}}return null}validateMeasurementData(e){if(!e)return!1;if(!e.areaInSquareFeet||e.areaInSquareFeet<=0)return!1;return!!["google-maps","arcgis"].includes(e.toolType)}clearMeasurementData(){this.areaFinderInstance&&this.areaFinderInstance.clearShapes(),window.arcGISTool&&window.arcGISTool.clearMeasurements&&window.arcGISTool.clearMeasurements()}showSuccessMessage(t="Thank You!",n="success"){const r=document.querySelector(".success-message");r&&r.remove();const a=document.createElement("div");a.className="success-message alert alert-"+("success"===n?"success":"warning"),a.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: ${"success"===n?"#d4edda":"#fff3cd"};\n            color: ${"success"===n?"#155724":"#856404"};\n            padding: 1rem 1.5rem;\n            border-radius: 8px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            z-index: 10000;\n            border: 1px solid ${"success"===n?"#c3e6cb":"#ffeaa7"};\n            max-width: 400px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        `,a.innerHTML=`\n            <div style="display: flex; align-items: center; justify-content: space-between;">\n                <div>\n                    <h4 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; font-weight: 600;">${"success"===n?"âœ… ":"âš ï¸ "}${t}</h4>\n                    <p style="margin: 0; font-size: 0.9rem;">\n                        ${"success"===n?"Your estimate request has been submitted successfully. We'll contact you within 2 business hours with a detailed quote.":"Your form has been submitted. If you don't hear from us within 24 hours, please call us directly."}\n                    </p>\n                </div>\n                <button onclick="this.parentElement.parentElement.remove()" \n                        style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: inherit; margin-left: 1rem;">Ã—</button>\n            </div>\n        `,document.body.appendChild(a),setTimeout(()=>{a.parentElement&&a.remove()},8e3),void 0!==e&&e.fromTo(a,{x:400,opacity:0},{x:0,opacity:1,duration:.5,ease:"back.out(1.7)"})}initLoadingAnimation(){const e=document.createElement("div");e.className="loading-overlay show",e.innerHTML='\n            <div class="loading-spinner"></div>\n        ',document.body.appendChild(e),window.addEventListener("load",()=>{setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>{e.remove()},300)},500)})}initRevealOnScroll(){[{selector:".service-card",class:"reveal stagger-1"},{selector:".gallery-item",class:"reveal-scale stagger-2"},{selector:".team-member",class:"reveal-left stagger-3"},{selector:".contact-method",class:"reveal-right stagger-1"},{selector:".cert-category",class:"reveal stagger-2"}].forEach(({selector:e,class:t})=>{document.querySelectorAll(e).forEach((e,n)=>{e.classList.add("reveal"),t.includes("stagger")&&e.classList.add("stagger-"+(n%6+1)),t.includes("reveal-left")?e.classList.add("reveal-left"):t.includes("reveal-right")?e.classList.add("reveal-right"):t.includes("reveal-scale")&&e.classList.add("reveal-scale")})});const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("revealed")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right, .reveal-scale").forEach(t=>{e.observe(t)})}initConversionOptimizations(){const e=document.getElementById("contact-form");if(e){const t=document.createElement("div");t.className="form-progress",t.innerHTML='<div class="form-progress-bar"></div>',e.insertBefore(t,e.firstChild);const n=e.querySelectorAll("input[required], select[required], textarea[required]"),r=t.querySelector(".form-progress-bar");n.forEach(e=>{e.addEventListener("input",()=>{this.updateFormProgress(n,r)}),e.addEventListener("change",()=>{this.updateFormProgress(n,r)})})}this.addUrgencyIndicators(),this.trackUserEngagement()}updateFormProgress(e,t){const n=Array.from(e).filter(e=>"email"===e.type?e.value&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value):e.value&&""!==e.value.trim()).length/e.length*100;t.style.width=`${n}%`,e.forEach(e=>{const t=e.closest(".form-group");e.value&&""!==e.value.trim()?"email"!==e.type||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)?(t.classList.remove("error"),t.classList.add("success")):(t.classList.remove("success"),t.classList.add("error")):t.classList.remove("success","error")})}createStickyCTA(){const e=document.createElement("div");e.className="sticky-cta",e.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            background: var(--safety-yellow);\n            color: var(--asphalt-dark);\n            padding: var(--spacing-md) var(--spacing-lg);\n            border-radius: 25px;\n            box-shadow: var(--shadow-lg);\n            z-index: 1000;\n            font-family: var(--font-primary);\n            font-weight: 600;\n            cursor: pointer;\n            transform: translateY(100px);\n            transition: var(--transition);\n        ",e.innerHTML="\n            ðŸ“ž Call for Free Quote: (555) 123-PAVE\n        ",e.addEventListener("click",()=>{window.location.href="tel:5551237283"}),document.body.appendChild(e);const t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting?e.style.transform="translateY(100px)":e.style.transform="translateY(0)"})},{threshold:.1}),n=document.getElementById("hero");n&&t.observe(n)}addUrgencyIndicators(){const e=document.querySelector(".emergency-service");if(e){const t=document.createElement("div");t.style.cssText="\n                background: rgba(255, 255, 255, 0.1);\n                padding: var(--spacing-sm);\n                border-radius: var(--border-radius);\n                margin-top: var(--spacing-md);\n                font-size: 14px;\n                text-align: center;\n            ",t.innerHTML="âš¡ Average response time: 30 minutes",e.appendChild(t)}this.addSocialProof()}addSocialProof(){const e=document.querySelector(".hero-content");if(e){const t=document.createElement("div");t.className="social-proof",t.style.cssText="\n                margin-top: var(--spacing-lg);\n                padding: var(--spacing-md);\n                background: rgba(255, 255, 255, 0.1);\n                border-radius: var(--border-radius);\n                text-align: center;\n                font-size: 14px;\n            ",t.innerHTML="\n                â­â­â­â­â­ Rated 4.9/5 by 200+ customers | ðŸ† BBB A+ Rating\n            ",e.appendChild(t)}}trackUserEngagement(){window.addEventListener("scroll",()=>{Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100)>=50&&!this.hasShownScrollOffer&&(this.showScrollOffer(),this.hasShownScrollOffer=!0)});let e=0;setInterval(()=>{e+=1,e>=120&&!this.hasShownTimeOffer&&(this.showTimeOffer(),this.hasShownTimeOffer=!0)},1e3),document.addEventListener("mouseleave",e=>{e.clientY<0&&!this.hasShownExitIntent&&(this.showExitIntentOffer(),this.hasShownExitIntent=!0)})}showScrollOffer(){this.showNotification("ðŸ“± Still browsing? Get a free quote in under 2 minutes!","info",()=>{document.getElementById("contact-form").scrollIntoView({behavior:"smooth"})})}showTimeOffer(){this.showNotification("â° Limited Time: Free site consultation with any quote request!","warning")}showExitIntentOffer(){this.showNotification("ðŸš€ Wait! Get 10% off your first project - Call now: (555) 123-PAVE","success",()=>{window.location.href="tel:5551237283"})}initInteractiveFeatures(){document.querySelectorAll(".cert-icon").forEach(e=>{const t=e.closest("li");t&&(t.classList.add("tooltip"),t.setAttribute("data-tooltip","Click for more information"))}),document.querySelectorAll(".service-card").forEach(e=>{const t=e.querySelector(".btn");t&&t.addEventListener("click",t=>{t.preventDefault(),this.prefilleForm(e)})})}prefilleForm(e){const t=e.querySelector("h3").textContent,n=document.getElementById("service-type");if(n){const e={"Residential Paving":"residential","Commercial Paving":"commercial","Maintenance Services":"maintenance","Custom Solutions":"custom"}[t];e&&(n.value=e,n.dispatchEvent(new Event("change")))}document.getElementById("contact-form").scrollIntoView({behavior:"smooth"}),this.showNotification(`Form pre-filled for ${t} services!`,"success")}initClickToCall(){document.querySelectorAll('a[href^="tel:"]').forEach(e=>{e.addEventListener("click",()=>{this.trackPhoneClick(e.href)})});document.querySelectorAll(".method-info, .hero-subtitle").forEach(e=>{const t=e.textContent,n=/\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})/;n.test(t)&&(e.style.cursor="pointer",e.style.textDecoration="underline",e.addEventListener("click",()=>{const e=t.match(n)[0];window.location.href=`tel:${e.replace(/\D/g,"")}`}))})}trackPhoneClick(e){}initEmergencyServiceHighlight(){const e=(new Date).getHours(),t=e>=7&&e<=19;document.querySelectorAll(".contact-method.emergency").forEach(e=>{if(!t){e.style.order="-1",e.style.transform="scale(1.05)";const t=document.createElement("div");t.style.cssText="\n                    position: absolute;\n                    top: -10px;\n                    right: -10px;\n                    background: var(--warning-amber);\n                    color: var(--asphalt-dark);\n                    padding: var(--spacing-xs) var(--spacing-sm);\n                    border-radius: 15px;\n                    font-size: 12px;\n                    font-weight: 700;\n                    animation: pulse 2s infinite;\n                ",t.textContent="AFTER HOURS",e.style.position="relative",e.appendChild(t)}})}initNotificationSystem(){const e=document.createElement("div");e.id="notification-container",e.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            display: flex;\n            flex-direction: column;\n            gap: var(--spacing-md);\n        ",document.body.appendChild(e)}showNotification(e,t="info",n=null){const r=document.getElementById("notification-container");if(!r)return;const a=document.createElement("div");a.className=`notification ${t} show`,a.innerHTML=`\n            <div style="display: flex; align-items: center; justify-content: space-between;">\n                <span>${e}</span>\n                <button onclick="this.closest('.notification').remove()" style="background: none; border: none; color: inherit; font-size: 18px; cursor: pointer; margin-left: var(--spacing-md);">&times;</button>\n            </div>\n        `,n&&(a.style.cursor="pointer",a.addEventListener("click",n)),r.appendChild(a),setTimeout(()=>{a.remove()},5e3)}initLocationMaps(){try{this.locationMaps=new L}catch(e){}}initServiceWorker(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&this.showUpdateNotification()})})}).catch(e=>{})})}showUpdateNotification(){const e=document.createElement("div");e.className="update-notification",e.style.cssText="\n            position: fixed;\n            top: 20px;\n            left: 50%;\n            transform: translateX(-50%);\n            background: #2196F3;\n            color: white;\n            padding: 1rem 2rem;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 10001;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            display: flex;\n            align-items: center;\n            gap: 1rem;\n        ",e.innerHTML='\n            <span>ðŸš€ A new version is available!</span>\n            <button onclick="window.location.reload()" \n                    style="background: white; color: #2196F3; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-weight: 600;">Update</button>\n            <button onclick="this.parentElement.remove()" \n                    style="background: transparent; color: white; border: 1px solid white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">Later</button>\n        ',document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)}debounce(e,t){let n;return function(...r){const a=this;clearTimeout(n),n=setTimeout(()=>e.apply(a,r),t)}}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}}function gr(){try{new mr}catch(e){try{const e=document.getElementById("gallery");e&&a(()=>Promise.resolve().then(()=>P),void 0).then(t=>{new t.default(e)}).catch(e=>{})}catch(t){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",gr):gr();class hr{constructor(){this.validationRules={area:{min:50,max:5e5,reasonable:{residential:{min:100,max:1e4},commercial:{min:1e3,max:1e5},maintenance:{min:50,max:5e4},custom:{min:50,max:5e5},emergency:{min:50,max:2e4}}},perimeter:{min:28,max:1e4}},this.measurementToolInstructions={"google-maps":{title:"Google Maps Area Finder",description:"Easy-to-use 2D measurement with satellite imagery",instructions:["Search for your project location using the address search","Click the drawing tools to select polygon, rectangle, or circle","Click on the map to start drawing your area","For polygons: Click to add points, click first point again to close","For rectangles: Click and drag to create the rectangle","For circles: Click center point, then drag to set radius",'Use the "Calculate Area" button to get measurements'],benefits:["Simple and intuitive interface","Real satellite imagery for accurate placement","Multiple drawing tools (polygon, rectangle, circle)","Automatic area and perimeter calculation","Address search for quick location finding"],limitations:["Limited to 2D measurements only","Cannot account for elevation changes","May be less accurate for complex terrain"]},"arcgis-3d":{title:"ArcGIS 3D Measurement Tool",description:"Advanced 3D measurement with terrain analysis",instructions:["Wait for the 3D scene to load completely","Use the navigation controls to position the view",'Click the "Area Measurement" tool in the toolbar',"Click on the terrain to start measuring","Continue clicking to add measurement points","Double-click to finish the measurement","View results in the measurement panel"],benefits:["True 3D measurements with elevation data","Terrain-aware calculations for slopes and hills","More accurate for complex topography","Professional-grade measurement precision","Automatic calculation of surface area on slopes"],limitations:["Requires modern browser with WebGL support","Longer loading time for 3D scene","May require more computer resources","Steeper learning curve for new users"]}},this.helpText={serviceTypes:{residential:"Driveways, walkways, patios, and small parking areas for homes",commercial:"Parking lots, loading docks, and business access areas",maintenance:"Crack sealing, sealcoating, striping, and repair work",custom:"Specialized paving projects requiring unique solutions",emergency:"Urgent repairs for safety hazards or damage"},measurementTools:{when3DRecommended:["Properties with significant elevation changes","Sloped driveways or parking areas","Terraced or multi-level projects","Properties near hills or valleys","When precise surface area is critical"],when2DAcceptable:["Flat or nearly flat surfaces","Simple rectangular areas","Quick estimates for planning","Basic residential driveways","Small maintenance projects"]}},this.tooltips={measurement3D:"Use 3D measurement for slopes and complex terrain to get accurate surface area calculations. This is especially important for driveways on hills or uneven ground.",areaValidation:"Area measurements help us provide accurate estimates and ensure we bring the right equipment and materials for your project.",serviceTypeSelection:"Select the service type that best matches your project. This helps us provide appropriate pricing and timeline estimates.",addressImportant:"Project address helps us factor in local conditions, permit requirements, and travel time for accurate estimates.",timeline:"Timeline preferences help us schedule your project efficiently and set realistic expectations for completion."}}validateAreaMeasurement(e,t="residential",n="sqft"){const r={isValid:!0,warnings:[],errors:[],recommendations:[]};if(!e||e<=0)return r.isValid=!1,r.errors.push("Area measurement is required and must be greater than 0"),r;const a=this.convertToSquareFeet(e,n);a<this.validationRules.area.min&&(r.isValid=!1,r.errors.push(`Area is below minimum of ${this.validationRules.area.min} sq ft`)),a>this.validationRules.area.max&&(r.isValid=!1,r.errors.push(`Area exceeds maximum of ${this.validationRules.area.max.toLocaleString()} sq ft`));const i=this.validationRules.area.reasonable[t];return i&&(a<i.min&&r.warnings.push(`Area seems small for ${t} projects. Typical range is ${i.min.toLocaleString()}-${i.max.toLocaleString()} sq ft`),a>i.max&&(r.warnings.push(`Area seems large for ${t} projects. Typical range is ${i.min.toLocaleString()}-${i.max.toLocaleString()} sq ft`),r.recommendations.push("Consider breaking large projects into phases"))),a>5e3&&r.recommendations.push("For large areas, consider using 3D measurement tools for better accuracy"),a>2e4&&r.recommendations.push("Large commercial projects may require site survey for final measurements"),r}validatePerimeterMeasurement(e,t,n="ft"){const r={isValid:!0,warnings:[],errors:[]};if(!e||e<=0)return r.warnings.push("Perimeter measurement not provided - using area-based estimate"),r;const a=this.convertToFeet(e,n);if(a<this.validationRules.perimeter.min&&r.warnings.push(`Perimeter seems unusually small (${a} ft)`),a>this.validationRules.perimeter.max&&r.warnings.push(`Perimeter seems unusually large (${a.toLocaleString()} ft)`),t){const e=this.convertToSquareFeet(t,"ft"===n?"sqft":"sqm"),i=a/Math.sqrt(e);i>8&&r.warnings.push("Area shape appears very elongated or irregular"),i<2&&r.warnings.push("Area shape appears very compact - please verify measurements")}return r}getMeasurementToolInstructions(e){return this.measurementToolInstructions[e]||null}getHelpText(e,t=null){return t&&this.helpText[e]&&this.helpText[e][t]?this.helpText[e][t]:this.helpText[e]||null}getTooltip(e){return this.tooltips[e]||null}recommendMeasurementTool(e,t="",n=!1){const r={primary:"google-maps",secondary:"arcgis-3d",reasoning:[]},a=["slope","hill","sloped","steep","elevation","grade","incline"].some(e=>t.toLowerCase().includes(e));return(n||a)&&(r.primary="arcgis-3d",r.secondary="google-maps",r.reasoning.push("3D measurement recommended for sloped terrain")),"commercial"===e&&(r.reasoning.push("Commercial projects benefit from precise 3D measurements"),"google-maps"===r.primary&&r.reasoning.push("Consider 3D measurement for complex layouts")),"emergency"===e&&(r.primary="google-maps",r.secondary="arcgis-3d",r.reasoning.push("Quick 2D measurement suitable for emergency repairs")),r}validateForm(e){const t={isValid:!0,errors:[],warnings:[],recommendations:[]};if(["firstName","lastName","email","phone","serviceType"].forEach(n=>{e[n]&&""!==e[n].trim()||(t.isValid=!1,t.errors.push(`${this.formatFieldName(n)} is required`))}),e.email&&!this.isValidEmail(e.email)&&(t.isValid=!1,t.errors.push("Please enter a valid email address")),e.phone&&!this.isValidPhone(e.phone)&&t.warnings.push("Phone number format could not be verified"),e.areaData){const n=this.validateAreaMeasurement(e.areaData.area||e.areaData.areaInSquareFeet,e.serviceType,"sqft");if(t.isValid=t.isValid&&n.isValid,t.errors.push(...n.errors),t.warnings.push(...n.warnings),t.recommendations.push(...n.recommendations),e.areaData.perimeter){const n=this.validatePerimeterMeasurement(e.areaData.perimeter,e.areaData.area||e.areaData.areaInSquareFeet,"ft");t.warnings.push(...n.warnings),t.errors.push(...n.errors)}}const n=this.recommendMeasurementTool(e.serviceType,e.projectDescription);return t.recommendations.push(...n.reasoning),t}getValidationMessage(e){let t="";return e.errors.length>0&&(t+=`Errors: ${e.errors.join(", ")}\n`),e.warnings.length>0&&(t+=`Warnings: ${e.warnings.join(", ")}\n`),e.recommendations.length>0&&(t+=`Recommendations: ${e.recommendations.join(", ")}`),t.trim()}convertToSquareFeet(e,t){return e*({sqft:1,sqm:10.7639,acres:43560}[t]||1)}convertToFeet(e,t){return e*({ft:1,m:3.28084,meters:3.28084}[t]||1)}formatFieldName(e){return e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){const t=e.replace(/\D/g,"");return t.length>=10&&/^[\+]?[1-9][\d]{0,15}$/.test(t)}}class fr{constructor(){this.rates={residential:{base:3.5,premium:4.5},commercial:{base:4,premium:5}},this.modifiers={complexity:{simple:1,moderate:1.2,complex:1.5},accessibility:{easy:1,moderate:1.15,difficult:1.3},season:{peak:1.1,regular:1,offSeason:.9},urgency:{standard:1,rush:1.25,emergency:1.5}},this.materialCosts={asphalt:2.5,concrete:4,sealcoating:.5,striping:.25},this.laborRates={skilled:45,semiskilled:35,general:25}}calculateEstimate(e,t,n={}){const r={baseCost:0,materialCost:0,laborCost:0,totalCost:0,timeline:{days:0,startDate:null,endDate:null},breakdown:{}},{base:a,premium:i}=this.rates[t];r.baseCost=e*(n.premium?i:a);let o=r.baseCost;return n.complexity&&(o*=this.modifiers.complexity[n.complexity]||1),n.accessibility&&(o*=this.modifiers.accessibility[n.accessibility]||1),n.season&&(o*=this.modifiers.season[n.season]||1),n.urgency&&(o*=this.modifiers.urgency[n.urgency]||1),n.discount&&n.discount>0&&n.discount<1&&(o*=1-n.discount),r.baseCost=o,r.materialCost=this.calculateMaterialCost(e,n.materials||[]),r.laborCost=this.calculateLaborCost(e,t,n),r.timeline=this.calculateTimeline(e,t,n),r.totalCost=r.baseCost+r.materialCost+r.laborCost,r.breakdown={baseRate:n.premium?i:a,squareFeet:e,modifiers:this.getAppliedModifiers(n),materials:n.materials||[],laborHours:this.calculateLaborHours(e,t,n)},r}calculateMaterialCost(e,t){let n=0;return t.forEach(t=>{const r=this.materialCosts[t.type]||0,a=t.coverage||e,i=t.quantity||1;n+=r*a*i}),n}calculateLaborCost(e,t,n){const r=this.calculateLaborHours(e,t,n),a=n.skillLevel||"semiskilled";return r*(this.laborRates[a]||this.laborRates.semiskilled)}calculateLaborHours(e,t,n){let r=e*({residential:.02,commercial:.015}[t]||.02);return"complex"===n.complexity?r*=1.5:"moderate"===n.complexity&&(r*=1.2),"difficult"===n.accessibility?r*=1.3:"moderate"===n.accessibility&&(r*=1.15),Math.max(r,4)}calculateTimeline(e,t,n){const r=this.calculateLaborHours(e,t,n),a=n.hoursPerDay||8,i=Math.ceil(r/a),o=Math.ceil(.2*i),s=i+o,l=n.startDate?new Date(n.startDate):new Date,c=new Date(l);return c.setDate(l.getDate()+s),{days:s,workDays:i,bufferDays:o,startDate:l.toISOString().split("T")[0],endDate:c.toISOString().split("T")[0]}}getAppliedModifiers(e){const t={};return e.complexity&&(t.complexity={type:e.complexity,multiplier:this.modifiers.complexity[e.complexity]}),e.accessibility&&(t.accessibility={type:e.accessibility,multiplier:this.modifiers.accessibility[e.accessibility]}),e.season&&(t.season={type:e.season,multiplier:this.modifiers.season[e.season]}),e.urgency&&(t.urgency={type:e.urgency,multiplier:this.modifiers.urgency[e.urgency]}),e.discount&&(t.discount={rate:e.discount,multiplier:1-e.discount}),t}getAvailableOptions(){return{serviceTypes:Object.keys(this.rates),complexityLevels:Object.keys(this.modifiers.complexity),accessibilityLevels:Object.keys(this.modifiers.accessibility),seasons:Object.keys(this.modifiers.season),urgencyLevels:Object.keys(this.modifiers.urgency),materialTypes:Object.keys(this.materialCosts),skillLevels:Object.keys(this.laborRates)}}}class vr{constructor(e){this.container=document.getElementById(e),this.validationService=new hr,this.estimateService=new fr,this.formData={},this.measurementData=null,this.serviceType=document.getElementById("service-type"),this.squareFootage=document.getElementById("square-footage"),this.isSubmitting=!1,this.init()}init(){this.render(),this.attachEventListeners(),this.loadMeasurementData(),this.updateSubmitButtonState()}render(){this.container.innerHTML=`\n            <div class="estimate-form-container">\n                <div class="form-header">\n                    <h2>Request Your Free Estimate</h2>\n                    <p class="form-subtitle">Complete the form below to receive a detailed estimate for your paving project</p>\n                </div>\n\n                <form id="estimate-form" class="estimate-form" novalidate>\n                    \x3c!-- Personal Information Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">ðŸ‘¤</span>\n                            Personal Information\n                        </h3>\n                        \n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="firstName" class="form-label">\n                                    First Name <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="firstName" \n                                    name="firstName" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="firstName-error"\n                                >\n                                <div class="error-message" id="firstName-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="lastName" class="form-label">\n                                    Last Name <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="lastName" \n                                    name="lastName" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="lastName-error"\n                                >\n                                <div class="error-message" id="lastName-error"></div>\n                            </div>\n                        </div>\n\n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="email" class="form-label">\n                                    Email Address <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="email" \n                                    id="email" \n                                    name="email" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="email-error"\n                                    placeholder="your@email.com"\n                                >\n                                <div class="error-message" id="email-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="phone" class="form-label">\n                                    Phone Number <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="tel" \n                                    id="phone" \n                                    name="phone" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="phone-error"\n                                    placeholder="(555) 123-4567"\n                                >\n                                <div class="error-message" id="phone-error"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Project Details Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">ðŸ—ï¸</span>\n                            Project Details\n                        </h3>\n                        \n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="serviceType" class="form-label">\n                                    Service Type <span class="required">*</span>\n                                    <span class="tooltip" data-tooltip="${this.validationService.getTooltip("serviceTypeSelection")}">â„¹ï¸</span>\n                                </label>\n                                <select \n                                    id="serviceType" \n                                    name="serviceType" \n                                    class="form-select" \n                                    required\n                                    aria-describedby="serviceType-error"\n                                >\n                                    <option value="">Select a service type</option>\n                                    <option value="residential">Residential Paving</option>\n                                    <option value="commercial">Commercial Paving</option>\n                                    <option value="maintenance">Maintenance Services</option>\n                                    <option value="custom">Custom Projects</option>\n                                    <option value="emergency">Emergency Repairs</option>\n                                </select>\n                                <div class="error-message" id="serviceType-error"></div>\n                                <div class="help-text" id="serviceType-help"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="timeline" class="form-label">\n                                    Preferred Timeline\n                                    <span class="tooltip" data-tooltip="${this.validationService.getTooltip("timeline")}">â„¹ï¸</span>\n                                </label>\n                                <input \n                                    type="date" \n                                    id="timeline" \n                                    name="timeline" \n                                    class="form-input"\n                                    min="${(new Date).toISOString().split("T")[0]}"\n                                    aria-describedby="timeline-error"\n                                >\n                                <div class="error-message" id="timeline-error"></div>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label for="projectDescription" class="form-label">\n                                Project Description\n                            </label>\n                            <textarea \n                                id="projectDescription" \n                                name="projectDescription" \n                                class="form-textarea" \n                                rows="4"\n                                placeholder="Please describe your paving project in detail..."\n                                aria-describedby="projectDescription-error"\n                            ></textarea>\n                            <div class="error-message" id="projectDescription-error"></div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Property Address Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">ðŸ“</span>\n                            Property Address\n                            <span class="tooltip" data-tooltip="${this.validationService.getTooltip("addressImportant")}">â„¹ï¸</span>\n                        </h3>\n                        \n                        <div class="form-group">\n                            <label for="streetAddress" class="form-label">\n                                Street Address <span class="required">*</span>\n                            </label>\n                            <input \n                                type="text" \n                                id="streetAddress" \n                                name="streetAddress" \n                                class="form-input" \n                                required\n                                placeholder="123 Main Street"\n                                aria-describedby="streetAddress-error"\n                            >\n                            <div class="error-message" id="streetAddress-error"></div>\n                        </div>\n\n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="city" class="form-label">\n                                    City <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="city" \n                                    name="city" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="city-error"\n                                >\n                                <div class="error-message" id="city-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="state" class="form-label">\n                                    State <span class="required">*</span>\n                                </label>\n                                <select \n                                    id="state" \n                                    name="state" \n                                    class="form-select" \n                                    required\n                                    aria-describedby="state-error"\n                                >\n                                    <option value="">Select State</option>\n                                    <option value="OH">Ohio</option>\n                                    <option value="KY">Kentucky</option>\n                                    <option value="WV">West Virginia</option>\n                                    <option value="PA">Pennsylvania</option>\n                                    <option value="IN">Indiana</option>\n                                    <option value="MI">Michigan</option>\n                                </select>\n                                <div class="error-message" id="state-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="zipCode" class="form-label">\n                                    ZIP Code <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="zipCode" \n                                    name="zipCode" \n                                    class="form-input" \n                                    required\n                                    pattern="[0-9]{5}(-[0-9]{4})?"\n                                    placeholder="12345"\n                                    aria-describedby="zipCode-error"\n                                >\n                                <div class="error-message" id="zipCode-error"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Map Measurement Data Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">ðŸ“</span>\n                            Area Measurement\n                            <span class="tooltip" data-tooltip="${this.validationService.getTooltip("areaValidation")}">â„¹ï¸</span>\n                        </h3>\n                        \n                        <div class="measurement-status" id="measurement-status">\n                            <div class="measurement-requirement">\n                                <strong>Use the map below to measure your project area</strong>\n                                <p>Draw the area on the map to get an accurate measurement for your estimate.</p>\n                            </div>\n                        </div>\n\n                        \x3c!-- Map Container --\x3e\n                        <div class="map-container">\n                            \x3c!-- Tool Selection --\x3e\n                            <div class="tool-selection">\n                                <button type="button" class="toggle-btn active" data-tool="arcgis-3d" id="arcgis-toggle">\n                                    ðŸ—ºï¸ ArcGIS 3D Measurement\n                                </button>\n                                <button type="button" class="toggle-btn" data-tool="google-maps" id="google-maps-toggle">\n                                    ðŸ“ Google Maps Measurement\n                                </button>\n                            </div>\n\n                            \x3c!-- ArcGIS Container (Default/Active) --\x3e\n                            <div id="arcgis-container" class="map-placeholder" style="display: block;">\n                                <div id="arcgis-scene-view" style="height: 400px; width: 100%; position: relative;">\n                                    <div id="arcgis-placeholder" style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f5f5f5; border-radius: 8px; flex-direction: column; gap: 1rem;">\n                                        <div class="loading-spinner" style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #ffd700; border-radius: 50%; animation: spin 1s linear infinite;"></div>\n                                        <p style="color: #6b6b6b; font-size: 16px; margin: 0;">Loading ArcGIS 3D scene...</p>\n                                    </div>\n                                </div>\n                                <div id="arcgis-results" class="measurement-results" style="display: none; margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">\n                                    <h4 style="margin: 0 0 0.5rem 0; color: #2c2c2c; font-size: 18px;">Measurement Results</h4>\n                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Line Measurement:</span>\n                                            <span id="line-result" style="color: #007bff; font-weight: 600;">0 m</span>\n                                        </div>\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Area Measurement:</span>\n                                            <span id="area-result" style="color: #28a745; font-weight: 600;">0 mÂ²</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            \x3c!-- Google Maps Container (Hidden by default) --\x3e\n                            <div id="google-maps-container" class="map-placeholder" style="display: none;">\n                                <div id="google-maps-measurement" style="height: 400px; width: 100%; position: relative;">\n                                    <p style="text-align: center; padding: 2rem; color: #6b6b6b;">Google Maps measurement tool will load here</p>\n                                </div>\n                                <div id="google-maps-results" class="measurement-results" style="display: none; margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">\n                                    <h4 style="margin: 0 0 0.5rem 0; color: #2c2c2c; font-size: 18px;">Measurement Results</h4>\n                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Area:</span>\n                                            <span id="google-area-result" style="color: #28a745; font-weight: 600;">0 sq ft</span>\n                                        </div>\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Perimeter:</span>\n                                            <span id="google-perimeter-result" style="color: #007bff; font-weight: 600;">0 ft</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Hidden fields for measurement data --\x3e\n                        <input type="hidden" id="areaCoordinates" name="areaCoordinates">\n                        <input type="hidden" id="calculatedSquareFootage" name="calculatedSquareFootage">\n                        <input type="hidden" id="measurementTool" name="measurementTool">\n                        <input type="hidden" id="measurementTimestamp" name="measurementTimestamp">\n                    </div>\n\n                    \x3c!-- Form Actions --\x3e\n                    <div class="form-actions">\n                        <button type="button" class="btn btn-outline" id="reset-form">\n                            Reset Form\n                        </button>\n                        <button type="submit" class="btn btn-primary" id="submit-estimate" disabled>\n                            <span class="btn-text">Request Estimate</span>\n                            <span class="btn-loading" style="display: none;">\n                                <span class="spinner"></span> Processing...\n                            </span>\n                        </button>\n                        <button type="button" class="btn btn-secondary" id="get-quote" disabled style="margin-left: 1rem;">\n                            <span class="btn-text">Get Quick Quote</span>\n                            <span class="btn-loading" style="display: none;">\n                                <span class="spinner"></span> Calculating...\n                            </span>\n                        </button>\n                    </div>\n                    \n                    \x3c!-- Pricing Display Section --\x3e\n                    <div class="pricing-display" id="pricing-display" style="display: none;">\n                        <div class="pricing-header">\n                            <h3>Estimated Pricing</h3>\n                            <p class="pricing-disclaimer">*This is an estimate. Final pricing may vary based on site conditions and additional requirements.</p>\n                        </div>\n                        <div class="pricing-details" id="pricing-details">\n                            \x3c!-- Pricing information will be populated here --\x3e\n                        </div>\n                    </div>\n\n                    \x3c!-- Form Validation Summary --\x3e\n                    <div class="validation-summary" id="validation-summary" style="display: none;">\n                        <h4>Please correct the following errors:</h4>\n                        <ul id="validation-errors"></ul>\n                    </div>\n                </form>\n            </div>\n        `}attachEventListeners(){const e=document.getElementById("estimate-form");document.getElementById("submit-estimate");const t=document.getElementById("get-quote"),n=document.getElementById("reset-form"),r=document.getElementById("serviceType"),a=document.getElementById("arcgis-toggle"),i=document.getElementById("google-maps-toggle");e.addEventListener("submit",e=>this.handleSubmit(e)),t&&t.addEventListener("click",()=>this.handleGetQuote()),n.addEventListener("click",()=>this.resetForm()),r.addEventListener("change",e=>this.handleServiceTypeChange(e)),e.addEventListener("input",e=>this.handleFieldValidation(e)),e.addEventListener("blur",e=>this.handleFieldValidation(e),!0),a&&a.addEventListener("click",()=>this.toggleMeasurementTool("arcgis-3d")),i&&i.addEventListener("click",()=>this.toggleMeasurementTool("google-maps"));document.getElementById("phone").addEventListener("input",e=>this.formatPhoneNumber(e)),setTimeout(()=>this.initializeMeasurementTools(),100)}handleSubmit(e){if(e.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0,this.updateSubmitButtonState(!0);const t=new FormData(e.target),n=Object.fromEntries(t.entries());this.measurementData&&(n.areaData=this.measurementData);const r=this.validationService.validateForm(n);if(!r.isValid)return this.displayValidationErrors(r),this.isSubmitting=!1,void this.updateSubmitButtonState(!1);this.submitForm(n)}async submitForm(e){var t;try{const n=this.estimateService.calculateEstimate((null==(t=e.areaData)?void 0:t.areaInSquareFeet)||0,e.serviceType,{premium:!1,complexity:"moderate",accessibility:"easy",season:"regular",urgency:"standard"}),r={...e,estimate:n,submittedAt:(new Date).toISOString()},a=await fetch("/api/estimates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error("Failed to submit estimate request");const i=await a.json();this.handleSubmitSuccess(i)}catch(n){this.handleSubmitError(n)}finally{this.isSubmitting=!1,this.updateSubmitButtonState(!1)}}handleSubmitSuccess(e){var t,n;this.container.innerHTML=`\n            <div class="success-message">\n                <div class="success-icon">âœ…</div>\n                <h2>Estimate Request Submitted Successfully!</h2>\n                <p>Thank you for your interest in our paving services. We've received your request and will contact you within 2 hours.</p>\n                <div class="success-details">\n                    <p><strong>Reference #:</strong> ${e.referenceNumber}</p>\n                    <p><strong>Estimated Project Cost:</strong> $${(null==(n=null==(t=e.estimate)?void 0:t.totalCost)?void 0:n.toLocaleString())||"TBD"}</p>\n                </div>\n                <button type="button" class="btn btn-primary" onclick="window.location.reload()">\n                    Submit Another Request\n                </button>\n            </div>\n        `,a(async()=>{const{handleFormSubmission:e}=await Promise.resolve().then(()=>C);return{handleFormSubmission:e}},void 0).then(({handleFormSubmission:e})=>{e()})}handleSubmitError(e){const t=document.createElement("div");t.className="error-alert",t.innerHTML=`\n            <strong>Error:</strong> ${e.message}\n            <button type="button" class="error-close" onclick="this.parentElement.remove()">Ã—</button>\n        `,this.container.insertBefore(t,this.container.firstChild)}handleFieldValidation(e){const t=e.target,n=t.name,r=t.value;if(!n)return;const a=document.getElementById(`${n}-error`);if(a&&(a.textContent="",t.classList.remove("error")),!t.hasAttribute("required")||r.trim()){switch(n){case"email":r&&!this.validationService.isValidEmail(r)&&this.showFieldError(t,"Please enter a valid email address");break;case"phone":r&&!this.validationService.isValidPhone(r)&&this.showFieldError(t,"Please enter a valid phone number");break;case"zipCode":r&&!/^\d{5}(-\d{4})?$/.test(r)&&this.showFieldError(t,"Please enter a valid ZIP code")}this.updateSubmitButtonState()}else"blur"===e.type&&this.showFieldError(t,"This field is required")}showFieldError(e,t){const n=document.getElementById(`${e.name}-error`);n&&(n.textContent=t,e.classList.add("error"))}displayValidationErrors(e){const t=document.getElementById("validation-summary"),n=document.getElementById("validation-errors");e.errors.length>0&&(n.innerHTML=e.errors.map(e=>`<li>${e}</li>`).join(""),t.style.display="block",t.scrollIntoView({behavior:"smooth"}))}handleServiceTypeChange(e){const t=e.target.value,n=document.getElementById("serviceType-help");t&&this.validationService.getHelpText("serviceTypes",t)?(n.textContent=this.validationService.getHelpText("serviceTypes",t),n.style.display="block"):n.style.display="none"}formatPhoneNumber(e){let t=e.target.value.replace(/\D/g,"");t.length>=6?t=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):t.length>=3?t=t.replace(/(\d{3})(\d{3})/,"($1) $2"):t.length>0&&(t=t.replace(/(\d{3})/,"($1")),e.target.value=t}launchMeasurementTool(e){window.open(`/assets/measurement-tools/${e}.html`,"_blank")}loadMeasurementData(){b()&&(this.measurementData=w(),this.updateMeasurementStatus())}updateMeasurementStatus(){const e=document.getElementById("measurement-status");if(this.measurementData&&(this.measurementData.googleMaps||this.measurementData.arcgis)){const t=this.measurementData.googleMaps||this.measurementData.arcgis,n=t.areaInSquareFeet||t.area||0;e.innerHTML=`\n                <div class="measurement-success">\n                    <strong>âœ… Area Measured: ${n.toLocaleString()} sq ft</strong>\n                    <p>Using ${"google-maps"===this.measurementData.activeTool?"Google Maps":"ArcGIS 3D"} tool</p>\n                </div>\n            `,document.getElementById("calculatedSquareFootage").value=n,document.getElementById("measurementTool").value=this.measurementData.activeTool,document.getElementById("measurementTimestamp").value=(new Date).toISOString()}}updateSubmitButtonState(e=!1){const t=document.getElementById("submit-estimate"),n=document.getElementById("get-quote"),r=t.querySelector(".btn-text"),a=t.querySelector(".btn-loading"),i=n.querySelector(".btn-text"),o=n.querySelector(".btn-loading");if(e)return r.style.display="none",a.style.display="inline-flex",void(t.disabled=!0);r.style.display="inline",a.style.display="none";const s=this.checkRequiredFields(),l=this.measurementData&&(this.measurementData.googleMaps||this.measurementData.arcgis);t.disabled=!s||!l,n.disabled=!l,l||(i.style.display="inline",o.style.display="none")}checkRequiredFields(){return["firstName","lastName","email","phone","serviceType","streetAddress","city","state","zipCode"].every(e=>{const t=document.getElementById(e);return t&&t.value.trim()})}resetForm(){confirm("Are you sure you want to reset the form? All entered data will be lost.")&&(document.getElementById("estimate-form").reset(),this.measurementData=null,this.updateMeasurementStatus(),this.updateSubmitButtonState(),document.querySelectorAll(".error-message").forEach(e=>e.textContent=""),document.querySelectorAll(".form-input, .form-select, .form-textarea").forEach(e=>{e.classList.remove("error")}),a(async()=>{const{handleFormReset:e}=await Promise.resolve().then(()=>C);return{handleFormReset:e}},void 0).then(({handleFormReset:e})=>{e()}))}initializeMeasurementTools(){this.loadArcGISMeasurementTool()}toggleMeasurementTool(e){const t=document.getElementById("arcgis-toggle"),n=document.getElementById("google-maps-toggle"),r=document.getElementById("arcgis-container"),a=document.getElementById("google-maps-container");document.querySelectorAll(".toggle-btn").forEach(e=>e.classList.remove("active")),"arcgis-3d"===e?(t.classList.add("active"),r.style.display="block",a.style.display="none",this.arcgisLoaded||this.loadArcGISMeasurementTool()):"google-maps"===e&&(n.classList.add("active"),r.style.display="none",a.style.display="block",this.googleMapsLoaded||this.loadGoogleMapsMeasurementTool()),this.activeMeasurementTool=e}async loadArcGISMeasurementTool(){if(!this.arcgisLoaded)try{this.arcgisLoaded=!0;const e=document.createElement("link");e.rel="stylesheet",e.href="https://js.arcgis.com/4.33/esri/themes/light/main.css",document.head.appendChild(e);const t=document.createElement("script");t.type="module",t.src="https://js.arcgis.com/calcite-components/3.2.1/calcite.esm.js",document.head.appendChild(t);const n=document.createElement("script");n.src="https://js.arcgis.com/4.33/",n.onload=()=>{const e=document.createElement("script");e.type="module",e.src="https://js.arcgis.com/4.33/map-components/",e.onload=()=>{this.initializeArcGISScene()},document.head.appendChild(e)},document.head.appendChild(n)}catch(e){this.showArcGISError(e)}}initializeArcGISScene(){const e=document.getElementById("arcgis-scene-view");document.getElementById("arcgis-placeholder");const t=document.getElementById("arcgis-results"),n=document.getElementById("line-result"),r=document.getElementById("area-result");e.innerHTML='\n            <arcgis-scene item-id="5ce0de673d3b41a3bf3a217942211c4b" style="height: 100%; width: 100%;">\n                <arcgis-zoom position="top-left"></arcgis-zoom>\n                <arcgis-navigation-toggle position="top-left"></arcgis-navigation-toggle>\n                <arcgis-compass position="top-left"></arcgis-compass>\n                <arcgis-expand id="expand-line" position="top-right" group="top-right">\n                    <arcgis-direct-line-measurement-3d></arcgis-direct-line-measurement-3d>\n                </arcgis-expand>\n                <arcgis-expand id="expand-area" position="top-right" group="top-right">\n                    <arcgis-area-measurement-3d></arcgis-area-measurement-3d>\n                </arcgis-expand>\n            </arcgis-scene>\n        ',setTimeout(()=>{const a=e.querySelector("arcgis-scene"),i=e.querySelector("arcgis-direct-line-measurement-3d"),o=e.querySelector("arcgis-area-measurement-3d"),s=e.querySelector("#expand-line"),l=e.querySelector("#expand-area");a&&i&&o&&a.viewOnReady().then(()=>{this.setupArcGISMeasurementObservers(s,l,i,o,n,r,t)})},1e3)}setupArcGISMeasurementObservers(e,t,n,r,a,i,o){new MutationObserver(e=>{e.forEach(e=>{e.target.expanded?(n.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",i.textContent="0 mÂ²",t.expanded||(o.style.display="none"))})}).observe(e,{attributeFilter:["expanded"]});new MutationObserver(t=>{t.forEach(t=>{t.target.expanded?(r.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",i.textContent="0 mÂ²",e.expanded||(o.style.display="none"))})}).observe(t,{attributeFilter:["expanded"]}),n.addEventListener("measure-complete",e=>{e.detail&&e.detail.distance&&(a.textContent=`${e.detail.distance.toFixed(2)} ${e.detail.unit||"m"}`,this.updateProjectSizeFromMeasurement(e.detail,"distance"))}),r.addEventListener("measure-complete",e=>{e.detail&&e.detail.area&&(i.textContent=`${e.detail.area.toFixed(2)} ${e.detail.unit||"mÂ²"}`,this.updateProjectSizeFromMeasurement(e.detail,"area"))})}updateProjectSizeFromMeasurement(e,t){if("area"===t&&e.area){const t=Math.round(10.764*e.area);document.getElementById("calculatedSquareFootage").value=t,document.getElementById("measurementTool").value="arcgis-3d",document.getElementById("measurementTimestamp").value=(new Date).toISOString(),this.measurementData={arcgis:{area:t,areaInSquareFeet:t,coordinates:[],timestamp:(new Date).toISOString()},activeTool:"arcgis-3d"},this.updateMeasurementStatus(),this.updateSubmitButtonState()}}async loadGoogleMapsMeasurementTool(){document.getElementById("google-maps-measurement").innerHTML='<p style="text-align: center; padding: 2rem; color: #28a745;">Google Maps measurement tool coming soon!</p>',this.googleMapsLoaded=!0}showArcGISError(e){const t=document.getElementById("arcgis-placeholder");t&&(t.innerHTML='\n                <div style="text-align: center; padding: 2rem; color: #dc3545;">\n                    <div style="font-size: 48px; margin-bottom: 1rem;">âš ï¸</div>\n                    <h3 style="margin-bottom: 1rem; color: #dc3545;">Failed to Load ArcGIS</h3>\n                    <p style="margin-bottom: 1.5rem; color: #6c757d;">Unable to load the 3D measurement tool. This might be due to a network issue or service unavailability.</p>\n                    <button onclick="window.location.reload();" \n                            style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Retry</button>\n                    <p style="margin-top: 1rem; font-size: 0.9rem; color: #6c757d;">Please try refreshing the page or contact us directly for assistance.</p>\n                </div>\n            ')}async handleGetQuote(){if(!this.measurementData||!this.measurementData.googleMaps&&!this.measurementData.arcgis)return void alert("Please measure the project area first using the map tool above.");const e=document.getElementById("get-quote"),t=e.querySelector(".btn-text"),n=e.querySelector(".btn-loading");t.style.display="none",n.style.display="inline-flex",e.disabled=!0;try{const e=document.getElementById("serviceType").value||"residential",t=this.calculatePricing(e);this.displayPricing(t)}catch(r){alert("Unable to calculate pricing. Please try again.")}finally{t.style.display="inline",n.style.display="none",e.disabled=!1}}calculatePricing(e="residential"){if(!this.measurementData)throw new Error("No measurement data available");const t=this.measurementData.googleMaps||this.measurementData.arcgis,n=t.areaInSquareFeet||t.area||0,r={residential:{asphalt:{min:3.5,max:7,avg:5.25},concrete:{min:6,max:12,avg:9},maintenance:{min:1.5,max:3,avg:2.25}},commercial:{asphalt:{min:4,max:8.5,avg:6.25},concrete:{min:7,max:15,avg:11},maintenance:{min:2,max:4,avg:3}},maintenance:{asphalt:{min:1.5,max:3.5,avg:2.5},concrete:{min:2,max:4.5,avg:3.25},maintenance:{min:1,max:2.5,avg:1.75}},custom:{asphalt:{min:4.5,max:9,avg:6.75},concrete:{min:8,max:16,avg:12},maintenance:{min:2.5,max:5,avg:3.75}},emergency:{asphalt:{min:5,max:10,avg:7.5},concrete:{min:9,max:18,avg:13.5},maintenance:{min:3,max:6,avg:4.5}}},a=r[e]||r.residential,i={asphalt:{min:Math.round(n*a.asphalt.min),max:Math.round(n*a.asphalt.max),avg:Math.round(n*a.asphalt.avg)},concrete:{min:Math.round(n*a.concrete.min),max:Math.round(n*a.concrete.max),avg:Math.round(n*a.concrete.avg)},maintenance:{min:Math.round(n*a.maintenance.min),max:Math.round(n*a.maintenance.max),avg:Math.round(n*a.maintenance.avg)}},o=this.getSizeMultiplier(n),s=this.getSeasonMultiplier();return Object.keys(i).forEach(e=>{i[e].min=Math.round(i[e].min*o*s),i[e].max=Math.round(i[e].max*o*s),i[e].avg=Math.round(i[e].avg*o*s)}),{squareFootage:n,serviceType:e,calculations:i,factors:{sizeMultiplier:o,seasonMultiplier:s},timestamp:(new Date).toISOString()}}getSizeMultiplier(e){return e<500?1.2:e<1e3?1.1:e<2e3?1:e<5e3?.95:.9}getSeasonMultiplier(){const e=(new Date).getMonth();return 11===e||0===e||1===e?1.15:e>=2&&e<=4||e>=8&&e<=9?1:.95}displayPricing(e){const t=document.getElementById("pricing-display"),n=document.getElementById("pricing-details");if(!t||!n)return;const{squareFootage:r,serviceType:a,calculations:i,factors:o}=e;n.innerHTML=`\n            <div class="pricing-overview">\n                <div class="pricing-stat">\n                    <span class="stat-label">Project Area:</span>\n                    <span class="stat-value">${r.toLocaleString()} sq ft</span>\n                </div>\n                <div class="pricing-stat">\n                    <span class="stat-label">Service Type:</span>\n                    <span class="stat-value">${this.formatServiceType(a)}</span>\n                </div>\n            </div>\n            \n            <div class="estimate-disclaimer" style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 1rem; margin: 1.5rem 0; color: #856404;">\n                <div style="display: flex; align-items: flex-start; gap: 0.75rem;">\n                    <span style="font-size: 1.25rem; flex-shrink: 0;">âš ï¸</span>\n                    <div>\n                        <strong style="display: block; margin-bottom: 0.5rem; color: #856404;">Important Pricing Disclaimer</strong>\n                        <p style="margin: 0; line-height: 1.5; color: #856404;">These estimates are preliminary calculations based on basic measurements and standard pricing. The final project price may vary anywhere from <strong>25% to 50% higher or lower</strong> than the predicted cost depending on site conditions, material choices, accessibility, permits, and specific project requirements.</p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="material-pricing">\n                <h4>Pricing by Material</h4>\n                \n                <div class="material-option">\n                    <div class="material-header">\n                        <h5>ðŸ›£ï¸ Asphalt Paving</h5>\n                        <p>Durable, cost-effective option for driveways and parking lots</p>\n                    </div>\n                    <div class="price-range">\n                        <span class="price-min">$${i.asphalt.min.toLocaleString()}</span>\n                        <span class="price-separator">-</span>\n                        <span class="price-max">$${i.asphalt.max.toLocaleString()}</span>\n                        <span class="price-avg">Avg: $${i.asphalt.avg.toLocaleString()}</span>\n                    </div>\n                </div>\n                \n                <div class="material-option">\n                    <div class="material-header">\n                        <h5>ðŸ—ï¸ Concrete Paving</h5>\n                        <p>Long-lasting, premium option with excellent durability</p>\n                    </div>\n                    <div class="price-range">\n                        <span class="price-min">$${i.concrete.min.toLocaleString()}</span>\n                        <span class="price-separator">-</span>\n                        <span class="price-max">$${i.concrete.max.toLocaleString()}</span>\n                        <span class="price-avg">Avg: $${i.concrete.avg.toLocaleString()}</span>\n                    </div>\n                </div>\n                \n                <div class="material-option">\n                    <div class="material-header">\n                        <h5>ðŸ”§ Maintenance Services</h5>\n                        <p>Repairs, sealing, and restoration services</p>\n                    </div>\n                    <div class="price-range">\n                        <span class="price-min">$${i.maintenance.min.toLocaleString()}</span>\n                        <span class="price-separator">-</span>\n                        <span class="price-max">$${i.maintenance.max.toLocaleString()}</span>\n                        <span class="price-avg">Avg: $${i.maintenance.avg.toLocaleString()}</span>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="pricing-factors">\n                <h4>Pricing Factors Applied</h4>\n                <ul>\n                    <li>Project Size: ${this.formatMultiplier(o.sizeMultiplier)} (${this.getSizeDescription(r)})</li>\n                    <li>Seasonal Rate: ${this.formatMultiplier(o.seasonMultiplier)} (${this.getSeasonDescription()})</li>\n                    <li>Service Type: ${this.formatServiceType(a)}</li>\n                </ul>\n            </div>\n            \n            <div class="pricing-actions">\n                <button type="button" class="btn btn-primary" onclick="document.getElementById('submit-estimate').scrollIntoView({behavior: 'smooth'})">\n                    Request Detailed Estimate\n                </button>\n                <button type="button" class="btn btn-outline" onclick="window.print()">\n                    Print Quote\n                </button>\n            </div>\n        `,t.style.display="block",t.scrollIntoView({behavior:"smooth"})}formatServiceType(e){return{residential:"Residential Paving",commercial:"Commercial Paving",maintenance:"Maintenance Services",custom:"Custom Projects",emergency:"Emergency Repairs"}[e]||"Residential Paving"}formatMultiplier(e){const t=Math.round(100*(e-1));return t>0?`+${t}%`:t<0?`${t}%`:"Standard"}getSizeDescription(e){return e<500?"Small project":e<1e3?"Medium project":e<2e3?"Large project":e<5e3?"Very large project":"Commercial scale"}getSeasonDescription(){const e=(new Date).getMonth();return 11===e||0===e||1===e?"Winter rates":e>=2&&e<=4||e>=8&&e<=9?"Peak season":"Summer rates"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("estimate-form-container");if(e)try{new vr("estimate-form-container")}catch(t){e.innerHTML=`\n                        <div style="text-align: center; padding: 3rem; color: #e74c3c; background: #fdf2f2; border: 2px solid #e74c3c; border-radius: 8px;">\n                            <h3>Unable to Load Form</h3>\n                            <p>Please refresh the page to try again.</p>\n                            <p style="font-size: 0.9rem; margin-top: 1rem; color: #666;">Error: ${t.message}</p>\n                        </div>\n                    `}});
