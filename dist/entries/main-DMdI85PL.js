/* empty css                      */import{r as e,g as t,a as n}from"../chunks/chunk-E0eRZBtV.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function r(e={}){var t;if("undefined"==typeof window||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});const n=function(e){return e.scriptSrc?e.scriptSrc:e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}(e);if(document.head.querySelector(`script[src*="${n}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));const r=document.createElement("script");return r.src=n,r.defer=!0,r.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),r.dataset.sdkv="1.2.0",e.sampleRate&&(r.dataset.sampleRate=e.sampleRate.toString()),e.route&&(r.dataset.route=e.route),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${n}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:e=>{r.dataset.route=null!=e?e:void 0}}}function a(){return"undefined"!=typeof window}function s(){try{}catch(e){}return"production"}function o(){return"development"===((a()?window.vam:s())||"production")}function i(e={debug:!0}){var t;if(!a())return;!function(e="auto"){window.vam="auto"!==e?e:s()}(e.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=function(e){return e.scriptSrc?e.scriptSrc:o()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),r.dataset.sdkv="1.5.0",e.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{const e=o()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${e}`)},o()&&!1===e.debug&&(r.dataset.debug="false"),document.head.appendChild(r)}const l={apiKey:"",libraries:["drawing","geometry","places"]},c={zoom:15,center:{lat:39.9612,lng:-82.9988},mapTypeId:"hybrid",mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},fullscreenControl:!0},d={drawingMode:google.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE,google.maps.drawing.OverlayType.CIRCLE]},polygonOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1},rectangleOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1},circleOptions:{fillColor:"#FFD700",fillOpacity:.3,strokeWeight:2,strokeColor:"#FFD700",clickable:!1,editable:!0,zIndex:1}},u={GOOGLE_MAPS_DATA:"neff_paving_google_maps_measurements",ARCGIS_DATA:"neff_paving_arcgis_measurements",ACTIVE_TOOL:"neff_paving_active_measurement_tool",MEASUREMENT_SESSION:"neff_paving_measurement_session"};function p(e,t){try{const n=w(e),r={data:t,timestamp:(new Date).toISOString(),toolType:e};sessionStorage.setItem(n,JSON.stringify(r)),sessionStorage.setItem(u.ACTIVE_TOOL,e),x(),console.log(`Measurement data stored for ${e}:`,t)}catch(n){console.error("Failed to store measurement data:",n)}}function m(e){try{const t=w(e),n=sessionStorage.getItem(t);if(!n)return null;const r=JSON.parse(n),a=Date.now()-new Date(r.timestamp).getTime();return a>864e5?(g(e),null):r.data}catch(t){return console.error("Failed to retrieve measurement data:",t),null}}function g(e){try{const t=w(e);sessionStorage.removeItem(t),x(),console.log(`Measurement data cleared for ${e}`)}catch(t){console.error("Failed to clear measurement data:",t)}}function h(){try{Object.values(u).forEach(e=>{sessionStorage.removeItem(e)}),console.log("All measurement data cleared")}catch(e){console.error("Failed to clear all measurement data:",e)}}function f(){return sessionStorage.getItem(u.ACTIVE_TOOL)||"google-maps"}function v(){return Object.values(u).some(e=>e!==u.MEASUREMENT_SESSION&&null!==sessionStorage.getItem(e))}function y(){return{googleMaps:m("google-maps"),arcgis:m("arcgis"),activeTool:f()}}function b(){h()}function w(e){switch(e){case"google-maps":return u.GOOGLE_MAPS_DATA;case"arcgis":return u.ARCGIS_DATA;default:throw new Error(`Unknown tool type: ${e}`)}}function x(){try{const e={lastUpdated:(new Date).toISOString(),tools:[]};sessionStorage.getItem(u.GOOGLE_MAPS_DATA)&&e.tools.push("google-maps"),sessionStorage.getItem(u.ARCGIS_DATA)&&e.tools.push("arcgis"),sessionStorage.setItem(u.MEASUREMENT_SESSION,JSON.stringify(e))}catch(e){console.error("Failed to update session metadata:",e)}}function S(){try{const e=sessionStorage.getItem(u.MEASUREMENT_SESSION);if(e){const t=JSON.parse(e),n=Date.now()-new Date(t.lastUpdated).getTime();n>864e5&&h()}}catch(e){console.error("Failed to initialize storage:",e)}}const E=Object.freeze(Object.defineProperty({__proto__:null,clearAllMeasurementData:h,clearMeasurementData:g,getActiveTool:f,getAllMeasurementData:y,getMeasurementData:m,handleFormReset:function(){h()},handleFormSubmission:b,hasMeasurementData:v,initializeStorage:S,storeMeasurementData:p},Symbol.toStringTag,{value:"Module"}));class C{constructor(e,t={}){if(this.containerId=e,this.container=document.getElementById(e),this.options={showCalculator:!0,showAddressSearch:!0,showAreaInfo:!0,onAreaCalculated:()=>{},...t},this.map=null,this.drawingManager=null,this.currentShape=null,this.currentArea=null,this.geocoder=null,this.searchBox=null,!this.container)throw new Error(`Container with ID "${e}" not found`);this.init()}async init(){try{this.render(),await this.loadGoogleMaps(),this.initMap(),this.setupEventListeners()}catch(e){console.error("Error initializing area finder:",e),this.showError("Failed to initialize area finder")}}render(){this.container.innerHTML=`\n            <div class="area-finder-container">\n                ${this.options.showAddressSearch?'\n                <div class="area-finder-controls">\n                    <div class="search-section">\n                        <label for="address-search">Search Location</label>\n                        <div class="search-input-group">\n                            <input \n                                type="text" \n                                id="address-search" \n                                placeholder="Enter address or coordinates..."\n                                class="form-control"\n                            >\n                            <button type="button" id="search-btn" class="btn btn-primary">Search</button>\n                        </div>\n                    </div>\n                    \n                    <div class="drawing-controls">\n                        <button type="button" id="clear-shapes" class="btn btn-outline-danger" disabled>Clear All</button>\n                        <button type="button" id="calculate-area" class="btn btn-outline-success" disabled>Calculate Area</button>\n                    </div>\n                </div>\n                ':""}\n                \n                <div class="map-section">\n                    <div id="${this.containerId}-map" class="area-finder-map"></div>\n                    \n                    <div class="map-instructions">\n                        <h6>Instructions:</h6>\n                        <ul>\n                            <li>Click on the map to start drawing</li>\n                            <li>Continue clicking to add points</li>\n                            <li>Click the first point again to close the shape</li>\n                            <li>Use the drawing tools above the map to switch between shapes</li>\n                        </ul>\n                    </div>\n                </div>\n                \n                ${this.options.showAreaInfo?'\n                <div class="area-info-section">\n                    <div id="area-results" class="area-results" style="display: none;">\n                        <h6>Area Calculation Results</h6>\n                        <div class="results-grid">\n                            <div class="result-item">\n                                <span class="result-label">Area:</span>\n                                <span class="result-value" id="area-sqft">0 sq ft</span>\n                            </div>\n                            <div class="result-item">\n                                <span class="result-label">Perimeter:</span>\n                                <span class="result-value" id="perimeter-ft">0 ft</span>\n                            </div>\n                            <div class="result-item">\n                                <span class="result-label">Acres:</span>\n                                <span class="result-value" id="area-acres">0 acres</span>\n                            </div>\n                            <div class="result-item">\n                                <span class="result-label">Square Meters:</span>\n                                <span class="result-value" id="area-sqm">0 m¬≤</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                ':""}\n            </div>\n        `,this.addStyles()}addStyles(){if(document.getElementById("area-finder-styles"))return;const e=document.createElement("style");e.id="area-finder-styles",e.textContent="\n            .area-finder-container {\n                background: #ffffff;\n                border-radius: 12px;\n                overflow: hidden;\n                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n            }\n\n            .area-finder-controls {\n                padding: 20px;\n                background: #f8f9fa;\n                border-bottom: 1px solid #e9ecef;\n                display: flex;\n                flex-wrap: wrap;\n                gap: 20px;\n                align-items: end;\n            }\n\n            .search-section {\n                flex: 1;\n                min-width: 300px;\n            }\n\n            .search-section label {\n                display: block;\n                margin-bottom: 6px;\n                font-weight: 500;\n                color: #374151;\n            }\n\n            .search-input-group {\n                display: flex;\n                gap: 8px;\n            }\n\n            .search-input-group input {\n                flex: 1;\n                padding: 10px 12px;\n                border: 1px solid #d1d5db;\n                border-radius: 8px;\n                font-size: 14px;\n            }\n\n            .search-input-group input:focus {\n                outline: none;\n                border-color: #2563eb;\n                box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n            }\n\n            .drawing-controls {\n                display: flex;\n                gap: 10px;\n            }\n\n            .btn {\n                padding: 8px 16px;\n                border-radius: 6px;\n                font-size: 14px;\n                font-weight: 500;\n                border: 1px solid transparent;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .btn-primary {\n                background: #2563eb;\n                color: white;\n                border-color: #2563eb;\n            }\n\n            .btn-primary:hover {\n                background: #1d4ed8;\n            }\n\n            .btn-outline-danger {\n                color: #dc2626;\n                border-color: #dc2626;\n                background: transparent;\n            }\n\n            .btn-outline-danger:hover {\n                background: #dc2626;\n                color: white;\n            }\n\n            .btn-outline-success {\n                color: #16a34a;\n                border-color: #16a34a;\n                background: transparent;\n            }\n\n            .btn-outline-success:hover {\n                background: #16a34a;\n                color: white;\n            }\n\n            .btn:disabled {\n                opacity: 0.5;\n                cursor: not-allowed;\n            }\n\n            .map-section {\n                position: relative;\n            }\n\n            .area-finder-map {\n                height: 500px;\n                width: 100%;\n            }\n\n            .map-instructions {\n                position: absolute;\n                top: 10px;\n                left: 10px;\n                background: rgba(255, 255, 255, 0.95);\n                padding: 15px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n                max-width: 300px;\n                font-size: 13px;\n                z-index: 10;\n            }\n\n            .map-instructions h6 {\n                margin: 0 0 10px 0;\n                color: #1f2937;\n                font-weight: 600;\n            }\n\n            .map-instructions ul {\n                margin: 0;\n                padding-left: 16px;\n                color: #6b7280;\n            }\n\n            .map-instructions li {\n                margin-bottom: 4px;\n            }\n\n            .area-info-section {\n                padding: 20px;\n                background: #f8f9fa;\n                border-top: 1px solid #e9ecef;\n            }\n\n            .area-results {\n                background: white;\n                border-radius: 8px;\n                padding: 20px;\n                border: 1px solid #e5e7eb;\n            }\n\n            .area-results h6 {\n                margin: 0 0 15px 0;\n                color: #1f2937;\n                font-weight: 600;\n            }\n\n            .results-grid {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 15px;\n            }\n\n            .result-item {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 12px;\n                background: #f9fafb;\n                border-radius: 6px;\n                border: 1px solid #f3f4f6;\n            }\n\n            .result-label {\n                font-weight: 500;\n                color: #6b7280;\n            }\n\n            .result-value {\n                font-weight: 600;\n                color: #1f2937;\n                font-family: 'Courier New', monospace;\n            }\n\n            .error-message {\n                background: #fef2f2;\n                color: #dc2626;\n                padding: 12px 16px;\n                border-radius: 8px;\n                border: 1px solid #fecaca;\n                margin: 10px;\n            }\n\n            @media (max-width: 768px) {\n                .area-finder-controls {\n                    flex-direction: column;\n                    align-items: stretch;\n                }\n\n                .search-input-group {\n                    flex-direction: column;\n                }\n\n                .drawing-controls {\n                    justify-content: center;\n                }\n\n                .results-grid {\n                    grid-template-columns: 1fr;\n                }\n\n                .map-instructions {\n                    position: static;\n                    margin: 10px;\n                    max-width: none;\n                }\n            }\n        ",document.head.appendChild(e)}async loadGoogleMaps(){return new Promise((e,t)=>{if("undefined"!=typeof google&&google.maps)return void e();window.initAreaFinderMap=()=>{delete window.initAreaFinderMap,e()};const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${l.apiKey}&libraries=${l.libraries.join(",")}&callback=initAreaFinderMap`,n.onerror=t,document.head.appendChild(n)})}initMap(){const e=document.getElementById(`${this.containerId}-map`);this.map=new google.maps.Map(e,{...c,center:{lat:39.9612,lng:-82.9988}}),this.geocoder=new google.maps.Geocoder,this.initDrawingManager(),this.initSearchBox(),this.restorePreviousData()}initDrawingManager(){this.drawingManager=new google.maps.drawing.DrawingManager({...d,map:this.map}),google.maps.event.addListener(this.drawingManager,"overlaycomplete",e=>{this.handleShapeComplete(e)})}initSearchBox(){const e=document.getElementById("address-search");e&&(this.searchBox=new google.maps.places.SearchBox(e),this.map.addListener("bounds_changed",()=>{this.searchBox.setBounds(this.map.getBounds())}),this.searchBox.addListener("places_changed",()=>{const e=this.searchBox.getPlaces();if(0===e.length)return;const t=e[0];t.geometry&&t.geometry.location&&(this.map.setCenter(t.geometry.location),this.map.setZoom(18))}))}setupEventListeners(){const e=document.getElementById("search-btn"),t=document.getElementById("clear-shapes"),n=document.getElementById("calculate-area");e&&e.addEventListener("click",()=>this.searchLocation()),t&&t.addEventListener("click",()=>this.clearShapes()),n&&n.addEventListener("click",()=>this.calculateArea());const r=document.getElementById("address-search");r&&r.addEventListener("keypress",e=>{"Enter"===e.key&&this.searchLocation()})}handleShapeComplete(e){this.currentShape&&this.currentShape.setMap(null),this.currentShape=e.overlay,this.drawingManager.setDrawingMode(null),this.enableButton("clear-shapes"),this.enableButton("calculate-area"),!1!==this.options.autoCalculate&&this.calculateArea()}async calculateArea(){if(this.currentShape)try{const e=this.getShapeCoordinates(this.currentShape),t=await fetch("/api/maps/calculate-area",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({coordinates:e})}),n=await t.json();if(!n.success)throw new Error(n.message||"Calculation failed");this.displayAreaResults(n.data),this.currentArea=n.data;p("google-maps",{...n.data,coordinates:e,timestamp:(new Date).toISOString()}),this.options.onAreaCalculated(n.data)}catch(e){console.error("Area calculation error:",e),this.showError("Failed to calculate area. Please try again.")}else this.showError("No shape to calculate. Please draw a shape first.")}getShapeCoordinates(e){let t=[];if(e.getPath){const n=e.getPath();for(let e=0;e<n.getLength();e++){const r=n.getAt(e);t.push({lat:r.lat(),lng:r.lng()})}}else if(e.getBounds){const n=e.getBounds(),r=n.getNorthEast(),a=n.getSouthWest();if(e.getRadius){const n=e.getCenter(),r=e.getRadius(),a=32;for(let e=0;e<a;e++){const s=360*e/a*(Math.PI/180),o=n.lat()+r/111320*Math.cos(s),i=n.lng()+r/(111320*Math.cos(n.lat()*Math.PI/180))*Math.sin(s);t.push({lat:o,lng:i})}}else t=[{lat:r.lat(),lng:r.lng()},{lat:r.lat(),lng:a.lng()},{lat:a.lat(),lng:a.lng()},{lat:a.lat(),lng:r.lng()}]}return t}displayAreaResults(e){const t=document.getElementById("area-results");t&&(document.getElementById("area-sqft").textContent=`${e.areaInSquareFeet.toLocaleString()} sq ft`,document.getElementById("perimeter-ft").textContent=`${(3.28084*e.perimeter).toFixed(2)} ft`,document.getElementById("area-acres").textContent=`${e.areaInAcres} acres`,document.getElementById("area-sqm").textContent=`${e.area.toLocaleString()} m¬≤`,t.style.display="block")}searchLocation(){const e=document.getElementById("address-search").value.trim();e?this.geocoder.geocode({address:e},(e,t)=>{if("OK"===t&&e[0]){const t=e[0].geometry.location;this.map.setCenter(t),this.map.setZoom(18),new google.maps.Marker({position:t,map:this.map,title:"Search Result"})}else this.showError("Location not found. Please try a different address.")}):this.showError("Please enter an address or coordinates")}clearShapes(){this.currentShape&&(this.currentShape.setMap(null),this.currentShape=null);const e=document.getElementById("area-results");e&&(e.style.display="none"),this.disableButton("clear-shapes"),this.disableButton("calculate-area"),this.currentArea=null}enableButton(e){const t=document.getElementById(e);t&&(t.disabled=!1)}disableButton(e){const t=document.getElementById(e);t&&(t.disabled=!0)}showError(e){const t=document.createElement("div");t.className="error-message",t.textContent=e,this.container.insertBefore(t,this.container.firstChild),setTimeout(()=>{t.remove()},5e3)}getAreaData(){return this.currentArea}setLocation(e,t,n=18){this.map&&(this.map.setCenter({lat:e,lng:t}),this.map.setZoom(n))}destroy(){this.currentShape&&this.currentShape.setMap(null),this.drawingManager&&this.drawingManager.setMap(null),this.container.innerHTML=""}restoreAreaData(e){if(!e)return;this.clearShapes();const t=e.coordinates.map(e=>new google.maps.LatLng(e.lat,e.lng));this.currentShape=new google.maps.Polygon({path:t,map:this.map}),this.calculateArea()}restorePreviousData(){try{const e=m("google-maps");if(e&&e.coordinates&&e.coordinates.length>0){const t=e.coordinates.map(e=>new google.maps.LatLng(e.lat,e.lng));this.currentShape=new google.maps.Polygon({path:t,map:this.map,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}),this.currentArea=e,this.displayAreaResults(e),this.enableButton("clear-shapes"),this.enableButton("calculate-area");const n=new google.maps.LatLngBounds;e.coordinates.forEach(e=>{n.extend(new google.maps.LatLng(e.lat,e.lng))}),this.map.fitBounds(n),console.log("Restored Google Maps measurement data:",e)}}catch(e){console.error("Error restoring previous Google Maps data:",e)}}}class I{constructor(){this.locations={reynoldsburg:{address:"1847 Brice Road, Reynoldsburg, OH 43068",name:"Reynoldsburg Office",mapId:"reynoldsburg-google-map"},zanesville:{address:"6575 W Pike, Zanesville, OH 43701",name:"Main Location/Zanesville Office",mapId:"zanesville-google-map"}},this.init()}init(){this.setupMapPlaceholders(),this.bindEvents()}setupMapPlaceholders(){Object.values(this.locations).forEach(e=>{const t=document.getElementById(e.mapId);t&&(t.style.cursor="pointer",t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",`View ${e.name} on Google Maps`))})}bindEvents(){Object.entries(this.locations).forEach(([e,t])=>{const n=document.getElementById(t.mapId);n&&(n.addEventListener("click",()=>this.loadMap(e)),n.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.loadMap(e))}))})}loadMap(e){const t=this.locations[e];if(!t)return;const n=document.getElementById(t.mapId);if(!n)return;const r=this.createEmbedUrl(t.address);n.innerHTML=`\n            <iframe \n                src="${r}"\n                width="100%" \n                height="400" \n                style="border:0; border-radius: 8px;" \n                allowfullscreen="" \n                loading="lazy" \n                referrerpolicy="no-referrer-when-downgrade"\n                title="${t.name} Location Map">\n            </iframe>\n        `,n.style.cursor="default",n.classList.add("map-loaded")}createEmbedUrl(e){return`https://www.google.com/maps/embed/v1/place?key=&q=${encodeURIComponent(e)}&zoom=15&maptype=roadmap`}openInGoogleMaps(e){const t=this.locations[e];if(!t)return;const n=`https://www.google.com/maps/search/${encodeURIComponent(t.address)}`;window.open(n,"_blank")}initWithoutApiKey(){Object.entries(this.locations).forEach(([e,t])=>{const n=document.getElementById(t.mapId);if(!n)return;n.innerHTML=`\n                <div class="static-map-view" onclick="window.open('https://www.google.com/maps/search/${encodeURIComponent(t.address)}', '_blank')" style="cursor: pointer;">\n                    <div class="map-static-content">\n                        <svg viewBox="0 0 24 24" fill="currentColor" style="width: 48px; height: 48px; color: #4285f4; margin-bottom: 16px;">\n                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n                        </svg>\n                        <h4 style="margin: 0 0 8px 0; color: #1a73e8;">${t.address}</h4>\n                        <p style="margin: 0; color: #5f6368;">Click to view in Google Maps</p>\n                        <div style="margin-top: 12px; padding: 8px 16px; background: #4285f4; color: white; border-radius: 4px; display: inline-block;">\n                            View on Google Maps\n                        </div>\n                    </div>\n                </div>\n            `;const r=n.querySelector(".static-map-view");r&&(Object.assign(r.style,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"300px",backgroundColor:"#f8f9fa",border:"2px dashed #dadce0",borderRadius:"8px",textAlign:"center",transition:"all 0.3s ease",padding:"20px"}),r.addEventListener("mouseenter",function(){this.style.backgroundColor="#e8f0fe",this.style.borderColor="#4285f4"}),r.addEventListener("mouseleave",function(){this.style.backgroundColor="#f8f9fa",this.style.borderColor="#dadce0"}))})}loadEmbeddedMaps(){Object.entries(this.locations).forEach(([e,t])=>{const n=document.getElementById(t.mapId);if(!n)return;const r=encodeURIComponent(t.address);n.innerHTML=`\n                <iframe \n                    src="https://www.google.com/maps?q=${r}&output=embed"\n                    width="100%" \n                    height="350" \n                    style="border:0; border-radius: 8px;" \n                    allowfullscreen="" \n                    loading="lazy" \n                    referrerpolicy="no-referrer-when-downgrade"\n                    title="${t.name} Location Map">\n                </iframe>\n            `,n.classList.add("map-loaded")})}}document.addEventListener("DOMContentLoaded",()=>{(new I).loadEmbeddedMaps()});const M="/",T="vercel",k="2025-07-30T00:57:36.171Z",A="1753837056171";"undefined"!=typeof window&&window.location.search.includes("debug=assets")&&(console.group("üõ†Ô∏è Build-time Variables Check"),console.log("BASE_URL:",M),console.log("DEPLOY_MODE:",T),console.log("IS_VERCEL:",true),console.log("IS_GITHUB_PAGES:",false),console.log("BUILD_TIMESTAMP:",k),console.log("DEPLOY_TIME:",A),console.groupEnd());const L={vercel:{useRelativePaths:!1,assetPrefix:"",cdnEnabled:!0,cacheStrategy:"aggressive"},github:{useRelativePaths:!0,assetPrefix:"/Neff-Paving",cdnEnabled:!1,cacheStrategy:"moderate"},development:{useRelativePaths:!1,assetPrefix:"",cdnEnabled:!1,cacheStrategy:"none"}};function P(){return L[T]||L.github}function D(){return M}function _(e,t={}){const n="undefined"!=typeof window&&window.location.search.includes("debug=assets");n&&console.log("üîß getAssetPath called with:",{assetPath:e,options:t,DEPLOY_MODE:T,BASE_URL:M});const r=P(),{useRelative:a=r.useRelativePaths,addCacheBusting:s=!0,forceAbsolute:o=!1}=t;let i=e;if(e.startsWith("http://")||e.startsWith("https://"))return n&&console.log("‚Ü©Ô∏è  External URL, returning as-is:",e),e;if(i="/"+(e.startsWith("/")?e.slice(1):e),n&&console.log("üîµ Vercel absolute path:",i),i=i.replace(/([^:])\/{2,}/g,"$1/"),s&&"none"!==r.cacheStrategy){const e=i.includes("?")?"&":"?";i+=`${e}v=${"aggressive"===r.cacheStrategy?A:k}`}return n&&console.log("‚úÖ Final resolved path:",i),i}function O(){if("undefined"!=typeof document&&(function(e=[]){if("undefined"==typeof document)return;[{type:"style",href:"/assets/main.css",as:"style"},{type:"script",href:"/src/main.js",as:"script"},{type:"font",href:"https://fonts.gstatic.com/s/oswald/v49/TK3IWkUHHAIjg75cFRf3bXL8LICs1_Fw.woff2",as:"font",crossorigin:!0},{type:"image",href:"/assets/images/logo.png",as:"image"},...e].forEach(e=>{if(document.querySelector(`link[href="${e.href}"]`))return;const t=document.createElement("link");t.rel="font"===e.type?"preload":"prefetch",t.href=_(e.href,{addCacheBusting:!1}),t.as=e.as,e.crossorigin&&(t.crossOrigin="anonymous"),"font"===e.type&&(t.type="font/woff2"),document.head.appendChild(t)})}(),function(){if("undefined"==typeof document)return;document.querySelectorAll(['a[href^="/"]:not([href^="//"])','img[src^="/"]:not([src^="//"])','link[href^="/"]:not([href^="//"])','script[src^="/"]:not([src^="//"])','source[src^="/"]:not([src^="//"])','video[src^="/"]:not([src^="//"])','audio[src^="/"]:not([src^="//"])','[style*="url(/"]'].join(", ")).forEach(e=>{try{const t=e.tagName.toLowerCase();let n,r;if("a"===t||"link"===t)n="href";else if(["img","script","source","video","audio"].includes(t))n="src";else if(e.hasAttribute("style")){const t=e.getAttribute("style"),n=t.match(/url\(([^)]+)\)/g);if(n){let r=t;n.forEach(e=>{const t=e.replace(/url\(['"]?([^'"]+)['"]?\)/,"$1");if(t.startsWith("/")&&!t.startsWith("//")){const n=_(t);r=r.replace(e,`url(${n})`)}}),e.setAttribute("style",r)}return}if(n&&(r=e.getAttribute(n),r&&r.startsWith("/")&&!r.startsWith("//")&&!r.startsWith(M)&&!r.startsWith("http"))){const t=_(r,{addCacheBusting:!e.hasAttribute("data-no-cache-bust")});e.setAttribute(n,t)}}catch(t){console.warn("Failed to update asset path for element:",e,t)}})}(),"IntersectionObserver"in window)){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.dataset.src&&(n.src=_(n.dataset.src),n.removeAttribute("data-src"),t.unobserve(n))}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}"undefined"!=typeof document&&"loading"===document.readyState?document.addEventListener("DOMContentLoaded",O):"undefined"!=typeof document&&O();const q="loaded",F="error",B=new Map,R=new Map;const $=new class{constructor(e={}){this.config={maxConcurrentLoads:6,retryAttempts:3,retryDelay:1e3,enableCache:!0,enablePreloading:!0,enableLazyLoading:!0,...e},this.currentLoads=0,this.loadQueue=[],this.observers=new Map,this.config.enableLazyLoading&&"IntersectionObserver"in window&&this.initLazyLoading()}async loadAsset(e,t={}){const n=_(e),r=n;if(this.config.enableCache&&B.has(r)){const e=B.get(r);if(e.state===q)return e.data;if(e.state===F&&!t.forceRetry)throw e.error}if(R.has(r))return R.get(r);const a=this._loadAssetWithRetry(n,t);R.set(r,a);try{const e=await a;return this.config.enableCache&&B.set(r,{state:q,data:e,timestamp:Date.now()}),e}catch(s){throw this.config.enableCache&&B.set(r,{state:F,error:s,timestamp:Date.now()}),s}finally{R.delete(r),this.currentLoads--,this._processQueue()}}async loadAssets(e,t={}){const{failFast:n=!1,maxConcurrent:r=this.config.maxConcurrentLoads}=t,a=e.map(e=>{const n="string"==typeof e?e:e.path,r="object"==typeof e?{...t,...e}:t;return this.loadAsset(n,r)});return n?Promise.all(a):Promise.allSettled(a)}preloadCriticalAssets(e=[]){if(!this.config.enablePreloading)return;[{path:"/assets/styles/main.css",type:"style",priority:"high"},{path:"/entries/main.js",type:"script",priority:"high"},{path:"/assets/images/logo.png",type:"image",priority:"medium"},...e].forEach(e=>{this._createPreloadLink(e)})}initLazyLoading(){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(this._loadLazyImage(e.target),t.unobserve(e.target))})},{rootMargin:"50px 0px",threshold:.01});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)}),this.observers.set("lazyImages",e)}addLazyImages(e=document){if(!this.observers.has("lazyImages"))return;const t=this.observers.get("lazyImages");e.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})}loadImage(e,t={}){return new Promise((n,r)=>{const a=new Image,s=_(e);a.onload=()=>n(a),a.onerror=()=>{if(t.fallback){const a=new Image;a.onload=()=>n(a),a.onerror=()=>r(new Error(`Failed to load image: ${e} and fallback`)),a.src=_(t.fallback)}else r(new Error(`Failed to load image: ${e}`))},t.crossOrigin&&(a.crossOrigin=t.crossOrigin),t.decoding&&(a.decoding=t.decoding),t.loading&&(a.loading=t.loading),a.src=s})}loadCSS(e,t={}){return new Promise((n,r)=>{const a=document.createElement("link"),s=_(e);a.rel="stylesheet",a.type="text/css",a.href=s,t.media&&(a.media=t.media),t.crossOrigin&&(a.crossOrigin=t.crossOrigin),a.onload=()=>n(a),a.onerror=()=>r(new Error(`Failed to load CSS: ${e}`)),document.head.appendChild(a)})}loadJS(e,t={}){return new Promise((n,r)=>{const a=document.createElement("script"),s=_(e);a.src=s,a.type=t.type||"text/javascript",void 0!==t.async&&(a.async=t.async),void 0!==t.defer&&(a.defer=t.defer),t.crossOrigin&&(a.crossOrigin=t.crossOrigin),t.integrity&&(a.integrity=t.integrity),a.onload=()=>n(a),a.onerror=()=>r(new Error(`Failed to load script: ${e}`)),document.head.appendChild(a)})}clearCache(e=null){if(e){const t=new RegExp(e);for(const[e]of B)t.test(e)&&B.delete(e)}else B.clear()}getCacheStats(){const e={size:B.size,loaded:0,error:0,totalSize:0};for(const[t,n]of B)n.state===q?e.loaded++:n.state===F&&e.error++;return e}async _loadAssetWithRetry(e,t={}){const{retryAttempts:n=this.config.retryAttempts}=t;for(let a=0;a<=n;a++)try{return await this._loadAssetDirect(e,t)}catch(r){if(a===n)throw r;await new Promise(e=>setTimeout(e,this.config.retryDelay*Math.pow(2,a)))}}async _loadAssetDirect(e,t={}){const{type:n=this._detectAssetType(e)}=t;switch(n){case"image":return this.loadImage(e,t);case"css":return this.loadCSS(e,t);case"js":return this.loadJS(e,t);default:const n=await fetch(e);if(!n.ok)throw new Error(`Failed to load asset: ${e} (${n.status})`);return n}}_detectAssetType(e){var t;const n=null==(t=e.split(".").pop())?void 0:t.toLowerCase();return["jpg","jpeg","png","gif","svg","webp"].includes(n)?"image":"css"===n?"css":["js","mjs"].includes(n)?"js":"unknown"}_createPreloadLink(e){if(document.querySelector(`link[href="${_(e.path)}"]`))return;const t=document.createElement("link");t.rel="font"===e.type?"preload":"prefetch",t.href=_(e.path),t.as=e.as||e.type,"font"===e.type&&(t.type="font/woff2",t.crossOrigin="anonymous"),"high"===e.priority&&(t.fetchPriority="high"),document.head.appendChild(t)}async _loadLazyImage(e){try{const t=e.dataset.src;if(!t)return;const n=await this.loadImage(t,{crossOrigin:e.crossOrigin,decoding:"async"});e.src=n.src,e.removeAttribute("data-src"),e.classList.add("loaded"),e.dispatchEvent(new Event("load"))}catch(t){console.warn("Failed to load lazy image:",t),e.classList.add("error")}}_processQueue(){for(;this.loadQueue.length>0&&this.currentLoads<this.config.maxConcurrentLoads;){const e=this.loadQueue.shift();this.currentLoads++,e()}}};function z(){console.group("üîç Asset Path Debug Information"),console.log("üìã Build-time Variables:"),console.log("  __BASE_URL__:","/"),console.log("  __DEPLOY_MODE__:","vercel"),console.log("  __BUILD_TIMESTAMP__:","2025-07-30T00:57:36.171Z"),console.log("  __DEPLOY_TIME__:","1753837056171"),console.log("  __IS_VERCEL__:",!0),console.log("  __IS_GITHUB_PAGES__:",!1),console.log("  __PLATFORM__:","vercel"),console.log("\nüìä Computed Values:"),console.log("  BASE_URL:",M),console.log("  DEPLOY_MODE:",T),console.log("  getBaseUrl():",D()),console.log("  getEnvironmentConfig():",P()),console.log("\nüîß Asset Path Tests:");const e=["/assets/images/logo.png","/assets/styles/main.css","/entries/main.js","assets/images/hero-bg.jpg","styles/main.css","https://external.com/image.jpg","/favicon.ico"];e.forEach(e=>{const t=_(e),n=t.includes("//")&&!t.startsWith("http"),r=t.includes("/Neff-Paving//");console.log(`  "${e}" ‚Üí "${t}"`,{hasDoubleSlash:n,hasIncorrectBase:r,length:t.length}),n&&console.warn("    ‚ö†Ô∏è  Double slash detected!"),r&&console.warn("    ‚ö†Ô∏è  Incorrect base URL!")}),console.log("\nüåê URL Creation Tests:");return["index.html","/index.html","services/","/services/"].forEach(e=>{const t=("/"+((n=e).startsWith("/")?n.slice(1):n)).replace(/([^:])\/{2,}/g,"$1/");var n;console.log(`  "${e}" ‚Üí "${t}"`)}),console.log("\nüèóÔ∏è Environment Detection:"),console.log("  process.env.NODE_ENV:","undefined"!=typeof process?"production":"undefined"),console.log("  Current environment config:",P()),console.log("\nüöÄ Deployment Scenarios:"),console.log("  üîµ Vercel deployment detected"),console.log("    Sample asset path:",_("/assets/images/test.jpg",{forceAbsolute:!0})),console.groupEnd(),{buildVars:{baseUrl:"/",deployMode:"vercel",isVercel:!0,isGitHub:!1},computedValues:{BASE_URL:M,DEPLOY_MODE:T,baseUrl:D(),envConfig:P()},testResults:e.map(e=>({input:e,output:_(e),hasIssues:_(e).includes("//")&&!_(e).startsWith("http")}))}}function j(){console.group("üß™ Asset Loading Tests");const e=new Image,t=_("/assets/images/logo.png");console.log("Testing image load:",t),e.onload=()=>{console.log("‚úÖ Image loaded successfully:",t)},e.onerror=()=>{console.error("‚ùå Image failed to load:",t)},e.src=t;const n=document.createElement("link");n.rel="stylesheet",n.type="text/css";const r=_("/assets/styles/test.css");console.log("Testing CSS load:",r),n.onload=()=>{console.log("‚úÖ CSS loaded successfully:",r),n.remove()},n.onerror=()=>{console.error("‚ùå CSS failed to load:",r),n.remove()},n.href=r,document.head.appendChild(n),console.groupEnd()}function N(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}
/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{$.preloadCriticalAssets()}):$.preloadCriticalAssets(),"undefined"!=typeof window&&window.location.search.includes("debug=assets")&&document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{z(),j()},1e3)}),"undefined"!=typeof window&&(window.debugAssetPaths=z,window.testAssetLoading=j,window.fixDoubleSlashes=function(){console.group("üîß Fixing Double Slashes"),['img[src*="//"]','link[href*="//"]','script[src*="//"]','a[href*="//"]'].forEach(e=>{const t=document.querySelectorAll(e);console.log(`Found ${t.length} elements with "${e}"`),t.forEach(e=>{const t="a"===e.tagName.toLowerCase()||"link"===e.tagName.toLowerCase()?"href":"src",n=e.getAttribute(t);if(n&&n.includes("//")&&!n.startsWith("http")){const r=n.replace(/\/+/g,"/");e.setAttribute(t,r),console.log(`Fixed: "${n}" ‚Üí "${r}"`)}})}),console.groupEnd()},window.disableAssetOptimization=function(){console.log("üö´ Temporarily disabling asset optimization system"),window.originalGetAssetPath=window.getAssetPath,window.getAssetPath=function(e){return console.log("üîÑ Using simplified asset path for:",e),e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/"+e},console.log("Asset optimization disabled. Use enableAssetOptimization() to re-enable.")},window.enableAssetOptimization=function(){window.originalGetAssetPath&&(window.getAssetPath=window.originalGetAssetPath,delete window.originalGetAssetPath,console.log("‚úÖ Asset optimization re-enabled"))});var G,H,V,W,U,Y,X,Q,Z,J,K,ee,te,ne=function(){return G||"undefined"!=typeof window&&(G=window.gsap)&&G.registerPlugin&&G},re=1,ae=[],se=[],oe=[],ie=Date.now,le=function(e,t){return t},ce=function(e,t){return~oe.indexOf(e)&&oe[oe.indexOf(e)+1][t]},de=function(e){return!!~J.indexOf(e)},ue=function(e,t,n,r,a){return e.addEventListener(t,n,{passive:!1!==r,capture:!!a})},pe=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},me="scrollLeft",ge="scrollTop",he=function(){return K&&K.isPressed||se.cache++},fe=function(e,t){var n=function n(r){if(r||0===r){re&&(V.history.scrollRestoration="manual");var a=K&&K.isPressed;r=n.v=Math.round(r)||(K&&K.iOS?1:0),e(r),n.cacheID=se.cache,a&&le("ss",r)}else(t||se.cache!==n.cacheID||le("ref"))&&(n.cacheID=se.cache,n.v=e());return n.v+n.offset};return n.offset=0,e&&n},ve={s:me,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:fe(function(e){return arguments.length?V.scrollTo(e,ye.sc()):V.pageXOffset||W[me]||U[me]||Y[me]||0})},ye={s:ge,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ve,sc:fe(function(e){return arguments.length?V.scrollTo(ve.sc(),e):V.pageYOffset||W[ge]||U[ge]||Y[ge]||0})},be=function(e,t){return(t&&t._ctx&&t._ctx.selector||G.utils.toArray)(e)[0]||("string"==typeof e&&!1!==G.config().nullTargetWarn?console.warn("Element not found:",e):null)},we=function(e,t){var n=t.s,r=t.sc;de(e)&&(e=W.scrollingElement||U);var a=se.indexOf(e),s=r===ye.sc?1:2;!~a&&(a=se.push(e)-1),se[a+s]||ue(e,"scroll",he);var o=se[a+s],i=o||(se[a+s]=fe(ce(e,n),!0)||(de(e)?r:fe(function(t){return arguments.length?e[n]=t:e[n]})));return i.target=e,o||(i.smooth="smooth"===G.getProperty(e,"scrollBehavior")),i},xe=function(e,t,n){var r=e,a=e,s=ie(),o=s,i=t||50,l=Math.max(500,3*i),c=function(e,t){var l=ie();t||l-s>i?(a=r,r=e,o=s,s=l):n?r+=e:r=a+(e-a)/(l-o)*(s-o)};return{update:c,reset:function(){a=r=n?0:r,o=s=0},getVelocity:function(e){var t=o,i=a,d=ie();return(e||0===e)&&e!==r&&c(e),s===o||d-o>l?0:(r+(n?i:-i))/((n?d:s)-t)*1e3}}},Se=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Ee=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},Ce=function(){var e,t,n,r;(Z=G.core.globals().ScrollTrigger)&&Z.core&&(e=Z.core,t=e.bridge||{},n=e._scrollers,r=e._proxies,n.push.apply(n,se),r.push.apply(r,oe),se=n,oe=r,le=function(e,n){return t[e](n)})},Ie=function(e){return G=e||ne(),!H&&G&&"undefined"!=typeof document&&document.body&&(V=window,W=document,U=W.documentElement,Y=W.body,J=[V,W,U,Y],G.utils.clamp,te=G.core.context||function(){},Q="onpointerenter"in Y?"pointer":"mouse",X=Me.isTouch=V.matchMedia&&V.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in V||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ee=Me.eventTypes=("ontouchstart"in U?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in U?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return re=0},500),Ce(),H=1),H};ve.op=ye,se.cache=0;var Me=function(){function e(e){this.init(e)}return e.prototype.init=function(e){H||Ie(G)||console.warn("Please gsap.registerPlugin(Observer)"),Z||Ce();var t=e.tolerance,n=e.dragMinimum,r=e.type,a=e.target,s=e.lineHeight,o=e.debounce,i=e.preventDefault,l=e.onStop,c=e.onStopDelay,d=e.ignore,u=e.wheelSpeed,p=e.event,m=e.onDragStart,g=e.onDragEnd,h=e.onDrag,f=e.onPress,v=e.onRelease,y=e.onRight,b=e.onLeft,w=e.onUp,x=e.onDown,S=e.onChangeX,E=e.onChangeY,C=e.onChange,I=e.onToggleX,M=e.onToggleY,T=e.onHover,k=e.onHoverEnd,A=e.onMove,L=e.ignoreCheck,P=e.isNormalizer,D=e.onGestureStart,_=e.onGestureEnd,O=e.onWheel,q=e.onEnable,F=e.onDisable,B=e.onClick,R=e.scrollSpeed,$=e.capture,z=e.allowClicks,j=e.lockAxis,N=e.onLockAxis;this.target=a=be(a)||U,this.vars=e,d&&(d=G.utils.toArray(d)),t=t||1e-9,n=n||0,u=u||1,R=R||1,r=r||"wheel,touch,pointer",o=!1!==o,s||(s=parseFloat(V.getComputedStyle(Y).lineHeight)||22);var J,ne,re,se,oe,le,ce,me=this,ge=0,fe=0,Me=e.passive||!i&&!1!==e.passive,Te=we(a,ve),ke=we(a,ye),Ae=Te(),Le=ke(),Pe=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===ee[0],De=de(a),_e=a.ownerDocument||W,Oe=[0,0,0],qe=[0,0,0],Fe=0,Be=function(){return Fe=ie()},Re=function(e,t){return(me.event=e)&&d&&function(e,t){for(var n=t.length;n--;)if(t[n]===e||t[n].contains(e))return!0;return!1}(e.target,d)||t&&Pe&&"touch"!==e.pointerType||L&&L(e,t)},$e=function(){var e=me.deltaX=Ee(Oe),n=me.deltaY=Ee(qe),r=Math.abs(e)>=t,a=Math.abs(n)>=t;C&&(r||a)&&C(me,e,n,Oe,qe),r&&(y&&me.deltaX>0&&y(me),b&&me.deltaX<0&&b(me),S&&S(me),I&&me.deltaX<0!=ge<0&&I(me),ge=me.deltaX,Oe[0]=Oe[1]=Oe[2]=0),a&&(x&&me.deltaY>0&&x(me),w&&me.deltaY<0&&w(me),E&&E(me),M&&me.deltaY<0!=fe<0&&M(me),fe=me.deltaY,qe[0]=qe[1]=qe[2]=0),(se||re)&&(A&&A(me),re&&(m&&1===re&&m(me),h&&h(me),re=0),se=!1),le&&!(le=!1)&&N&&N(me),oe&&(O(me),oe=!1),J=0},ze=function(e,t,n){Oe[n]+=e,qe[n]+=t,me._vx.update(e),me._vy.update(t),o?J||(J=requestAnimationFrame($e)):$e()},je=function(e,t){j&&!ce&&(me.axis=ce=Math.abs(e)>Math.abs(t)?"x":"y",le=!0),"y"!==ce&&(Oe[2]+=e,me._vx.update(e,!0)),"x"!==ce&&(qe[2]+=t,me._vy.update(t,!0)),o?J||(J=requestAnimationFrame($e)):$e()},Ne=function(e){if(!Re(e,1)){var t=(e=Se(e,i)).clientX,r=e.clientY,a=t-me.x,s=r-me.y,o=me.isDragging;me.x=t,me.y=r,(o||(a||s)&&(Math.abs(me.startX-t)>=n||Math.abs(me.startY-r)>=n))&&(re=o?2:1,o||(me.isDragging=!0),je(a,s))}},Ge=me.onPress=function(e){Re(e,1)||e&&e.button||(me.axis=ce=null,ne.pause(),me.isPressed=!0,e=Se(e),ge=fe=0,me.startX=me.x=e.clientX,me.startY=me.y=e.clientY,me._vx.reset(),me._vy.reset(),ue(P?a:_e,ee[1],Ne,Me,!0),me.deltaX=me.deltaY=0,f&&f(me))},He=me.onRelease=function(e){if(!Re(e,1)){pe(P?a:_e,ee[1],Ne,!0);var t=!isNaN(me.y-me.startY),n=me.isDragging,r=n&&(Math.abs(me.x-me.startX)>3||Math.abs(me.y-me.startY)>3),s=Se(e);!r&&t&&(me._vx.reset(),me._vy.reset(),i&&z&&G.delayedCall(.08,function(){if(ie()-Fe>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(_e.createEvent){var t=_e.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,V,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}})),me.isDragging=me.isGesturing=me.isPressed=!1,l&&n&&!P&&ne.restart(!0),re&&$e(),g&&n&&g(me),v&&v(me,r)}},Ve=function(e){return e.touches&&e.touches.length>1&&(me.isGesturing=!0)&&D(e,me.isDragging)},We=function(){return(me.isGesturing=!1)||_(me)},Ue=function(e){if(!Re(e)){var t=Te(),n=ke();ze((t-Ae)*R,(n-Le)*R,1),Ae=t,Le=n,l&&ne.restart(!0)}},Ye=function(e){if(!Re(e)){e=Se(e,i),O&&(oe=!0);var t=(1===e.deltaMode?s:2===e.deltaMode?V.innerHeight:1)*u;ze(e.deltaX*t,e.deltaY*t,0),l&&!P&&ne.restart(!0)}},Xe=function(e){if(!Re(e)){var t=e.clientX,n=e.clientY,r=t-me.x,a=n-me.y;me.x=t,me.y=n,se=!0,l&&ne.restart(!0),(r||a)&&je(r,a)}},Qe=function(e){me.event=e,T(me)},Ze=function(e){me.event=e,k(me)},Je=function(e){return Re(e)||Se(e,i)&&B(me)};ne=me._dc=G.delayedCall(c||.25,function(){me._vx.reset(),me._vy.reset(),ne.pause(),l&&l(me)}).pause(),me.deltaX=me.deltaY=0,me._vx=xe(0,50,!0),me._vy=xe(0,50,!0),me.scrollX=Te,me.scrollY=ke,me.isDragging=me.isGesturing=me.isPressed=!1,te(this),me.enable=function(e){return me.isEnabled||(ue(De?_e:a,"scroll",he),r.indexOf("scroll")>=0&&ue(De?_e:a,"scroll",Ue,Me,$),r.indexOf("wheel")>=0&&ue(a,"wheel",Ye,Me,$),(r.indexOf("touch")>=0&&X||r.indexOf("pointer")>=0)&&(ue(a,ee[0],Ge,Me,$),ue(_e,ee[2],He),ue(_e,ee[3],He),z&&ue(a,"click",Be,!0,!0),B&&ue(a,"click",Je),D&&ue(_e,"gesturestart",Ve),_&&ue(_e,"gestureend",We),T&&ue(a,Q+"enter",Qe),k&&ue(a,Q+"leave",Ze),A&&ue(a,Q+"move",Xe)),me.isEnabled=!0,me.isDragging=me.isGesturing=me.isPressed=se=re=!1,me._vx.reset(),me._vy.reset(),Ae=Te(),Le=ke(),e&&e.type&&Ge(e),q&&q(me)),me},me.disable=function(){me.isEnabled&&(ae.filter(function(e){return e!==me&&de(e.target)}).length||pe(De?_e:a,"scroll",he),me.isPressed&&(me._vx.reset(),me._vy.reset(),pe(P?a:_e,ee[1],Ne,!0)),pe(De?_e:a,"scroll",Ue,$),pe(a,"wheel",Ye,$),pe(a,ee[0],Ge,$),pe(_e,ee[2],He),pe(_e,ee[3],He),pe(a,"click",Be,!0),pe(a,"click",Je),pe(_e,"gesturestart",Ve),pe(_e,"gestureend",We),pe(a,Q+"enter",Qe),pe(a,Q+"leave",Ze),pe(a,Q+"move",Xe),me.isEnabled=me.isPressed=me.isDragging=!1,F&&F(me))},me.kill=me.revert=function(){me.disable();var e=ae.indexOf(me);e>=0&&ae.splice(e,1),K===me&&(K=0)},ae.push(me),P&&de(a)&&(K=me),me.enable(p)},N(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();Me.version="3.13.0",Me.create=function(e){return new Me(e)},Me.register=Ie,Me.getAll=function(){return ae.slice()},Me.getById=function(e){return ae.filter(function(t){return t.vars.id===e})[0]},ne()&&G.registerPlugin(Me);
/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var Te,ke,Ae,Le,Pe,De,_e,Oe,qe,Fe,Be,Re,$e,ze,je,Ne,Ge,He,Ve,We,Ue,Ye,Xe,Qe,Ze,Je,Ke,et,tt,nt,rt,at,st,ot,it,lt,ct,dt,ut=1,pt=Date.now,mt=pt(),gt=0,ht=0,ft=function(e,t,n){var r=Lt(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},vt=function(e,t){return!t||Lt(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},yt=function e(){return ht&&requestAnimationFrame(e)},bt=function(){return ze=1},wt=function(){return ze=0},xt=function(e){return e},St=function(e){return Math.round(1e5*e)/1e5||0},Et=function(){return"undefined"!=typeof window},Ct=function(){return Te||Et()&&(Te=window.gsap)&&Te.registerPlugin&&Te},It=function(e){return!!~_e.indexOf(e)},Mt=function(e){return("Height"===e?rt:Ae["inner"+e])||Pe["client"+e]||De["client"+e]},Tt=function(e){return ce(e,"getBoundingClientRect")||(It(e)?function(){return jn.width=Ae.innerWidth,jn.height=rt,jn}:function(){return Kt(e)})},kt=function(e,t){var n=t.s,r=t.d2,a=t.d,s=t.a;return Math.max(0,(n="scroll"+r)&&(s=ce(e,n))?s()-Tt(e)()[a]:It(e)?(Pe[n]||De[n])-Mt(r):e[n]-e["offset"+r])},At=function(e,t){for(var n=0;n<Ve.length;n+=3)(!t||~t.indexOf(Ve[n+1]))&&e(Ve[n],Ve[n+1],Ve[n+2])},Lt=function(e){return"string"==typeof e},Pt=function(e){return"function"==typeof e},Dt=function(e){return"number"==typeof e},_t=function(e){return"object"==typeof e},Ot=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},qt=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add(function(){return t(e)}):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},Ft=Math.abs,Bt="left",Rt="right",$t="bottom",zt="width",jt="height",Nt="Right",Gt="Left",Ht="Top",Vt="Bottom",Wt="padding",Ut="margin",Yt="Width",Xt="Height",Qt="px",Zt=function(e){return Ae.getComputedStyle(e)},Jt=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Kt=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==Zt(e)[je]&&Te.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},en=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},tn=function(e){var t,n=[],r=e.labels,a=e.duration();for(t in r)n.push(r[t]/a);return n},nn=function(e){var t=Te.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(e,t){return e-t});return n?function(e,r,a){var s;if(void 0===a&&(a=.001),!r)return t(e);if(r>0){for(e-=a,s=0;s<n.length;s++)if(n[s]>=e)return n[s];return n[s-1]}for(s=n.length,e+=a;s--;)if(n[s]<=e)return n[s];return n[0]}:function(n,r,a){void 0===a&&(a=.001);var s=t(n);return!r||Math.abs(s-n)<a||s-n<0==r<0?s:t(r<0?n-e:n+e)}},rn=function(e,t,n,r){return n.split(",").forEach(function(n){return e(t,n,r)})},an=function(e,t,n,r,a){return e.addEventListener(t,n,{passive:!r,capture:!!a})},sn=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},on=function(e,t,n){(n=n&&n.wheelHandler)&&(e(t,"wheel",n),e(t,"touchmove",n))},ln={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},cn={toggleActions:"play",anticipatePin:0},dn={top:0,left:0,center:.5,bottom:1,right:1},un=function(e,t){if(Lt(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in dn?dn[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},pn=function(e,t,n,r,a,s,o,i){var l=a.startColor,c=a.endColor,d=a.fontSize,u=a.indent,p=a.fontWeight,m=Le.createElement("div"),g=It(n)||"fixed"===ce(n,"pinType"),h=-1!==e.indexOf("scroller"),f=g?De:n,v=-1!==e.indexOf("start"),y=v?l:c,b="border-color:"+y+";font-size:"+d+";color:"+y+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((h||i)&&g?"fixed;":"absolute;"),(h||i||!g)&&(b+=(r===ye?Rt:$t)+":"+(s+parseFloat(u))+"px;"),o&&(b+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=v,m.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),m.style.cssText=b,m.innerText=t||0===t?e+"-"+t:e,f.children[0]?f.insertBefore(m,f.children[0]):f.appendChild(m),m._offset=m["offset"+r.op.d2],mn(m,0,r,v),m},mn=function(e,t,n,r){var a={display:"block"},s=n[r?"os2":"p2"],o=n[r?"p2":"os2"];e._isFlipped=r,a[n.a+"Percent"]=r?-100:0,a[n.a]=r?"1px":0,a["border"+s+Yt]=1,a["border"+o+Yt]=0,a[n.p]=t+"px",Te.set(e,a)},gn=[],hn={},fn=function(){return pt()-gt>34&&(it||(it=requestAnimationFrame(On)))},vn=function(){(!Xe||!Xe.isPressed||Xe.startX>De.clientWidth)&&(se.cache++,Xe?it||(it=requestAnimationFrame(On)):On(),gt||En("scrollStart"),gt=pt())},yn=function(){Je=Ae.innerWidth,Ze=Ae.innerHeight},bn=function(e){se.cache++,(!0===e||!$e&&!Ye&&!Le.fullscreenElement&&!Le.webkitFullscreenElement&&(!Qe||Je!==Ae.innerWidth||Math.abs(Ae.innerHeight-Ze)>.25*Ae.innerHeight))&&Oe.restart(!0)},wn={},xn=[],Sn=function e(){return sn(Yn,"scrollEnd",e)||Pn(!0)},En=function(e){return wn[e]&&wn[e].map(function(e){return e()})||xn},Cn=[],In=function(e){for(var t=0;t<Cn.length;t+=5)(!e||Cn[t+4]&&Cn[t+4].query===e)&&(Cn[t].style.cssText=Cn[t+1],Cn[t].getBBox&&Cn[t].setAttribute("transform",Cn[t+2]||""),Cn[t+3].uncache=1)},Mn=function(e,t){var n;for(Ne=0;Ne<gn.length;Ne++)!(n=gn[Ne])||t&&n._ctx!==t||(e?n.kill(1):n.revert(!0,!0));at=!0,t&&In(t),t||En("revert")},Tn=function(e,t){se.cache++,(t||!lt)&&se.forEach(function(e){return Pt(e)&&e.cacheID++&&(e.rec=0)}),Lt(e)&&(Ae.history.scrollRestoration=tt=e)},kn=0,An=function(){De.appendChild(nt),rt=!Xe&&nt.offsetHeight||Ae.innerHeight,De.removeChild(nt)},Ln=function(e){return qe(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Pn=function(e,t){if(Pe=Le.documentElement,De=Le.body,_e=[Ae,Le,Pe,De],!gt||e||at){An(),lt=Yn.isRefreshing=!0,se.forEach(function(e){return Pt(e)&&++e.cacheID&&(e.rec=e())});var n=En("refreshInit");We&&Yn.sort(),t||Mn(),se.forEach(function(e){Pt(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),gn.slice(0).forEach(function(e){return e.refresh()}),at=!1,gn.forEach(function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",n=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-n),e.refresh()}}),st=1,Ln(!0),gn.forEach(function(e){var t=kt(e.scroller,e._dir),n="max"===e.vars.end||e._endClamp&&e.end>t,r=e._startClamp&&e.start>=t;(n||r)&&e.setPositions(r?t-1:e.start,n?Math.max(r?t:e.start+1,t):e.end,!0)}),Ln(!1),st=0,n.forEach(function(e){return e&&e.render&&e.render(-1)}),se.forEach(function(e){Pt(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec&&e(e.rec))}),Tn(tt,1),Oe.pause(),kn++,lt=2,On(2),gn.forEach(function(e){return Pt(e.vars.onRefresh)&&e.vars.onRefresh(e)}),lt=Yn.isRefreshing=!1,En("refresh")}else an(Yn,"scrollEnd",Sn)},Dn=0,_n=1,On=function(e){if(2===e||!lt&&!at){Yn.isUpdating=!0,dt&&dt.update(0);var t=gn.length,n=pt(),r=n-mt>=50,a=t&&gn[0].scroll();if(_n=Dn>a?-1:1,lt||(Dn=a),r&&(gt&&!ze&&n-gt>200&&(gt=0,En("scrollEnd")),Be=mt,mt=n),_n<0){for(Ne=t;Ne-- >0;)gn[Ne]&&gn[Ne].update(0,r);_n=1}else for(Ne=0;Ne<t;Ne++)gn[Ne]&&gn[Ne].update(0,r);Yn.isUpdating=!1}it=0},qn=[Bt,"top",$t,Rt,Ut+Vt,Ut+Nt,Ut+Ht,Ut+Gt,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Fn=qn.concat([zt,jt,"boxSizing","max"+Yt,"max"+Xt,"position",Ut,Wt,Wt+Ht,Wt+Nt,Wt+Vt,Wt+Gt]),Bn=function(e,t,n,r){if(!e._gsap.swappedIn){for(var a,s=qn.length,o=t.style,i=e.style;s--;)o[a=qn[s]]=n[a];o.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(o.display="inline-block"),i[$t]=i[Rt]="auto",o.flexBasis=n.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[zt]=en(e,ve)+Qt,o[jt]=en(e,ye)+Qt,o[Wt]=i[Ut]=i.top=i[Bt]="0",$n(r),i[zt]=i["max"+Yt]=n[zt],i[jt]=i["max"+Xt]=n[jt],i[Wt]=n[Wt],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Rn=/([A-Z])/g,$n=function(e){if(e){var t,n,r=e.t.style,a=e.length,s=0;for((e.t._gsap||Te.core.getCache(e.t)).uncache=1;s<a;s+=2)n=e[s+1],t=e[s],n?r[t]=n:r[t]&&r.removeProperty(t.replace(Rn,"-$1").toLowerCase())}},zn=function(e){for(var t=Fn.length,n=e.style,r=[],a=0;a<t;a++)r.push(Fn[a],n[Fn[a]]);return r.t=e,r},jn={left:0,top:0},Nn=function(e,t,n,r,a,s,o,i,l,c,d,u,p,m){Pt(e)&&(e=e(i)),Lt(e)&&"max"===e.substr(0,3)&&(e=u+("="===e.charAt(4)?un("0"+e.substr(3),n):0));var g,h,f,v=p?p.time():0;if(p&&p.seek(0),isNaN(e)||(e=+e),Dt(e))p&&(e=Te.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,u,e)),o&&mn(o,n,r,!0);else{Pt(t)&&(t=t(i));var y,b,w,x,S=(e||"0").split(" ");f=be(t,i)||De,(y=Kt(f)||{})&&(y.left||y.top)||"none"!==Zt(f).display||(x=f.style.display,f.style.display="block",y=Kt(f),x?f.style.display=x:f.style.removeProperty("display")),b=un(S[0],y[r.d]),w=un(S[1]||"0",n),e=y[r.p]-l[r.p]-c+b+a-w,o&&mn(o,w,r,n-w<20||o._isStart&&w>20),n-=n-w}if(m&&(i[m]=e||-.001,e<0&&(e=0)),s){var E=e+n,C=s._isStart;g="scroll"+r.d2,mn(s,E,r,C&&E>20||!C&&(d?Math.max(De[g],Pe[g]):s.parentNode[g])<=E+1),d&&(l=Kt(o),d&&(s.style[r.op.p]=l[r.op.p]-r.op.m-s._offset+Qt))}return p&&f&&(g=Kt(f),p.seek(u),h=Kt(f),p._caScrollDist=g[r.p]-h[r.p],e=e/p._caScrollDist*u),p&&p.seek(v),p?e:Math.round(e)},Gn=/(webkit|moz|length|cssText|inset)/i,Hn=function(e,t,n,r){if(e.parentNode!==t){var a,s,o=e.style;if(t===De){for(a in e._stOrig=o.cssText,s=Zt(e))+a||Gn.test(a)||!s[a]||"string"!=typeof o[a]||"0"===a||(o[a]=s[a]);o.top=n,o.left=r}else o.cssText=e._stOrig;Te.core.getCache(e).uncache=1,t.appendChild(e)}},Vn=function(e,t,n){var r=t,a=r;return function(t){var s=Math.round(e());return s!==r&&s!==a&&Math.abs(s-r)>3&&Math.abs(s-a)>3&&(t=s,n&&n()),a=r,r=Math.round(t)}},Wn=function(e,t,n){var r={};r[t.p]="+="+n,Te.set(e,r)},Un=function(e,t){var n=we(e,t),r="_scroll"+t.p2,a=function t(a,s,o,i,l){var c=t.tween,d=s.onComplete,u={};o=o||n();var p=Vn(n,o,function(){c.kill(),t.tween=0});return l=i&&l||0,i=i||a-o,c&&c.kill(),s[r]=a,s.inherit=!1,s.modifiers=u,u[r]=function(){return p(o+i*c.ratio+l*c.ratio*c.ratio)},s.onUpdate=function(){se.cache++,t.tween&&On()},s.onComplete=function(){t.tween=0,d&&d.call(c)},c=t.tween=Te.to(e,s)};return e[r]=n,n.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},an(e,"wheel",n.wheelHandler),Yn.isTouch&&an(e,"touchmove",n.wheelHandler),a},Yn=function(){function e(t,n){ke||e.register(Te)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),et(this),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),ht){var r,a,s,o,i,l,c,d,u,p,m,g,h,f,v,y,b,w,x,S,E,C,I,M,T,k,A,L,P,D,_,O,q,F,B,R,$,z,j,N,G,H,V=t=Jt(Lt(t)||Dt(t)||t.nodeType?{trigger:t}:t,cn),W=V.onUpdate,U=V.toggleClass,Y=V.id,X=V.onToggle,Q=V.onRefresh,Z=V.scrub,J=V.trigger,K=V.pin,ee=V.pinSpacing,te=V.invalidateOnRefresh,ne=V.anticipatePin,re=V.onScrubComplete,ae=V.onSnapComplete,ie=V.once,le=V.snap,de=V.pinReparent,ue=V.pinSpacer,pe=V.containerAnimation,me=V.fastScrollEnd,ge=V.preventOverlaps,he=t.horizontal||t.containerAnimation&&!1!==t.horizontal?ve:ye,fe=!Z&&0!==Z,xe=be(t.scroller||Ae),Se=Te.core.getCache(xe),Ee=It(xe),Ce="fixed"===("pinType"in t?t.pinType:ce(xe,"pinType")||Ee&&"fixed"),Ie=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Me=fe&&t.toggleActions.split(" "),ke="markers"in t?t.markers:cn.markers,_e=Ee?0:parseFloat(Zt(xe)["border"+he.p2+Yt])||0,Oe=this,Re=t.onRefreshInit&&function(){return t.onRefreshInit(Oe)},je=function(e,t,n){var r=n.d,a=n.d2,s=n.a;return(s=ce(e,"getBoundingClientRect"))?function(){return s()[r]}:function(){return(t?Mt(a):e["client"+a])||0}}(xe,Ee,he),Ge=function(e,t){return!t||~oe.indexOf(e)?Tt(e):function(){return jn}}(xe,Ee),He=0,Ve=0,Ye=0,Xe=we(xe,he);if(Oe._startClamp=Oe._endClamp=!1,Oe._dir=he,ne*=45,Oe.scroller=xe,Oe.scroll=pe?pe.time.bind(pe):Xe,o=Xe(),Oe.vars=t,n=n||t.animation,"refreshPriority"in t&&(We=1,-9999===t.refreshPriority&&(dt=Oe)),Se.tweenScroll=Se.tweenScroll||{top:Un(xe,ye),left:Un(xe,ve)},Oe.tweenTo=r=Se.tweenScroll[he.p],Oe.scrubDuration=function(e){(q=Dt(e)&&e)?O?O.duration(e):O=Te.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:q,paused:!0,onComplete:function(){return re&&re(Oe)}}):(O&&O.progress(1).kill(),O=0)},n&&(n.vars.lazy=!1,n._initted&&!Oe.isReverted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.duration()&&n.render(0,!0,!0),Oe.animation=n.pause(),n.scrollTrigger=Oe,Oe.scrubDuration(Z),D=0,Y||(Y=n.vars.id)),le&&(_t(le)&&!le.push||(le={snapTo:le}),"scrollBehavior"in De.style&&Te.set(Ee?[De,Pe]:xe,{scrollBehavior:"auto"}),se.forEach(function(e){return Pt(e)&&e.target===(Ee?Le.scrollingElement||Pe:xe)&&(e.smooth=!1)}),s=Pt(le.snapTo)?le.snapTo:"labels"===le.snapTo?function(e){return function(t){return Te.utils.snap(tn(e),t)}}(n):"labelsDirectional"===le.snapTo?(N=n,function(e,t){return nn(tn(N))(e,t.direction)}):!1!==le.directional?function(e,t){return nn(le.snapTo)(e,pt()-Ve<500?0:t.direction)}:Te.utils.snap(le.snapTo),F=le.duration||{min:.1,max:2},F=_t(F)?Fe(F.min,F.max):Fe(F,F),B=Te.delayedCall(le.delay||q/2||.1,function(){var e=Xe(),t=pt()-Ve<500,a=r.tween;if(!(t||Math.abs(Oe.getVelocity())<10)||a||ze||He===e)Oe.isActive&&He!==e&&B.restart(!0);else{var o,i,d=(e-l)/f,u=n&&!fe?n.totalProgress():d,p=t?0:(u-_)/(pt()-Be)*1e3||0,m=Te.utils.clamp(-d,1-d,Ft(p/2)*p/.185),g=d+(!1===le.inertia?0:m),h=le,v=h.onStart,y=h.onInterrupt,b=h.onComplete;if(o=s(g,Oe),Dt(o)||(o=g),i=Math.max(0,Math.round(l+o*f)),e<=c&&e>=l&&i!==e){if(a&&!a._initted&&a.data<=Ft(i-e))return;!1===le.inertia&&(m=o-d),r(i,{duration:F(Ft(.185*Math.max(Ft(g-u),Ft(o-u))/p/.05||0)),ease:le.ease||"power3",data:Ft(i-e),onInterrupt:function(){return B.restart(!0)&&y&&y(Oe)},onComplete:function(){Oe.update(),He=Xe(),n&&!fe&&(O?O.resetTo("totalProgress",o,n._tTime/n._tDur):n.progress(o)),D=_=n&&!fe?n.totalProgress():Oe.progress,ae&&ae(Oe),b&&b(Oe)}},e,m*f,i-e-m*f),v&&v(Oe,r.tween)}}}).pause()),Y&&(hn[Y]=Oe),(j=(J=Oe.trigger=be(J||!0!==K&&K))&&J._gsap&&J._gsap.stRevert)&&(j=j(Oe)),K=!0===K?J:be(K),Lt(U)&&(U={targets:J,className:U}),K&&(!1===ee||ee===Ut||(ee=!(!ee&&K.parentNode&&K.parentNode.style&&"flex"===Zt(K.parentNode).display)&&Wt),Oe.pin=K,(a=Te.core.getCache(K)).spacer?v=a.pinState:(ue&&((ue=be(ue))&&!ue.nodeType&&(ue=ue.current||ue.nativeElement),a.spacerIsNative=!!ue,ue&&(a.spacerState=zn(ue))),a.spacer=w=ue||Le.createElement("div"),w.classList.add("pin-spacer"),Y&&w.classList.add("pin-spacer-"+Y),a.pinState=v=zn(K)),!1!==t.force3D&&Te.set(K,{force3D:!0}),Oe.spacer=w=a.spacer,P=Zt(K),M=P[ee+he.os2],S=Te.getProperty(K),E=Te.quickSetter(K,he.a,Qt),Bn(K,w,P),b=zn(K)),ke){g=_t(ke)?Jt(ke,ln):ln,p=pn("scroller-start",Y,xe,he,g,0),m=pn("scroller-end",Y,xe,he,g,0,p),x=p["offset"+he.op.d2];var Qe=be(ce(xe,"content")||xe);d=this.markerStart=pn("start",Y,Qe,he,g,x,0,pe),u=this.markerEnd=pn("end",Y,Qe,he,g,x,0,pe),pe&&(z=Te.quickSetter([d,u],he.a,Qt)),Ce||oe.length&&!0===ce(xe,"fixedMarkers")||(H=Zt(G=Ee?De:xe).position,G.style.position="absolute"===H||"fixed"===H?H:"relative",Te.set([p,m],{force3D:!0}),k=Te.quickSetter(p,he.a,Qt),L=Te.quickSetter(m,he.a,Qt))}if(pe){var Ze=pe.vars.onUpdate,Je=pe.vars.onUpdateParams;pe.eventCallback("onUpdate",function(){Oe.update(0,0,1),Ze&&Ze.apply(pe,Je||[])})}if(Oe.previous=function(){return gn[gn.indexOf(Oe)-1]},Oe.next=function(){return gn[gn.indexOf(Oe)+1]},Oe.revert=function(e,t){if(!t)return Oe.kill(!0);var r=!1!==e||!Oe.enabled,a=$e;r!==Oe.isReverted&&(r&&(R=Math.max(Xe(),Oe.scroll.rec||0),Ye=Oe.progress,$=n&&n.progress()),d&&[d,u,p,m].forEach(function(e){return e.style.display=r?"none":"block"}),r&&($e=Oe,Oe.update(r)),!K||de&&Oe.isActive||(r?function(e,t,n){$n(n);var r=e._gsap;if(r.spacerIsNative)$n(r.spacerState);else if(e._gsap.swappedIn){var a=t.parentNode;a&&(a.insertBefore(e,t),a.removeChild(t))}e._gsap.swappedIn=!1}(K,w,v):Bn(K,w,Zt(K),T)),r||Oe.update(r),$e=a,Oe.isReverted=r)},Oe.refresh=function(a,s,g,x){if(!$e&&Oe.enabled||s)if(K&&a&&gt)an(e,"scrollEnd",Sn);else{!lt&&Re&&Re(Oe),$e=Oe,r.tween&&!g&&(r.tween.kill(),r.tween=0),O&&O.pause(),te&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren&&n.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)})),Oe.isReverted||Oe.revert(!0,!0),Oe._subPinOffset=!1;var E,M,k,L,P,D,_,q,F,z,j,N,G,H=je(),V=Ge(),W=pe?pe.duration():kt(xe,he),U=f<=.01||!f,Y=0,X=x||0,Z=_t(g)?g.end:t.end,ne=t.endTrigger||J,re=_t(g)?g.start:t.start||(0!==t.start&&J?K?"0 0":"0 100%":0),ae=Oe.pinnedContainer=t.pinnedContainer&&be(t.pinnedContainer,Oe),se=J&&Math.max(0,gn.indexOf(Oe))||0,oe=se;for(ke&&_t(g)&&(N=Te.getProperty(p,he.p),G=Te.getProperty(m,he.p));oe-- >0;)(D=gn[oe]).end||D.refresh(0,1)||($e=Oe),!(_=D.pin)||_!==J&&_!==K&&_!==ae||D.isReverted||(z||(z=[]),z.unshift(D),D.revert(!0,!0)),D!==gn[oe]&&(se--,oe--);for(Pt(re)&&(re=re(Oe)),re=ft(re,"start",Oe),l=Nn(re,J,H,he,Xe(),d,p,Oe,V,_e,Ce,W,pe,Oe._startClamp&&"_startClamp")||(K?-.001:0),Pt(Z)&&(Z=Z(Oe)),Lt(Z)&&!Z.indexOf("+=")&&(~Z.indexOf(" ")?Z=(Lt(re)?re.split(" ")[0]:"")+Z:(Y=un(Z.substr(2),H),Z=Lt(re)?re:(pe?Te.utils.mapRange(0,pe.duration(),pe.scrollTrigger.start,pe.scrollTrigger.end,l):l)+Y,ne=J)),Z=ft(Z,"end",Oe),c=Math.max(l,Nn(Z||(ne?"100% 0":W),ne,H,he,Xe()+Y,u,m,Oe,V,_e,Ce,W,pe,Oe._endClamp&&"_endClamp"))||-.001,Y=0,oe=se;oe--;)(_=(D=gn[oe]).pin)&&D.start-D._pinPush<=l&&!pe&&D.end>0&&(E=D.end-(Oe._startClamp?Math.max(0,D.start):D.start),(_===J&&D.start-D._pinPush<l||_===ae)&&isNaN(re)&&(Y+=E*(1-D.progress)),_===K&&(X+=E));if(l+=Y,c+=Y,Oe._startClamp&&(Oe._startClamp+=Y),Oe._endClamp&&!lt&&(Oe._endClamp=c||-.001,c=Math.min(c,kt(xe,he))),f=c-l||(l-=.01)&&.001,U&&(Ye=Te.utils.clamp(0,1,Te.utils.normalize(l,c,R))),Oe._pinPush=X,d&&Y&&((E={})[he.a]="+="+Y,ae&&(E[he.p]="-="+Xe()),Te.set([d,u],E)),!K||st&&Oe.end>=kt(xe,he)){if(J&&Xe()&&!pe)for(M=J.parentNode;M&&M!==De;)M._pinOffset&&(l-=M._pinOffset,c-=M._pinOffset),M=M.parentNode}else E=Zt(K),L=he===ye,k=Xe(),C=parseFloat(S(he.a))+X,!W&&c>1&&(j={style:j=(Ee?Le.scrollingElement||Pe:xe).style,value:j["overflow"+he.a.toUpperCase()]},Ee&&"scroll"!==Zt(De)["overflow"+he.a.toUpperCase()]&&(j.style["overflow"+he.a.toUpperCase()]="scroll")),Bn(K,w,E),b=zn(K),M=Kt(K,!0),q=Ce&&we(xe,L?ve:ye)(),ee?((T=[ee+he.os2,f+X+Qt]).t=w,(oe=ee===Wt?en(K,he)+f+X:0)&&(T.push(he.d,oe+Qt),"auto"!==w.style.flexBasis&&(w.style.flexBasis=oe+Qt)),$n(T),ae&&gn.forEach(function(e){e.pin===ae&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),Ce&&Xe(R)):(oe=en(K,he))&&"auto"!==w.style.flexBasis&&(w.style.flexBasis=oe+Qt),Ce&&((P={top:M.top+(L?k-l:q)+Qt,left:M.left+(L?q:k-l)+Qt,boxSizing:"border-box",position:"fixed"})[zt]=P["max"+Yt]=Math.ceil(M.width)+Qt,P[jt]=P["max"+Xt]=Math.ceil(M.height)+Qt,P[Ut]=P[Ut+Ht]=P[Ut+Nt]=P[Ut+Vt]=P[Ut+Gt]="0",P[Wt]=E[Wt],P[Wt+Ht]=E[Wt+Ht],P[Wt+Nt]=E[Wt+Nt],P[Wt+Vt]=E[Wt+Vt],P[Wt+Gt]=E[Wt+Gt],y=function(e,t,n){for(var r,a=[],s=e.length,o=n?8:0;o<s;o+=2)r=e[o],a.push(r,r in t?t[r]:e[o+1]);return a.t=e.t,a}(v,P,de),lt&&Xe(0)),n?(F=n._initted,Ue(1),n.render(n.duration(),!0,!0),I=S(he.a)-C+f+X,A=Math.abs(f-I)>1,Ce&&A&&y.splice(y.length-2,2),n.render(0,!0,!0),F||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),Ue(0)):I=f,j&&(j.value?j.style["overflow"+he.a.toUpperCase()]=j.value:j.style.removeProperty("overflow-"+he.a));z&&z.forEach(function(e){return e.revert(!1,!0)}),Oe.start=l,Oe.end=c,o=i=lt?R:Xe(),pe||lt||(o<R&&Xe(R),Oe.scroll.rec=0),Oe.revert(!1,!0),Ve=pt(),B&&(He=-1,B.restart(!0)),$e=0,n&&fe&&(n._initted||$)&&n.progress()!==$&&n.progress($||0,!0).render(n.time(),!0,!0),(U||Ye!==Oe.progress||pe||te||n&&!n._initted)&&(n&&!fe&&(n._initted||Ye||!1!==n.vars.immediateRender)&&n.totalProgress(pe&&l<-.001&&!Ye?Te.utils.normalize(l,c,0):Ye,!0),Oe.progress=U||(o-l)/f===Ye?0:Ye),K&&ee&&(w._pinOffset=Math.round(Oe.progress*I)),O&&O.invalidate(),isNaN(N)||(N-=Te.getProperty(p,he.p),G-=Te.getProperty(m,he.p),Wn(p,he,N),Wn(d,he,N-(x||0)),Wn(m,he,G),Wn(u,he,G-(x||0))),U&&!lt&&Oe.update(),!Q||lt||h||(h=!0,Q(Oe),h=!1)}},Oe.getVelocity=function(){return(Xe()-i)/(pt()-Be)*1e3||0},Oe.endAnimation=function(){Ot(Oe.callbackAnimation),n&&(O?O.progress(1):n.paused()?fe||Ot(n,Oe.direction<0,1):Ot(n,n.reversed()))},Oe.labelToScroll=function(e){return n&&n.labels&&(l||Oe.refresh()||l)+n.labels[e]/n.duration()*f||0},Oe.getTrailing=function(e){var t=gn.indexOf(Oe),n=Oe.direction>0?gn.slice(0,t).reverse():gn.slice(t+1);return(Lt(e)?n.filter(function(t){return t.vars.preventOverlaps===e}):n).filter(function(e){return Oe.direction>0?e.end<=l:e.start>=c})},Oe.update=function(e,t,a){if(!pe||a||e){var s,d,u,m,g,h,v,x=!0===lt?R:Oe.scroll(),S=e?0:(x-l)/f,T=S<0?0:S>1?1:S||0,P=Oe.progress;if(t&&(i=o,o=pe?Xe():x,le&&(_=D,D=n&&!fe?n.totalProgress():T)),ne&&K&&!$e&&!ut&&gt&&(!T&&l<x+(x-i)/(pt()-Be)*ne?T=1e-4:1===T&&c>x+(x-i)/(pt()-Be)*ne&&(T=.9999)),T!==P&&Oe.enabled){if(m=(g=(s=Oe.isActive=!!T&&T<1)!==(!!P&&P<1))||!!T!=!!P,Oe.direction=T>P?1:-1,Oe.progress=T,m&&!$e&&(d=T&&!P?0:1===T?1:1===P?2:3,fe&&(u=!g&&"none"!==Me[d+1]&&Me[d+1]||Me[d],v=n&&("complete"===u||"reset"===u||u in n))),ge&&(g||v)&&(v||Z||!n)&&(Pt(ge)?ge(Oe):Oe.getTrailing(ge).forEach(function(e){return e.endAnimation()})),fe||(!O||$e||ut?n&&n.totalProgress(T,!(!$e||!Ve&&!e)):(O._dp._time-O._start!==O._time&&O.render(O._dp._time-O._start),O.resetTo?O.resetTo("totalProgress",T,n._tTime/n._tDur):(O.vars.totalProgress=T,O.invalidate().restart()))),K)if(e&&ee&&(w.style[ee+he.os2]=M),Ce){if(m){if(h=!e&&T>P&&c+1>x&&x+1>=kt(xe,he),de)if(e||!s&&!h)Hn(K,w);else{var q=Kt(K,!0),F=x-l;Hn(K,De,q.top+(he===ye?F:0)+Qt,q.left+(he===ye?0:F)+Qt)}$n(s||h?y:b),A&&T<1&&s||E(C+(1!==T||h?0:I))}}else E(St(C+I*T));le&&!r.tween&&!$e&&!ut&&B.restart(!0),U&&(g||ie&&T&&(T<1||!ot))&&qe(U.targets).forEach(function(e){return e.classList[s||ie?"add":"remove"](U.className)}),W&&!fe&&!e&&W(Oe),m&&!$e?(fe&&(v&&("complete"===u?n.pause().totalProgress(1):"reset"===u?n.restart(!0).pause():"restart"===u?n.restart(!0):n[u]()),W&&W(Oe)),!g&&ot||(X&&g&&qt(Oe,X),Ie[d]&&qt(Oe,Ie[d]),ie&&(1===T?Oe.kill(!1,1):Ie[d]=0),g||Ie[d=1===T?1:3]&&qt(Oe,Ie[d])),me&&!s&&Math.abs(Oe.getVelocity())>(Dt(me)?me:2500)&&(Ot(Oe.callbackAnimation),O?O.progress(1):Ot(n,"reverse"===u?1:!T,1))):fe&&W&&!$e&&W(Oe)}if(L){var $=pe?x/pe.duration()*(pe._caScrollDist||0):x;k($+(p._isFlipped?1:0)),L($)}z&&z(-x/pe.duration()*(pe._caScrollDist||0))}},Oe.enable=function(t,n){Oe.enabled||(Oe.enabled=!0,an(xe,"resize",bn),Ee||an(xe,"scroll",vn),Re&&an(e,"refreshInit",Re),!1!==t&&(Oe.progress=Ye=0,o=i=He=Xe()),!1!==n&&Oe.refresh())},Oe.getTween=function(e){return e&&r?r.tween:O},Oe.setPositions=function(e,t,n,r){if(pe){var a=pe.scrollTrigger,s=pe.duration(),o=a.end-a.start;e=a.start+o*e/s,t=a.start+o*t/s}Oe.refresh(!1,!1,{start:vt(e,n&&!!Oe._startClamp),end:vt(t,n&&!!Oe._endClamp)},r),Oe.update()},Oe.adjustPinSpacing=function(e){if(T&&e){var t=T.indexOf(he.d)+1;T[t]=parseFloat(T[t])+e+Qt,T[1]=parseFloat(T[1])+e+Qt,$n(T)}},Oe.disable=function(t,n){if(Oe.enabled&&(!1!==t&&Oe.revert(!0,!0),Oe.enabled=Oe.isActive=!1,n||O&&O.pause(),R=0,a&&(a.uncache=1),Re&&sn(e,"refreshInit",Re),B&&(B.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!Ee)){for(var s=gn.length;s--;)if(gn[s].scroller===xe&&gn[s]!==Oe)return;sn(xe,"resize",bn),Ee||sn(xe,"scroll",vn)}},Oe.kill=function(e,r){Oe.disable(e,r),O&&!r&&O.kill(),Y&&delete hn[Y];var s=gn.indexOf(Oe);s>=0&&gn.splice(s,1),s===Ne&&_n>0&&Ne--,s=0,gn.forEach(function(e){return e.scroller===Oe.scroller&&(s=1)}),s||lt||(Oe.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.revert({kill:!1}),r||n.kill()),d&&[d,u,p,m].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),dt===Oe&&(dt=0),K&&(a&&(a.uncache=1),s=0,gn.forEach(function(e){return e.pin===K&&s++}),s||(a.spacer=0)),t.onKill&&t.onKill(Oe)},gn.push(Oe),Oe.enable(!1,!1),j&&j(Oe),n&&n.add&&!f){var Ke=Oe.update;Oe.update=function(){Oe.update=Ke,se.cache++,l||c||Oe.refresh()},Te.delayedCall(.01,Oe.update),f=.01,l=c=0}else Oe.refresh();K&&function(){if(ct!==kn){var e=ct=kn;requestAnimationFrame(function(){return e===kn&&Pn(!0)})}}()}else this.update=this.refresh=this.kill=xt},e.register=function(t){return ke||(Te=t||Ct(),Et()&&window.document&&e.enable(),ke=ht),ke},e.defaults=function(e){if(e)for(var t in e)cn[t]=e[t];return cn},e.disable=function(e,t){ht=0,gn.forEach(function(n){return n[t?"kill":"disable"](e)}),sn(Ae,"wheel",vn),sn(Le,"scroll",vn),clearInterval(Re),sn(Le,"touchcancel",xt),sn(De,"touchstart",xt),rn(sn,Le,"pointerdown,touchstart,mousedown",bt),rn(sn,Le,"pointerup,touchend,mouseup",wt),Oe.kill(),At(sn);for(var n=0;n<se.length;n+=3)on(sn,se[n],se[n+1]),on(sn,se[n],se[n+2])},e.enable=function(){if(Ae=window,Le=document,Pe=Le.documentElement,De=Le.body,Te&&(qe=Te.utils.toArray,Fe=Te.utils.clamp,et=Te.core.context||xt,Ue=Te.core.suppressOverwrites||xt,tt=Ae.history.scrollRestoration||"auto",Dn=Ae.pageYOffset||0,Te.core.globals("ScrollTrigger",e),De)){ht=1,(nt=document.createElement("div")).style.height="100vh",nt.style.position="absolute",An(),yt(),Me.register(Te),e.isTouch=Me.isTouch,Ke=Me.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Qe=1===Me.isTouch,an(Ae,"wheel",vn),_e=[Ae,Le,Pe,De],Te.matchMedia?(e.matchMedia=function(e){var t,n=Te.matchMedia();for(t in e)n.add(t,e[t]);return n},Te.addEventListener("matchMediaInit",function(){return Mn()}),Te.addEventListener("matchMediaRevert",function(){return In()}),Te.addEventListener("matchMedia",function(){Pn(0,1),En("matchMedia")}),Te.matchMedia().add("(orientation: portrait)",function(){return yn(),yn})):console.warn("Requires GSAP 3.11.0 or later"),yn(),an(Le,"scroll",vn);var t,n,r=De.hasAttribute("style"),a=De.style,s=a.borderTopStyle,o=Te.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),a.borderTopStyle="solid",t=Kt(De),ye.m=Math.round(t.top+ye.sc())||0,ve.m=Math.round(t.left+ve.sc())||0,s?a.borderTopStyle=s:a.removeProperty("border-top-style"),r||(De.setAttribute("style",""),De.removeAttribute("style")),Re=setInterval(fn,250),Te.delayedCall(.5,function(){return ut=0}),an(Le,"touchcancel",xt),an(De,"touchstart",xt),rn(an,Le,"pointerdown,touchstart,mousedown",bt),rn(an,Le,"pointerup,touchend,mouseup",wt),je=Te.utils.checkPrefix("transform"),Fn.push(je),ke=pt(),Oe=Te.delayedCall(.2,Pn).pause(),Ve=[Le,"visibilitychange",function(){var e=Ae.innerWidth,t=Ae.innerHeight;Le.hidden?(Ge=e,He=t):Ge===e&&He===t||bn()},Le,"DOMContentLoaded",Pn,Ae,"load",Pn,Ae,"resize",bn],At(an),gn.forEach(function(e){return e.enable(0,1)}),n=0;n<se.length;n+=3)on(sn,se[n],se[n+1]),on(sn,se[n],se[n+2])}},e.config=function(t){"limitCallbacks"in t&&(ot=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(Re)||(Re=n)&&setInterval(fn,n),"ignoreMobileResize"in t&&(Qe=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(At(sn)||At(an,t.autoRefreshEvents||"none"),Ye=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=be(e),r=se.indexOf(n),a=It(n);~r&&se.splice(r,a?6:2),t&&(a?oe.unshift(Ae,t,De,t,Pe,t):oe.unshift(n,t))},e.clearMatchMedia=function(e){gn.forEach(function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)})},e.isInViewport=function(e,t,n){var r=(Lt(e)?be(e):e).getBoundingClientRect(),a=r[n?zt:jt]*t||0;return n?r.right-a>0&&r.left+a<Ae.innerWidth:r.bottom-a>0&&r.top+a<Ae.innerHeight},e.positionInViewport=function(e,t,n){Lt(e)&&(e=be(e));var r=e.getBoundingClientRect(),a=r[n?zt:jt],s=null==t?a/2:t in dn?dn[t]*a:~t.indexOf("%")?parseFloat(t)*a/100:parseFloat(t)||0;return n?(r.left+s)/Ae.innerWidth:(r.top+s)/Ae.innerHeight},e.killAll=function(e){if(gn.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e){var t=wn.killAll||[];wn={},t.forEach(function(e){return e()})}},e}();Yn.version="3.13.0",Yn.saveStyles=function(e){return e?qe(e).forEach(function(e){if(e&&e.style){var t=Cn.indexOf(e);t>=0&&Cn.splice(t,5),Cn.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Te.core.getCache(e),et())}}):Cn},Yn.revert=function(e,t){return Mn(!e,t)},Yn.create=function(e,t){return new Yn(e,t)},Yn.refresh=function(e){return e?bn(!0):(ke||Yn.register())&&Pn(!0)},Yn.update=function(e){return++se.cache&&On(!0===e?2:0)},Yn.clearScrollMemory=Tn,Yn.maxScroll=function(e,t){return kt(e,t?ve:ye)},Yn.getScrollFunc=function(e,t){return we(be(e),t?ve:ye)},Yn.getById=function(e){return hn[e]},Yn.getAll=function(){return gn.filter(function(e){return"ScrollSmoother"!==e.vars.id})},Yn.isScrolling=function(){return!!gt},Yn.snapDirectional=nn,Yn.addEventListener=function(e,t){var n=wn[e]||(wn[e]=[]);~n.indexOf(t)||n.push(t)},Yn.removeEventListener=function(e,t){var n=wn[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},Yn.batch=function(e,t){var n,r=[],a={},s=t.interval||.016,o=t.batchMax||1e9,i=function(e,t){var n=[],r=[],a=Te.delayedCall(s,function(){t(n,r),n=[],r=[]}).pause();return function(e){n.length||a.restart(!0),n.push(e.trigger),r.push(e),o<=n.length&&a.progress(1)}};for(n in t)a[n]="on"===n.substr(0,2)&&Pt(t[n])&&"onRefreshInit"!==n?i(0,t[n]):t[n];return Pt(o)&&(o=o(),an(Yn,"refresh",function(){return o=t.batchMax()})),qe(e).forEach(function(e){var t={};for(n in a)t[n]=a[n];t.trigger=e,r.push(Yn.create(t))}),r};var Xn,Qn=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},Zn=function e(t,n){!0===n?t.style.removeProperty("touch-action"):t.style.touchAction=!0===n?"auto":n?"pan-"+n+(Me.isTouch?" pinch-zoom":""):"none",t===Pe&&e(De,n)},Jn={auto:1,scroll:1},Kn=function(e){var t,n=e.event,r=e.target,a=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,o=s._gsap||Te.core.getCache(s),i=pt();if(!o._isScrollT||i-o._isScrollT>2e3){for(;s&&s!==De&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!Jn[(t=Zt(s)).overflowY]&&!Jn[t.overflowX]);)s=s.parentNode;o._isScroll=s&&s!==r&&!It(s)&&(Jn[(t=Zt(s)).overflowY]||Jn[t.overflowX]),o._isScrollT=i}(o._isScroll||"x"===a)&&(n.stopPropagation(),n._gsapAllow=!0)},er=function(e,t,n,r){return Me.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&Kn,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&an(Le,Me.eventTypes[0],nr,!1,!0)},onDisable:function(){return sn(Le,Me.eventTypes[0],nr,!0)}})},tr=/(input|label|select|textarea)/i,nr=function(e){var t=tr.test(e.target.tagName);(t||Xn)&&(e._gsapAllow=!0,Xn=t)},rr=function(e){_t(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,r,a,s,o,i,l,c=e,d=c.normalizeScrollX,u=c.momentum,p=c.allowNestedScroll,m=c.onRelease,g=be(e.target)||Pe,h=Te.core.globals().ScrollSmoother,f=h&&h.get(),v=Ke&&(e.content&&be(e.content)||f&&!1!==e.content&&!f.smooth()&&f.content()),y=we(g,ye),b=we(g,ve),w=1,x=(Me.isTouch&&Ae.visualViewport?Ae.visualViewport.scale*Ae.visualViewport.width:Ae.outerWidth)/Ae.innerWidth,S=0,E=Pt(u)?function(){return u(t)}:function(){return u||2.8},C=er(g,e.type,!0,p),I=function(){return a=!1},M=xt,T=xt,k=function(){n=kt(g,ye),T=Fe(Ke?1:0,n),d&&(M=Fe(0,kt(g,ve))),r=kn},A=function(){v._gsap.y=St(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},L=function(){k(),s.isActive()&&s.vars.scrollY>n&&(y()>n?s.progress(1)&&y(n):s.resetTo("scrollY",n))};return v&&Te.set(v,{y:"+=0"}),e.ignoreCheck=function(e){return Ke&&"touchmove"===e.type&&function(){if(a){requestAnimationFrame(I);var e=St(t.deltaY/2),n=T(y.v-e);if(v&&n!==y.v+y.offset){y.offset=n-y.v;var r=St((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",v._gsap.y=r+"px",y.cacheID=se.cache,On()}return!0}y.offset&&A(),a=!0}()||w>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){a=!1;var e=w;w=St((Ae.visualViewport&&Ae.visualViewport.scale||1)/x),s.pause(),e!==w&&Zn(g,w>1.01||!d&&"x"),o=b(),i=y(),k(),r=kn},e.onRelease=e.onGestureStart=function(e,t){if(y.offset&&A(),t){se.cache++;var r,a,o=E();d&&(a=(r=b())+.05*o*-e.velocityX/.227,o*=Qn(b,r,a,kt(g,ve)),s.vars.scrollX=M(a)),a=(r=y())+.05*o*-e.velocityY/.227,o*=Qn(y,r,a,kt(g,ye)),s.vars.scrollY=T(a),s.invalidate().duration(o).play(.01),(Ke&&s.vars.scrollY>=n||r>=n-1)&&Te.to({},{onUpdate:L,duration:o})}else l.restart(!0);m&&m(e)},e.onWheel=function(){s._ts&&s.pause(),pt()-S>1e3&&(r=0,S=pt())},e.onChange=function(e,t,n,a,s){if(kn!==r&&k(),t&&d&&b(M(a[2]===t?o+(e.startX-e.x):b()+t-a[1])),n){y.offset&&A();var l=s[2]===n,c=l?i+e.startY-e.y:y()+n-s[1],u=T(c);l&&c!==u&&(i+=u-c),y(u)}(n||t)&&On()},e.onEnable=function(){Zn(g,!d&&"x"),Yn.addEventListener("refresh",L),an(Ae,"resize",L),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=b.smooth=!1),C.enable()},e.onDisable=function(){Zn(g,!0),sn(Ae,"resize",L),Yn.removeEventListener("refresh",L),C.kill()},e.lockAxis=!1!==e.lockAxis,(t=new Me(e)).iOS=Ke,Ke&&!y()&&y(1),Ke&&Te.ticker.add(xt),l=t._dc,s=Te.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:d?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Vn(y,y(),function(){return s.pause()})},onUpdate:On,onComplete:l.vars.onComplete}),t};Yn.sort=function(e){if(Pt(e))return gn.sort(e);var t=Ae.pageYOffset||0;return Yn.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+Ae.innerHeight}),gn.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},Yn.observe=function(e){return new Me(e)},Yn.normalizeScroll=function(e){if(void 0===e)return Xe;if(!0===e&&Xe)return Xe.enable();if(!1===e)return Xe&&Xe.kill(),void(Xe=e);var t=e instanceof Me?e:rr(e);return Xe&&Xe.target===t.target&&Xe.kill(),It(t.target)&&(Xe=t),t},Yn.core={_getVelocityProp:xe,_inputObserver:er,_scrollers:se,_proxies:oe,bridge:{ss:function(){gt||En("scrollStart"),gt=pt()},ref:function(){return $e}}},Ct()&&Te.registerPlugin(Yn);const ar=t(e());n.registerPlugin(Yn);class sr{constructor(){this.scrollRevealElements=[],this.isLoading=!1,this.formProgress=0,this.areaFinderInstance=null,this.arcGISInstance=null,this.arcGISLoaded=!1,this.arcGISLoading=!1,this.activeMeasurementTool="google-maps",this.init()}init(){O(),S(),i(),r({beforeSend:e=>e}),this.preloadCriticalAssets(),this.initHeroVideo(),this.initLoadingAnimation(),this.initAnimations(),this.initScrollEffects(),this.initRevealOnScroll(),this.initNavigation(),this.initGalleryFilters(),this.initContactForm(),this.initSectionAnimations(),this.initConversionOptimizations(),this.initInteractiveFeatures(),this.initClickToCall(),this.initEmergencyServiceHighlight(),this.initNotificationSystem(),this.initLocationMaps(),this.initLazyLoading(),this.initMeasurementToolToggle(),this.initServiceWorker(),this.initTestimonialReadMore()}initMeasurementToolToggle(){const e=document.querySelectorAll(".toggle-btn");document.getElementById("google-maps-container");const t=document.getElementById("arcgis-container"),n=document.getElementById("arcgis-placeholder");t&&(t.style.display="block",t.style.visibility="visible",t.style.opacity="1"),this.arcGISLoaded||this.arcGISLoading||(this.arcGISLoading=!0,n&&(n.style.display="flex"),this.loadArcGIS().then(()=>{this.arcGISLoaded=!0,this.arcGISLoading=!1,n&&(n.style.display="none")}).catch(e=>{console.error("Error loading ArcGIS:",e),this.arcGISLoading=!1,n&&this.showArcGISError(n,e)})),e.forEach(e=>{const t=e.dataset.tool;e.classList.remove("active"),"arcgis-3d"===t&&e.classList.add("active"),e.style.pointerEvents="none",e.style.opacity="0.6"}),this.activeMeasurementTool="arcgis-3d"}async loadArcGIS(){return new Promise((e,t)=>{if(this.arcGISLoaded)return void e();const n=document.createElement("link");n.rel="stylesheet",n.href="https://js.arcgis.com/4.33/esri/themes/light/main.css",document.head.appendChild(n);const r=document.createElement("script");r.type="module",r.src="https://js.arcgis.com/calcite-components/3.2.1/calcite.esm.js",document.head.appendChild(r);const a=document.createElement("script");a.src="https://js.arcgis.com/4.33/",a.onload=()=>{const n=document.createElement("script");n.type="module",n.src="https://js.arcgis.com/4.33/map-components/",n.onload=()=>{this.initializeArcGISScene(),e()},n.onerror=t,document.head.appendChild(n)},a.onerror=t,document.head.appendChild(a)})}initializeArcGISScene(){const e=document.getElementById("arcgis-scene-view");document.getElementById("arcgis-placeholder");const t=document.getElementById("arcgis-results"),n=document.getElementById("line-result"),r=document.getElementById("area-result");e.innerHTML='\n            <arcgis-scene item-id="5ce0de673d3b41a3bf3a217942211c4b" style="height: 100%; width: 100%;">\n                <arcgis-zoom position="top-left"></arcgis-zoom>\n                <arcgis-navigation-toggle position="top-left"></arcgis-navigation-toggle>\n                <arcgis-compass position="top-left"></arcgis-compass>\n                <arcgis-expand id="expand-line" position="top-right" group="top-right">\n                    <arcgis-direct-line-measurement-3d></arcgis-direct-line-measurement-3d>\n                </arcgis-expand>\n                <arcgis-expand id="expand-area" position="top-right" group="top-right">\n                    <arcgis-area-measurement-3d></arcgis-area-measurement-3d>\n                </arcgis-expand>\n            </arcgis-scene>\n        ',setTimeout(()=>{const a=e.querySelector("arcgis-scene"),s=e.querySelector("arcgis-direct-line-measurement-3d"),o=e.querySelector("arcgis-area-measurement-3d"),i=e.querySelector("#expand-line"),l=e.querySelector("#expand-area");a&&s&&o&&a.viewOnReady().then(()=>{this.setupArcGISMeasurementObservers(i,l,s,o,n,r,t)})},1e3)}setupArcGISMeasurementObservers(e,t,n,r,a,s,o){new MutationObserver(e=>{e.forEach(e=>{e.target.expanded?(n.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",s.textContent="0 m¬≤",t.expanded||(o.style.display="none"))})}).observe(e,{attributeFilter:["expanded"]});new MutationObserver(t=>{t.forEach(t=>{t.target.expanded?(r.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",s.textContent="0 m¬≤",e.expanded||(o.style.display="none"))})}).observe(t,{attributeFilter:["expanded"]}),n.addEventListener("measure-complete",e=>{e.detail&&e.detail.distance&&(a.textContent=`${e.detail.distance.toFixed(2)} ${e.detail.unit||"m"}`,this.updateProjectSizeFromMeasurement(e.detail,"distance"))}),r.addEventListener("measure-complete",e=>{e.detail&&e.detail.area&&(s.textContent=`${e.detail.area.toFixed(2)} ${e.detail.unit||"m¬≤"}`,this.updateProjectSizeFromMeasurement(e.detail,"area"))}),window.arcGISTool={getMeasurementData:()=>{const e=a.textContent,t=s.textContent,n=parseFloat(t.split(" ")[0]),r=parseFloat(e.split(" ")[0]);return n>0?{area:10.764*n,perimeter:3.28084*r,coordinates:[],unit:"sqft"}:null},clearMeasurements:()=>{n.clear(),r.clear(),a.textContent="0 m",s.textContent="0 m¬≤",o.style.display="none"}}}updateProjectSizeFromMeasurement(e,t){const n=document.getElementById("project-size");if(n&&"area"===t&&e.area){const t=Math.round(10.764*e.area);n.value=`${t} sq ft`,n.dispatchEvent(new Event("input",{bubbles:!0}))}}showArcGISError(e,t){e.innerHTML='\n            <div style="text-align: center; padding: 2rem; color: #dc3545;">\n                <div style="font-size: 48px; margin-bottom: 1rem;">‚ö†Ô∏è</div>\n                <h3 style="margin-bottom: 1rem; color: #dc3545;">Failed to Load ArcGIS</h3>\n                <p style="margin-bottom: 1.5rem; color: #6c757d;">Unable to load the 3D measurement tool. This might be due to a network issue or service unavailability.</p>\n                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">\n                    <button onclick="window.location.reload();" \n                            style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Retry</button>\n                </div>\n                <p style="margin-top: 1rem; font-size: 0.9rem; color: #6c757d;">Please try refreshing the page or contact us directly for assistance.</p>\n            </div>\n        '}initHeroVideo(){const e=document.getElementById("hero-video");if(!e)return;const t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"":window.location.pathname.includes("/Neff-Paving/")?"/Neff-Paving":"",n=e.querySelector("source");if(n){const e="assets/videos/optimized/neff-paving-1080p.mp4";n.src=t?`${t}/${e}`:e}e.addEventListener("error",e=>{console.error("Video failed to load:",e);const t=document.getElementById("hero");t&&(t.style.backgroundColor="#2c2c2c")}),e.addEventListener("loadeddata",()=>{e.play().catch(e=>{console.error("Video autoplay failed:",e)})}),e.style.opacity="1"}preloadCriticalAssets(){$.preloadCriticalAssets([{path:"/assets/images/hero-bg.jpg",type:"image",priority:"high"},{path:"/assets/videos/optimized/neff-paving-1080p.mp4",type:"video",priority:"medium"},{path:"/assets/images/logo.png",type:"image",priority:"high"}])}initLazyLoading(){document.querySelectorAll("img[src]").forEach(e=>{const t=e.src;!t||t.startsWith("data:")||e.hasAttribute("data-no-lazy")||(e.dataset.src=t,e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB2aWV3Qm94PSIwIDAgMSAxIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiNGOEY5RkEiIGQ9Ik0wIDBoMXYxSDB6Ii8+PC9zdmc+",e.loading="lazy",e.classList.add("lazy-load"))}),$.addLazyImages()}initSectionAnimations(){document.querySelectorAll(".service-card").forEach(e=>{e.addEventListener("mouseenter",()=>{n.to(e,{scale:1.03,duration:.3,ease:"power2.out"})}),e.addEventListener("mouseleave",()=>{n.to(e,{scale:1,duration:.3,ease:"power2.out"})})}),document.querySelectorAll(".team-member").forEach((e,t)=>{n.from(e,{y:50,opacity:0,duration:.8,delay:.1*t,scrollTrigger:{trigger:e,start:"top 80%",toggleActions:"play none none reverse"}})}),document.querySelectorAll(".contact-method").forEach((e,t)=>{e.style.opacity="1",e.style.transform="none"}),document.querySelectorAll(".stat-number").forEach(e=>{const t=e.textContent;e.textContent="0",n.to(e,{textContent:t,duration:2,ease:"power2.out",snap:{textContent:1},scrollTrigger:{trigger:e,start:"top 80%",toggleActions:"play none none none"}})}),document.querySelectorAll(".cert-icon").forEach((e,t)=>{n.from(e,{scale:0,rotation:180,duration:.5,delay:.05*t,ease:"back.out(1.7)",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none reverse"}})})}initAnimations(){ar.init({duration:1e3,once:!0,offset:100}),n.from(".hero-content h2",{duration:1.5,y:50,opacity:0,ease:"power3.out"}),n.from(".hero-content p",{duration:1.5,y:30,opacity:0,delay:.3,ease:"power3.out"})}initAreaFinder(){const e=document.querySelector(".map-placeholder");if(e){e.innerHTML='\n                <div id="area-finder-container">\n                    <h4>Project Area Calculator</h4>\n                    <p>Draw the area of your project on the map to get an accurate estimate.</p>\n                </div>\n            ';try{this.areaFinderInstance=new C("area-finder-container",{showCalculator:!0,showAddressSearch:!0,showAreaInfo:!0,onAreaCalculated:e=>{console.log("Area calculated:",e),this.updateProjectSizeFromArea(e)}})}catch(t){console.error("Error initializing area finder:",t),e.innerHTML='\n                    <div class="error-message">\n                        <p>Unable to load map. Please enter project size manually in the form above.</p>\n                    </div>\n                '}}}updateProjectSizeFromArea(e){const t=document.getElementById("project-size");t&&e.areaInSquareFeet&&(t.value=`${Math.round(e.areaInSquareFeet)} sq ft`,t.dispatchEvent(new Event("input",{bubbles:!0})))}initScrollEffects(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||n.to(".hero-content",{yPercent:10,ease:"none",scrollTrigger:{trigger:"#hero",start:"top bottom",end:"bottom top",scrub:2}});n.timeline({scrollTrigger:{trigger:"#hero",start:"top 80%",toggleActions:"play none none reverse"}}).from(".hero-title",{y:60,opacity:0,duration:1.2,ease:"power3.out"}).from(".hero-subtitle",{y:40,opacity:0,duration:1,ease:"power3.out"},"-=0.8").from(".hero-cta .btn",{y:30,opacity:0,duration:.8,stagger:.2,ease:"power3.out"},"-=0.6").from(".feature-badge",{y:20,opacity:0,duration:.6,stagger:.1,ease:"power3.out"},"-=0.4"),n.from(".asphalt-service-grid .service-card, .concrete-service-container .service-card",{y:80,opacity:0,duration:1,stagger:.2,ease:"power3.out",scrollTrigger:{trigger:".services-section",start:"top 80%",toggleActions:"play none none reverse"}}),n.from(".gallery-item",{scale:.8,opacity:0,duration:.8,stagger:.1,ease:"power3.out",scrollTrigger:{trigger:".gallery-container",start:"top 80%",toggleActions:"play none none reverse"}}),n.to("header",{backgroundColor:"rgba(44, 62, 80, 0.98)",scrollTrigger:{trigger:"body",start:"top -50px",end:"top -100px",scrub:1}}),n.utils.toArray("section").forEach((e,t)=>{"hero"!==e.id&&n.from(e,{opacity:0,y:50,duration:1,scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none reverse"}})})}initNavigation(){document.querySelectorAll('nav a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});let e=0;window.addEventListener("scroll",()=>{const t=window.pageYOffset||document.documentElement.scrollTop,n=document.querySelector("header");n.style.transform=t>e&&t>100?"translateY(-100%)":"translateY(0)",e=t<=0?0:t})}initGalleryFilters(){const e=document.querySelectorAll(".filter-btn"),t=document.querySelectorAll(".gallery-item");e.forEach(r=>{r.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active")),r.classList.add("active");const a=r.dataset.filter;t.forEach(e=>{"all"===a||e.dataset.category===a?(e.style.display="block",n.fromTo(e,{opacity:0,y:20},{opacity:1,y:0,duration:.5,delay:.3*Math.random()})):n.to(e,{opacity:0,y:-20,duration:.3,onComplete:()=>{e.style.display="none"}})})})})}initContactForm(){const e=document.getElementById("contact-form");e&&e.addEventListener("submit",async t=>{t.preventDefault();const n=new FormData(e),r=Object.fromEntries(n),a=this.getMeasurementData();if(a&&!this.validateMeasurementData(a))return void this.showValidationErrors(["measurement-invalid"]);if(a&&(r.measurementData=a,r.areaInSquareFeet=a.areaInSquareFeet,r.measurementTool=a.toolType),!this.validateForm(r))return;const s=e.querySelector('button[type="submit"]'),o=s.textContent;s.textContent="Sending...",s.disabled=!0;try{const t=await fetch("/api/estimates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await t.json();if(!n.success)throw new Error(n.message||"Submission failed");this.showSuccessMessage("Your estimate request has been submitted successfully!"),e.reset(),this.clearMeasurementData(),b()}catch(i){console.error("Form submission error:",i),this.showSuccessMessage("Form submitted! We will contact you within 2 business hours.","warning")}finally{s.textContent=o,s.disabled=!1}});const t=document.getElementById("start-chat");t&&t.addEventListener("click",()=>{alert("Chat widget would open here. In a real implementation, this would integrate with a chat service like Intercom, Zendesk, or custom solution.")})}validateForm(e){const t=[];["firstName","lastName","email","phone","serviceType"].forEach(n=>{e[n]&&""!==e[n].trim()||t.push(n)});e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&t.push("email-format");return e.phone&&!/^[\d\s\-\+\(\)]{10,}$/.test(e.phone.replace(/\D/g,""))&&t.push("phone-format"),!(t.length>0)||(this.showValidationErrors(t),!1)}showValidationErrors(e){document.querySelectorAll(".error-message").forEach(e=>e.remove()),e.forEach(e=>{let t,n;switch(e){case"firstName":t="first-name",n="First name is required";break;case"lastName":t="last-name",n="Last name is required";break;case"email":t="email",n="Email is required";break;case"email-format":t="email",n="Please enter a valid email address";break;case"phone":t="phone",n="Phone number is required";break;case"phone-format":t="phone",n="Please enter a valid phone number";break;case"serviceType":t="service-type",n="Please select a service type";break;case"measurement-invalid":t="project-size",n="Please complete the measurement or clear the drawing to proceed"}const r=document.getElementById(t);if(r){const e=document.createElement("div");e.className="error-message",e.style.color="var(--error-red)",e.style.fontSize="14px",e.style.marginTop="var(--spacing-xs)",e.textContent=n,r.parentNode.appendChild(e),r.style.borderColor="var(--error-red)"}})}getMeasurementData(){if(this.areaFinderInstance&&this.areaFinderInstance.getAreaData()){const e=this.areaFinderInstance.getAreaData();return{toolType:"google-maps",areaInSquareFeet:e.areaInSquareFeet,areaInAcres:e.areaInAcres,perimeter:e.perimeter,coordinates:e.coordinates||[],timestamp:(new Date).toISOString()}}if(window.arcGISTool&&window.arcGISTool.getMeasurementData){const e=window.arcGISTool.getMeasurementData();if(e&&e.area)return{toolType:"arcgis",areaInSquareFeet:e.area,areaInAcres:e.area/43560,perimeter:e.perimeter||0,coordinates:e.coordinates||[],timestamp:(new Date).toISOString()}}return null}validateMeasurementData(e){if(!e)return!1;if(!e.areaInSquareFeet||e.areaInSquareFeet<=0)return!1;return!!["google-maps","arcgis"].includes(e.toolType)}clearMeasurementData(){this.areaFinderInstance&&this.areaFinderInstance.clearShapes(),window.arcGISTool&&window.arcGISTool.clearMeasurements&&window.arcGISTool.clearMeasurements()}showSuccessMessage(e="Thank You!",t="success"){const r=document.querySelector(".success-message");r&&r.remove();const a=document.createElement("div");a.className="success-message alert alert-"+("success"===t?"success":"warning"),a.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: ${"success"===t?"#d4edda":"#fff3cd"};\n            color: ${"success"===t?"#155724":"#856404"};\n            padding: 1rem 1.5rem;\n            border-radius: 8px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            z-index: 10000;\n            border: 1px solid ${"success"===t?"#c3e6cb":"#ffeaa7"};\n            max-width: 400px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        `,a.innerHTML=`\n            <div style="display: flex; align-items: center; justify-content: space-between;">\n                <div>\n                    <h4 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; font-weight: 600;">${"success"===t?"‚úÖ ":"‚ö†Ô∏è "}${e}</h4>\n                    <p style="margin: 0; font-size: 0.9rem;">\n                        ${"success"===t?"Your estimate request has been submitted successfully. We'll contact you within 2 business hours with a detailed quote.":"Your form has been submitted. If you don't hear from us within 24 hours, please call us directly."}\n                    </p>\n                </div>\n                <button onclick="this.parentElement.parentElement.remove()" \n                        style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: inherit; margin-left: 1rem;">√ó</button>\n            </div>\n        `,document.body.appendChild(a),setTimeout(()=>{a.parentElement&&a.remove()},8e3),void 0!==n&&n.fromTo(a,{x:400,opacity:0},{x:0,opacity:1,duration:.5,ease:"back.out(1.7)"})}initLoadingAnimation(){const e=document.createElement("div");e.className="loading-overlay show",e.innerHTML='\n            <div class="loading-spinner"></div>\n        ',document.body.appendChild(e),window.addEventListener("load",()=>{setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>{e.remove()},300)},500)})}initRevealOnScroll(){[{selector:".service-card",class:"reveal stagger-1"},{selector:".gallery-item",class:"reveal-scale stagger-2"},{selector:".team-member",class:"reveal-left stagger-3"},{selector:".contact-method",class:"reveal-right stagger-1"},{selector:".cert-category",class:"reveal stagger-2"}].forEach(({selector:e,class:t})=>{document.querySelectorAll(e).forEach((e,n)=>{e.classList.add("reveal"),t.includes("stagger")&&e.classList.add("stagger-"+(n%6+1)),t.includes("reveal-left")?e.classList.add("reveal-left"):t.includes("reveal-right")?e.classList.add("reveal-right"):t.includes("reveal-scale")&&e.classList.add("reveal-scale")})});const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("revealed")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right, .reveal-scale").forEach(t=>{e.observe(t)})}initConversionOptimizations(){const e=document.getElementById("contact-form");if(e){const t=document.createElement("div");t.className="form-progress",t.innerHTML='<div class="form-progress-bar"></div>',e.insertBefore(t,e.firstChild);const n=e.querySelectorAll("input[required], select[required], textarea[required]"),r=t.querySelector(".form-progress-bar");n.forEach(e=>{e.addEventListener("input",()=>{this.updateFormProgress(n,r)}),e.addEventListener("change",()=>{this.updateFormProgress(n,r)})})}this.addUrgencyIndicators(),this.trackUserEngagement()}updateFormProgress(e,t){const n=Array.from(e).filter(e=>"email"===e.type?e.value&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value):e.value&&""!==e.value.trim()).length/e.length*100;t.style.width=`${n}%`,e.forEach(e=>{const t=e.closest(".form-group");e.value&&""!==e.value.trim()?"email"!==e.type||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)?(t.classList.remove("error"),t.classList.add("success")):(t.classList.remove("success"),t.classList.add("error")):t.classList.remove("success","error")})}createStickyCTA(){const e=document.createElement("div");e.className="sticky-cta",e.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            background: var(--safety-yellow);\n            color: var(--asphalt-dark);\n            padding: var(--spacing-md) var(--spacing-lg);\n            border-radius: 25px;\n            box-shadow: var(--shadow-lg);\n            z-index: 1000;\n            font-family: var(--font-primary);\n            font-weight: 600;\n            cursor: pointer;\n            transform: translateY(100px);\n            transition: var(--transition);\n        ",e.innerHTML="\n            üìû Call for Free Quote: (555) 123-PAVE\n        ",e.addEventListener("click",()=>{window.location.href="tel:5551237283"}),document.body.appendChild(e);const t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting?e.style.transform="translateY(100px)":e.style.transform="translateY(0)"})},{threshold:.1}),n=document.getElementById("hero");n&&t.observe(n)}addUrgencyIndicators(){const e=document.querySelector(".emergency-service");if(e){const t=document.createElement("div");t.style.cssText="\n                background: rgba(255, 255, 255, 0.1);\n                padding: var(--spacing-sm);\n                border-radius: var(--border-radius);\n                margin-top: var(--spacing-md);\n                font-size: 14px;\n                text-align: center;\n            ",t.innerHTML="‚ö° Average response time: 30 minutes",e.appendChild(t)}this.addSocialProof()}addSocialProof(){const e=document.querySelector(".hero-content");if(e){const t=document.createElement("div");t.className="social-proof",t.style.cssText="\n                margin-top: var(--spacing-lg);\n                padding: var(--spacing-md);\n                background: rgba(255, 255, 255, 0.1);\n                border-radius: var(--border-radius);\n                text-align: center;\n                font-size: 14px;\n            ",t.innerHTML="\n                ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Rated 4.9/5 by 200+ customers | üèÜ BBB A+ Rating\n            ",e.appendChild(t)}}trackUserEngagement(){window.addEventListener("scroll",()=>{Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100)>=50&&!this.hasShownScrollOffer&&(this.showScrollOffer(),this.hasShownScrollOffer=!0)});let e=0;setInterval(()=>{e+=1,e>=120&&!this.hasShownTimeOffer&&(this.showTimeOffer(),this.hasShownTimeOffer=!0)},1e3),document.addEventListener("mouseleave",e=>{e.clientY<0&&!this.hasShownExitIntent&&(this.showExitIntentOffer(),this.hasShownExitIntent=!0)})}showScrollOffer(){this.showNotification("üì± Still browsing? Get a free quote in under 2 minutes!","info",()=>{document.getElementById("contact-form").scrollIntoView({behavior:"smooth"})})}showTimeOffer(){this.showNotification("‚è∞ Limited Time: Free site consultation with any quote request!","warning")}showExitIntentOffer(){this.showNotification("üöÄ Wait! Get 10% off your first project - Call now: (555) 123-PAVE","success",()=>{window.location.href="tel:5551237283"})}initInteractiveFeatures(){document.querySelectorAll(".gallery-item").forEach(e=>{e.addEventListener("click",()=>{this.openGalleryModal(e)})}),document.querySelectorAll(".cert-icon").forEach(e=>{const t=e.closest("li");t&&(t.classList.add("tooltip"),t.setAttribute("data-tooltip","Click for more information"))}),document.querySelectorAll(".service-card").forEach(e=>{const t=e.querySelector(".btn");t&&t.addEventListener("click",t=>{t.preventDefault(),this.prefilleForm(e)})})}openGalleryModal(e){const t=e.querySelector("img"),n=e.querySelector(".gallery-info");if(!t)return;const r=document.createElement("div");r.className="modal show",r.innerHTML=`\n            <div class="modal-content">\n                <img src="${t.src}" alt="${t.alt}" style="width: 100%; border-radius: var(--border-radius);">\n                <h3 style="margin: var(--spacing-lg) 0 var(--spacing-md);">${n?n.querySelector("h4").textContent:"Project Gallery"}</h3>\n                <p style="margin-bottom: var(--spacing-lg);">${n?n.querySelector("p").textContent:""}</p>\n                <div style="text-align: center;">\n                    <button class="btn btn-primary" onclick="this.closest('.modal').remove()">Close</button>\n                    <button class="btn btn-secondary" onclick="document.getElementById('contact-form').scrollIntoView({behavior: 'smooth'}); this.closest('.modal').remove();" style="margin-left: var(--spacing-md);">Get Similar Quote</button>\n                </div>\n            </div>\n        `,r.addEventListener("click",e=>{e.target===r&&r.remove()}),document.body.appendChild(r)}prefilleForm(e){const t=e.querySelector("h3").textContent,n=document.getElementById("service-type");if(n){const e={"Residential Paving":"residential","Commercial Paving":"commercial","Maintenance Services":"maintenance","Custom Solutions":"custom"}[t];e&&(n.value=e,n.dispatchEvent(new Event("change")))}document.getElementById("contact-form").scrollIntoView({behavior:"smooth"}),this.showNotification(`Form pre-filled for ${t} services!`,"success")}initClickToCall(){document.querySelectorAll('a[href^="tel:"]').forEach(e=>{e.addEventListener("click",()=>{this.trackPhoneClick(e.href)})});document.querySelectorAll(".method-info, .hero-subtitle").forEach(e=>{const t=e.textContent,n=/\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})/;n.test(t)&&(e.style.cursor="pointer",e.style.textDecoration="underline",e.addEventListener("click",()=>{const e=t.match(n)[0];window.location.href=`tel:${e.replace(/\D/g,"")}`}))})}trackPhoneClick(e){console.log("Phone click tracked:",e)}initEmergencyServiceHighlight(){const e=(new Date).getHours(),t=e>=7&&e<=19;document.querySelectorAll(".contact-method.emergency").forEach(e=>{if(!t){e.style.order="-1",e.style.transform="scale(1.05)";const t=document.createElement("div");t.style.cssText="\n                    position: absolute;\n                    top: -10px;\n                    right: -10px;\n                    background: var(--warning-amber);\n                    color: var(--asphalt-dark);\n                    padding: var(--spacing-xs) var(--spacing-sm);\n                    border-radius: 15px;\n                    font-size: 12px;\n                    font-weight: 700;\n                    animation: pulse 2s infinite;\n                ",t.textContent="AFTER HOURS",e.style.position="relative",e.appendChild(t)}})}initNotificationSystem(){const e=document.createElement("div");e.id="notification-container",e.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            display: flex;\n            flex-direction: column;\n            gap: var(--spacing-md);\n        ",document.body.appendChild(e)}showNotification(e,t="info",n=null){const r=document.getElementById("notification-container");if(!r)return;const a=document.createElement("div");a.className=`notification ${t} show`,a.innerHTML=`\n            <div style="display: flex; align-items: center; justify-content: space-between;">\n                <span>${e}</span>\n                <button onclick="this.closest('.notification').remove()" style="background: none; border: none; color: inherit; font-size: 18px; cursor: pointer; margin-left: var(--spacing-md);">&times;</button>\n            </div>\n        `,n&&(a.style.cursor="pointer",a.addEventListener("click",n)),r.appendChild(a),setTimeout(()=>{a.remove()},5e3)}initLocationMaps(){try{this.locationMaps=new I}catch(e){console.error("Error initializing location maps:",e)}}initServiceWorker(){"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&this.showUpdateNotification()})})}).catch(e=>{console.log("Service Worker registration failed:",e)})}):console.log("Service Worker not supported")}showUpdateNotification(){const e=document.createElement("div");e.className="update-notification",e.style.cssText="\n            position: fixed;\n            top: 20px;\n            left: 50%;\n            transform: translateX(-50%);\n            background: #2196F3;\n            color: white;\n            padding: 1rem 2rem;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 10001;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            display: flex;\n            align-items: center;\n            gap: 1rem;\n        ",e.innerHTML='\n            <span>üöÄ A new version is available!</span>\n            <button onclick="window.location.reload()" \n                    style="background: white; color: #2196F3; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-weight: 600;">Update</button>\n            <button onclick="this.parentElement.remove()" \n                    style="background: transparent; color: white; border: 1px solid white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">Later</button>\n        ',document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)}initTestimonialReadMore(){const e=document.querySelectorAll(".testimonial-card");e.forEach(e=>{const t=e.querySelector("blockquote"),n=e.querySelector(".read-more-btn");if(!t||!n)return;if(t.scrollHeight>120){e.classList.add("testimonial-truncated"),n.textContent="Read More",this.isTouchDevice()&&e.classList.add("show-read-more"),n.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();e.classList.contains("testimonial-expanded")?(e.classList.remove("testimonial-expanded"),e.classList.add("testimonial-truncated"),n.textContent="Read More",setTimeout(()=>{var t;const n=e.offsetTop-((null==(t=document.querySelector("header"))?void 0:t.offsetHeight)||0)-20;window.scrollTo({top:n,behavior:"smooth"})},200)):(e.classList.remove("testimonial-truncated"),e.classList.add("testimonial-expanded"),n.textContent="Read Less",setTimeout(()=>{var t;const n=e.getBoundingClientRect(),r=(null==(t=document.querySelector("header"))?void 0:t.offsetHeight)||0;if(n.top<r+10){const t=e.offsetTop-r-20;window.scrollTo({top:t,behavior:"smooth"})}},300))}),n.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.click())});let t=0;n.addEventListener("touchstart",e=>{t=Date.now()}),n.addEventListener("touchend",e=>{Date.now()-t<500&&(e.preventDefault(),n.click())})}else e.classList.remove("testimonial-truncated"),n.style.display="none"});const t=new IntersectionObserver(e=>{e.forEach(e=>{if(!e.isIntersecting){const t=e.target,n=t.querySelector(".read-more-btn");t.classList.contains("testimonial-expanded")&&(t.classList.remove("testimonial-expanded"),t.classList.add("testimonial-truncated"),n&&(n.textContent="Read More"))}})},{threshold:.1,rootMargin:"-50px 0px"});e.forEach(e=>{t.observe(e)})}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}setupIntersectionObserver(e){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(!e.isIntersecting){const t=e.target;if(t.classList.contains("testimonial-expanded")){t.classList.remove("testimonial-expanded"),t.classList.add("testimonial-truncated");t.querySelector(".read-more-btn").textContent="Read More",t.removeAttribute("data-expanded")}}})},{threshold:.1});e.forEach(e=>{t.observe(e)})}}document.addEventListener("DOMContentLoaded",()=>{new sr});const or={},ir=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in or)return;or[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};class lr{constructor(){this.validationRules={area:{min:50,max:5e5,reasonable:{residential:{min:100,max:1e4},commercial:{min:1e3,max:1e5},maintenance:{min:50,max:5e4},custom:{min:50,max:5e5},emergency:{min:50,max:2e4}}},perimeter:{min:28,max:1e4}},this.measurementToolInstructions={"google-maps":{title:"Google Maps Area Finder",description:"Easy-to-use 2D measurement with satellite imagery",instructions:["Search for your project location using the address search","Click the drawing tools to select polygon, rectangle, or circle","Click on the map to start drawing your area","For polygons: Click to add points, click first point again to close","For rectangles: Click and drag to create the rectangle","For circles: Click center point, then drag to set radius",'Use the "Calculate Area" button to get measurements'],benefits:["Simple and intuitive interface","Real satellite imagery for accurate placement","Multiple drawing tools (polygon, rectangle, circle)","Automatic area and perimeter calculation","Address search for quick location finding"],limitations:["Limited to 2D measurements only","Cannot account for elevation changes","May be less accurate for complex terrain"]},"arcgis-3d":{title:"ArcGIS 3D Measurement Tool",description:"Advanced 3D measurement with terrain analysis",instructions:["Wait for the 3D scene to load completely","Use the navigation controls to position the view",'Click the "Area Measurement" tool in the toolbar',"Click on the terrain to start measuring","Continue clicking to add measurement points","Double-click to finish the measurement","View results in the measurement panel"],benefits:["True 3D measurements with elevation data","Terrain-aware calculations for slopes and hills","More accurate for complex topography","Professional-grade measurement precision","Automatic calculation of surface area on slopes"],limitations:["Requires modern browser with WebGL support","Longer loading time for 3D scene","May require more computer resources","Steeper learning curve for new users"]}},this.helpText={serviceTypes:{residential:"Driveways, walkways, patios, and small parking areas for homes",commercial:"Parking lots, loading docks, and business access areas",maintenance:"Crack sealing, sealcoating, striping, and repair work",custom:"Specialized paving projects requiring unique solutions",emergency:"Urgent repairs for safety hazards or damage"},measurementTools:{when3DRecommended:["Properties with significant elevation changes","Sloped driveways or parking areas","Terraced or multi-level projects","Properties near hills or valleys","When precise surface area is critical"],when2DAcceptable:["Flat or nearly flat surfaces","Simple rectangular areas","Quick estimates for planning","Basic residential driveways","Small maintenance projects"]}},this.tooltips={measurement3D:"Use 3D measurement for slopes and complex terrain to get accurate surface area calculations. This is especially important for driveways on hills or uneven ground.",areaValidation:"Area measurements help us provide accurate estimates and ensure we bring the right equipment and materials for your project.",serviceTypeSelection:"Select the service type that best matches your project. This helps us provide appropriate pricing and timeline estimates.",addressImportant:"Project address helps us factor in local conditions, permit requirements, and travel time for accurate estimates.",timeline:"Timeline preferences help us schedule your project efficiently and set realistic expectations for completion."}}validateAreaMeasurement(e,t="residential",n="sqft"){const r={isValid:!0,warnings:[],errors:[],recommendations:[]};if(!e||e<=0)return r.isValid=!1,r.errors.push("Area measurement is required and must be greater than 0"),r;const a=this.convertToSquareFeet(e,n);a<this.validationRules.area.min&&(r.isValid=!1,r.errors.push(`Area is below minimum of ${this.validationRules.area.min} sq ft`)),a>this.validationRules.area.max&&(r.isValid=!1,r.errors.push(`Area exceeds maximum of ${this.validationRules.area.max.toLocaleString()} sq ft`));const s=this.validationRules.area.reasonable[t];return s&&(a<s.min&&r.warnings.push(`Area seems small for ${t} projects. Typical range is ${s.min.toLocaleString()}-${s.max.toLocaleString()} sq ft`),a>s.max&&(r.warnings.push(`Area seems large for ${t} projects. Typical range is ${s.min.toLocaleString()}-${s.max.toLocaleString()} sq ft`),r.recommendations.push("Consider breaking large projects into phases"))),a>5e3&&r.recommendations.push("For large areas, consider using 3D measurement tools for better accuracy"),a>2e4&&r.recommendations.push("Large commercial projects may require site survey for final measurements"),r}validatePerimeterMeasurement(e,t,n="ft"){const r={isValid:!0,warnings:[],errors:[]};if(!e||e<=0)return r.warnings.push("Perimeter measurement not provided - using area-based estimate"),r;const a=this.convertToFeet(e,n);if(a<this.validationRules.perimeter.min&&r.warnings.push(`Perimeter seems unusually small (${a} ft)`),a>this.validationRules.perimeter.max&&r.warnings.push(`Perimeter seems unusually large (${a.toLocaleString()} ft)`),t){const e=this.convertToSquareFeet(t,"ft"===n?"sqft":"sqm"),s=a/Math.sqrt(e);s>8&&r.warnings.push("Area shape appears very elongated or irregular"),s<2&&r.warnings.push("Area shape appears very compact - please verify measurements")}return r}getMeasurementToolInstructions(e){return this.measurementToolInstructions[e]||null}getHelpText(e,t=null){return t&&this.helpText[e]&&this.helpText[e][t]?this.helpText[e][t]:this.helpText[e]||null}getTooltip(e){return this.tooltips[e]||null}recommendMeasurementTool(e,t="",n=!1){const r={primary:"google-maps",secondary:"arcgis-3d",reasoning:[]},a=["slope","hill","sloped","steep","elevation","grade","incline"].some(e=>t.toLowerCase().includes(e));return(n||a)&&(r.primary="arcgis-3d",r.secondary="google-maps",r.reasoning.push("3D measurement recommended for sloped terrain")),"commercial"===e&&(r.reasoning.push("Commercial projects benefit from precise 3D measurements"),"google-maps"===r.primary&&r.reasoning.push("Consider 3D measurement for complex layouts")),"emergency"===e&&(r.primary="google-maps",r.secondary="arcgis-3d",r.reasoning.push("Quick 2D measurement suitable for emergency repairs")),r}validateForm(e){const t={isValid:!0,errors:[],warnings:[],recommendations:[]};if(["firstName","lastName","email","phone","serviceType"].forEach(n=>{e[n]&&""!==e[n].trim()||(t.isValid=!1,t.errors.push(`${this.formatFieldName(n)} is required`))}),e.email&&!this.isValidEmail(e.email)&&(t.isValid=!1,t.errors.push("Please enter a valid email address")),e.phone&&!this.isValidPhone(e.phone)&&t.warnings.push("Phone number format could not be verified"),e.areaData){const n=this.validateAreaMeasurement(e.areaData.area||e.areaData.areaInSquareFeet,e.serviceType,"sqft");if(t.isValid=t.isValid&&n.isValid,t.errors.push(...n.errors),t.warnings.push(...n.warnings),t.recommendations.push(...n.recommendations),e.areaData.perimeter){const n=this.validatePerimeterMeasurement(e.areaData.perimeter,e.areaData.area||e.areaData.areaInSquareFeet,"ft");t.warnings.push(...n.warnings),t.errors.push(...n.errors)}}const n=this.recommendMeasurementTool(e.serviceType,e.projectDescription);return t.recommendations.push(...n.reasoning),t}getValidationMessage(e){let t="";return e.errors.length>0&&(t+=`Errors: ${e.errors.join(", ")}\n`),e.warnings.length>0&&(t+=`Warnings: ${e.warnings.join(", ")}\n`),e.recommendations.length>0&&(t+=`Recommendations: ${e.recommendations.join(", ")}`),t.trim()}convertToSquareFeet(e,t){return e*({sqft:1,sqm:10.7639,acres:43560}[t]||1)}convertToFeet(e,t){return e*({ft:1,m:3.28084,meters:3.28084}[t]||1)}formatFieldName(e){return e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){const t=e.replace(/\D/g,"");return t.length>=10&&/^[\+]?[1-9][\d]{0,15}$/.test(t)}}class cr{constructor(){this.rates={residential:{base:3.5,premium:4.5},commercial:{base:4,premium:5}},this.modifiers={complexity:{simple:1,moderate:1.2,complex:1.5},accessibility:{easy:1,moderate:1.15,difficult:1.3},season:{peak:1.1,regular:1,offSeason:.9},urgency:{standard:1,rush:1.25,emergency:1.5}},this.materialCosts={asphalt:2.5,concrete:4,sealcoating:.5,striping:.25},this.laborRates={skilled:45,semiskilled:35,general:25}}calculateEstimate(e,t,n={}){const r={baseCost:0,materialCost:0,laborCost:0,totalCost:0,timeline:{days:0,startDate:null,endDate:null},breakdown:{}},{base:a,premium:s}=this.rates[t];r.baseCost=e*(n.premium?s:a);let o=r.baseCost;return n.complexity&&(o*=this.modifiers.complexity[n.complexity]||1),n.accessibility&&(o*=this.modifiers.accessibility[n.accessibility]||1),n.season&&(o*=this.modifiers.season[n.season]||1),n.urgency&&(o*=this.modifiers.urgency[n.urgency]||1),n.discount&&n.discount>0&&n.discount<1&&(o*=1-n.discount),r.baseCost=o,r.materialCost=this.calculateMaterialCost(e,n.materials||[]),r.laborCost=this.calculateLaborCost(e,t,n),r.timeline=this.calculateTimeline(e,t,n),r.totalCost=r.baseCost+r.materialCost+r.laborCost,r.breakdown={baseRate:n.premium?s:a,squareFeet:e,modifiers:this.getAppliedModifiers(n),materials:n.materials||[],laborHours:this.calculateLaborHours(e,t,n)},r}calculateMaterialCost(e,t){let n=0;return t.forEach(t=>{const r=this.materialCosts[t.type]||0,a=t.coverage||e,s=t.quantity||1;n+=r*a*s}),n}calculateLaborCost(e,t,n){const r=this.calculateLaborHours(e,t,n),a=n.skillLevel||"semiskilled";return r*(this.laborRates[a]||this.laborRates.semiskilled)}calculateLaborHours(e,t,n){let r=e*({residential:.02,commercial:.015}[t]||.02);return"complex"===n.complexity?r*=1.5:"moderate"===n.complexity&&(r*=1.2),"difficult"===n.accessibility?r*=1.3:"moderate"===n.accessibility&&(r*=1.15),Math.max(r,4)}calculateTimeline(e,t,n){const r=this.calculateLaborHours(e,t,n),a=n.hoursPerDay||8,s=Math.ceil(r/a),o=Math.ceil(.2*s),i=s+o,l=n.startDate?new Date(n.startDate):new Date,c=new Date(l);return c.setDate(l.getDate()+i),{days:i,workDays:s,bufferDays:o,startDate:l.toISOString().split("T")[0],endDate:c.toISOString().split("T")[0]}}getAppliedModifiers(e){const t={};return e.complexity&&(t.complexity={type:e.complexity,multiplier:this.modifiers.complexity[e.complexity]}),e.accessibility&&(t.accessibility={type:e.accessibility,multiplier:this.modifiers.accessibility[e.accessibility]}),e.season&&(t.season={type:e.season,multiplier:this.modifiers.season[e.season]}),e.urgency&&(t.urgency={type:e.urgency,multiplier:this.modifiers.urgency[e.urgency]}),e.discount&&(t.discount={rate:e.discount,multiplier:1-e.discount}),t}getAvailableOptions(){return{serviceTypes:Object.keys(this.rates),complexityLevels:Object.keys(this.modifiers.complexity),accessibilityLevels:Object.keys(this.modifiers.accessibility),seasons:Object.keys(this.modifiers.season),urgencyLevels:Object.keys(this.modifiers.urgency),materialTypes:Object.keys(this.materialCosts),skillLevels:Object.keys(this.laborRates)}}}class dr{constructor(e){this.container=document.getElementById(e),this.validationService=new lr,this.estimateService=new cr,this.formData={},this.measurementData=null,this.serviceType=document.getElementById("service-type"),this.squareFootage=document.getElementById("square-footage"),this.isSubmitting=!1,this.init()}init(){this.render(),this.attachEventListeners(),this.loadMeasurementData(),this.updateSubmitButtonState()}render(){this.container.innerHTML=`\n            <div class="estimate-form-container">\n                <div class="form-header">\n                    <h2>Request Your Free Estimate</h2>\n                    <p class="form-subtitle">Complete the form below to receive a detailed estimate for your paving project</p>\n                </div>\n\n                <form id="estimate-form" class="estimate-form" novalidate>\n                    \x3c!-- Personal Information Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">üë§</span>\n                            Personal Information\n                        </h3>\n                        \n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="firstName" class="form-label">\n                                    First Name <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="firstName" \n                                    name="firstName" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="firstName-error"\n                                >\n                                <div class="error-message" id="firstName-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="lastName" class="form-label">\n                                    Last Name <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="lastName" \n                                    name="lastName" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="lastName-error"\n                                >\n                                <div class="error-message" id="lastName-error"></div>\n                            </div>\n                        </div>\n\n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="email" class="form-label">\n                                    Email Address <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="email" \n                                    id="email" \n                                    name="email" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="email-error"\n                                    placeholder="your@email.com"\n                                >\n                                <div class="error-message" id="email-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="phone" class="form-label">\n                                    Phone Number <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="tel" \n                                    id="phone" \n                                    name="phone" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="phone-error"\n                                    placeholder="(555) 123-4567"\n                                >\n                                <div class="error-message" id="phone-error"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Project Details Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">üèóÔ∏è</span>\n                            Project Details\n                        </h3>\n                        \n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="serviceType" class="form-label">\n                                    Service Type <span class="required">*</span>\n                                    <span class="tooltip" data-tooltip="${this.validationService.getTooltip("serviceTypeSelection")}">‚ÑπÔ∏è</span>\n                                </label>\n                                <select \n                                    id="serviceType" \n                                    name="serviceType" \n                                    class="form-select" \n                                    required\n                                    aria-describedby="serviceType-error"\n                                >\n                                    <option value="">Select a service type</option>\n                                    <option value="residential">Residential Paving</option>\n                                    <option value="commercial">Commercial Paving</option>\n                                    <option value="maintenance">Maintenance Services</option>\n                                    <option value="custom">Custom Projects</option>\n                                    <option value="emergency">Emergency Repairs</option>\n                                </select>\n                                <div class="error-message" id="serviceType-error"></div>\n                                <div class="help-text" id="serviceType-help"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="timeline" class="form-label">\n                                    Preferred Timeline\n                                    <span class="tooltip" data-tooltip="${this.validationService.getTooltip("timeline")}">‚ÑπÔ∏è</span>\n                                </label>\n                                <input \n                                    type="date" \n                                    id="timeline" \n                                    name="timeline" \n                                    class="form-input"\n                                    min="${(new Date).toISOString().split("T")[0]}"\n                                    aria-describedby="timeline-error"\n                                >\n                                <div class="error-message" id="timeline-error"></div>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label for="projectDescription" class="form-label">\n                                Project Description\n                            </label>\n                            <textarea \n                                id="projectDescription" \n                                name="projectDescription" \n                                class="form-textarea" \n                                rows="4"\n                                placeholder="Please describe your paving project in detail..."\n                                aria-describedby="projectDescription-error"\n                            ></textarea>\n                            <div class="error-message" id="projectDescription-error"></div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Property Address Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">üìç</span>\n                            Property Address\n                            <span class="tooltip" data-tooltip="${this.validationService.getTooltip("addressImportant")}">‚ÑπÔ∏è</span>\n                        </h3>\n                        \n                        <div class="form-group">\n                            <label for="streetAddress" class="form-label">\n                                Street Address <span class="required">*</span>\n                            </label>\n                            <input \n                                type="text" \n                                id="streetAddress" \n                                name="streetAddress" \n                                class="form-input" \n                                required\n                                placeholder="123 Main Street"\n                                aria-describedby="streetAddress-error"\n                            >\n                            <div class="error-message" id="streetAddress-error"></div>\n                        </div>\n\n                        <div class="form-row">\n                            <div class="form-group">\n                                <label for="city" class="form-label">\n                                    City <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="city" \n                                    name="city" \n                                    class="form-input" \n                                    required\n                                    aria-describedby="city-error"\n                                >\n                                <div class="error-message" id="city-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="state" class="form-label">\n                                    State <span class="required">*</span>\n                                </label>\n                                <select \n                                    id="state" \n                                    name="state" \n                                    class="form-select" \n                                    required\n                                    aria-describedby="state-error"\n                                >\n                                    <option value="">Select State</option>\n                                    <option value="OH">Ohio</option>\n                                    <option value="KY">Kentucky</option>\n                                    <option value="WV">West Virginia</option>\n                                    <option value="PA">Pennsylvania</option>\n                                    <option value="IN">Indiana</option>\n                                    <option value="MI">Michigan</option>\n                                </select>\n                                <div class="error-message" id="state-error"></div>\n                            </div>\n                            \n                            <div class="form-group">\n                                <label for="zipCode" class="form-label">\n                                    ZIP Code <span class="required">*</span>\n                                </label>\n                                <input \n                                    type="text" \n                                    id="zipCode" \n                                    name="zipCode" \n                                    class="form-input" \n                                    required\n                                    pattern="[0-9]{5}(-[0-9]{4})?"\n                                    placeholder="12345"\n                                    aria-describedby="zipCode-error"\n                                >\n                                <div class="error-message" id="zipCode-error"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Map Measurement Data Section --\x3e\n                    <div class="form-section">\n                        <h3 class="section-title">\n                            <span class="section-icon">üìê</span>\n                            Area Measurement\n                            <span class="tooltip" data-tooltip="${this.validationService.getTooltip("areaValidation")}">‚ÑπÔ∏è</span>\n                        </h3>\n                        \n                        <div class="measurement-status" id="measurement-status">\n                            <div class="measurement-requirement">\n                                <strong>Use the map below to measure your project area</strong>\n                                <p>Draw the area on the map to get an accurate measurement for your estimate.</p>\n                            </div>\n                        </div>\n\n                        \x3c!-- Map Container --\x3e\n                        <div class="map-container">\n                            \x3c!-- Tool Selection --\x3e\n                            <div class="tool-selection">\n                                <button type="button" class="toggle-btn active" data-tool="arcgis-3d" id="arcgis-toggle">\n                                    üó∫Ô∏è ArcGIS 3D Measurement\n                                </button>\n                                <button type="button" class="toggle-btn" data-tool="google-maps" id="google-maps-toggle">\n                                    üìç Google Maps Measurement\n                                </button>\n                            </div>\n\n                            \x3c!-- ArcGIS Container (Default/Active) --\x3e\n                            <div id="arcgis-container" class="map-placeholder" style="display: block;">\n                                <div id="arcgis-scene-view" style="height: 400px; width: 100%; position: relative;">\n                                    <div id="arcgis-placeholder" style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f5f5f5; border-radius: 8px; flex-direction: column; gap: 1rem;">\n                                        <div class="loading-spinner" style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #ffd700; border-radius: 50%; animation: spin 1s linear infinite;"></div>\n                                        <p style="color: #6b6b6b; font-size: 16px; margin: 0;">Loading ArcGIS 3D scene...</p>\n                                    </div>\n                                </div>\n                                <div id="arcgis-results" class="measurement-results" style="display: none; margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">\n                                    <h4 style="margin: 0 0 0.5rem 0; color: #2c2c2c; font-size: 18px;">Measurement Results</h4>\n                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Line Measurement:</span>\n                                            <span id="line-result" style="color: #007bff; font-weight: 600;">0 m</span>\n                                        </div>\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Area Measurement:</span>\n                                            <span id="area-result" style="color: #28a745; font-weight: 600;">0 m¬≤</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            \x3c!-- Google Maps Container (Hidden by default) --\x3e\n                            <div id="google-maps-container" class="map-placeholder" style="display: none;">\n                                <div id="google-maps-measurement" style="height: 400px; width: 100%; position: relative;">\n                                    <p style="text-align: center; padding: 2rem; color: #6b6b6b;">Google Maps measurement tool will load here</p>\n                                </div>\n                                <div id="google-maps-results" class="measurement-results" style="display: none; margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">\n                                    <h4 style="margin: 0 0 0.5rem 0; color: #2c2c2c; font-size: 18px;">Measurement Results</h4>\n                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Area:</span>\n                                            <span id="google-area-result" style="color: #28a745; font-weight: 600;">0 sq ft</span>\n                                        </div>\n                                        <div class="result-item">\n                                            <span style="font-weight: 600; color: #495057;">Perimeter:</span>\n                                            <span id="google-perimeter-result" style="color: #007bff; font-weight: 600;">0 ft</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Hidden fields for measurement data --\x3e\n                        <input type="hidden" id="areaCoordinates" name="areaCoordinates">\n                        <input type="hidden" id="calculatedSquareFootage" name="calculatedSquareFootage">\n                        <input type="hidden" id="measurementTool" name="measurementTool">\n                        <input type="hidden" id="measurementTimestamp" name="measurementTimestamp">\n                    </div>\n\n                    \x3c!-- Form Actions --\x3e\n                    <div class="form-actions">\n                        <button type="button" class="btn btn-outline" id="reset-form">\n                            Reset Form\n                        </button>\n                        <button type="submit" class="btn btn-primary" id="submit-estimate" disabled>\n                            <span class="btn-text">Request Estimate</span>\n                            <span class="btn-loading" style="display: none;">\n                                <span class="spinner"></span> Processing...\n                            </span>\n                        </button>\n                        <button type="button" class="btn btn-secondary" id="get-quote" disabled style="margin-left: 1rem;">\n                            <span class="btn-text">Get Quick Quote</span>\n                            <span class="btn-loading" style="display: none;">\n                                <span class="spinner"></span> Calculating...\n                            </span>\n                        </button>\n                    </div>\n                    \n                    \x3c!-- Pricing Display Section --\x3e\n                    <div class="pricing-display" id="pricing-display" style="display: none;">\n                        <div class="pricing-header">\n                            <h3>Estimated Pricing</h3>\n                            <p class="pricing-disclaimer">*This is an estimate. Final pricing may vary based on site conditions and additional requirements.</p>\n                        </div>\n                        <div class="pricing-details" id="pricing-details">\n                            \x3c!-- Pricing information will be populated here --\x3e\n                        </div>\n                    </div>\n\n                    \x3c!-- Form Validation Summary --\x3e\n                    <div class="validation-summary" id="validation-summary" style="display: none;">\n                        <h4>Please correct the following errors:</h4>\n                        <ul id="validation-errors"></ul>\n                    </div>\n                </form>\n            </div>\n        `}attachEventListeners(){const e=document.getElementById("estimate-form");document.getElementById("submit-estimate");const t=document.getElementById("get-quote"),n=document.getElementById("reset-form"),r=document.getElementById("serviceType"),a=document.getElementById("arcgis-toggle"),s=document.getElementById("google-maps-toggle");e.addEventListener("submit",e=>this.handleSubmit(e)),t&&t.addEventListener("click",()=>this.handleGetQuote()),n.addEventListener("click",()=>this.resetForm()),r.addEventListener("change",e=>this.handleServiceTypeChange(e)),e.addEventListener("input",e=>this.handleFieldValidation(e)),e.addEventListener("blur",e=>this.handleFieldValidation(e),!0),a&&a.addEventListener("click",()=>this.toggleMeasurementTool("arcgis-3d")),s&&s.addEventListener("click",()=>this.toggleMeasurementTool("google-maps"));document.getElementById("phone").addEventListener("input",e=>this.formatPhoneNumber(e)),setTimeout(()=>this.initializeMeasurementTools(),100)}handleSubmit(e){if(e.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0,this.updateSubmitButtonState(!0);const t=new FormData(e.target),n=Object.fromEntries(t.entries());this.measurementData&&(n.areaData=this.measurementData);const r=this.validationService.validateForm(n);if(!r.isValid)return this.displayValidationErrors(r),this.isSubmitting=!1,void this.updateSubmitButtonState(!1);this.submitForm(n)}async submitForm(e){var t;try{const n=this.estimateService.calculateEstimate((null==(t=e.areaData)?void 0:t.areaInSquareFeet)||0,e.serviceType,{premium:!1,complexity:"moderate",accessibility:"easy",season:"regular",urgency:"standard"}),r={...e,estimate:n,submittedAt:(new Date).toISOString()},a=await fetch("/api/estimates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error("Failed to submit estimate request");const s=await a.json();this.handleSubmitSuccess(s)}catch(n){this.handleSubmitError(n)}finally{this.isSubmitting=!1,this.updateSubmitButtonState(!1)}}handleSubmitSuccess(e){var t,n;this.container.innerHTML=`\n            <div class="success-message">\n                <div class="success-icon">‚úÖ</div>\n                <h2>Estimate Request Submitted Successfully!</h2>\n                <p>Thank you for your interest in our paving services. We've received your request and will contact you within 2 hours.</p>\n                <div class="success-details">\n                    <p><strong>Reference #:</strong> ${e.referenceNumber}</p>\n                    <p><strong>Estimated Project Cost:</strong> $${(null==(n=null==(t=e.estimate)?void 0:t.totalCost)?void 0:n.toLocaleString())||"TBD"}</p>\n                </div>\n                <button type="button" class="btn btn-primary" onclick="window.location.reload()">\n                    Submit Another Request\n                </button>\n            </div>\n        `,ir(async()=>{const{handleFormSubmission:e}=await Promise.resolve().then(()=>E);return{handleFormSubmission:e}},void 0).then(({handleFormSubmission:e})=>{e()})}handleSubmitError(e){console.error("Form submission error:",e);const t=document.createElement("div");t.className="error-alert",t.innerHTML=`\n            <strong>Error:</strong> ${e.message}\n            <button type="button" class="error-close" onclick="this.parentElement.remove()">√ó</button>\n        `,this.container.insertBefore(t,this.container.firstChild)}handleFieldValidation(e){const t=e.target,n=t.name,r=t.value;if(!n)return;const a=document.getElementById(`${n}-error`);if(a&&(a.textContent="",t.classList.remove("error")),!t.hasAttribute("required")||r.trim()){switch(n){case"email":r&&!this.validationService.isValidEmail(r)&&this.showFieldError(t,"Please enter a valid email address");break;case"phone":r&&!this.validationService.isValidPhone(r)&&this.showFieldError(t,"Please enter a valid phone number");break;case"zipCode":r&&!/^\d{5}(-\d{4})?$/.test(r)&&this.showFieldError(t,"Please enter a valid ZIP code")}this.updateSubmitButtonState()}else"blur"===e.type&&this.showFieldError(t,"This field is required")}showFieldError(e,t){const n=document.getElementById(`${e.name}-error`);n&&(n.textContent=t,e.classList.add("error"))}displayValidationErrors(e){const t=document.getElementById("validation-summary"),n=document.getElementById("validation-errors");e.errors.length>0&&(n.innerHTML=e.errors.map(e=>`<li>${e}</li>`).join(""),t.style.display="block",t.scrollIntoView({behavior:"smooth"}))}handleServiceTypeChange(e){const t=e.target.value,n=document.getElementById("serviceType-help");t&&this.validationService.getHelpText("serviceTypes",t)?(n.textContent=this.validationService.getHelpText("serviceTypes",t),n.style.display="block"):n.style.display="none"}formatPhoneNumber(e){let t=e.target.value.replace(/\D/g,"");t.length>=6?t=t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):t.length>=3?t=t.replace(/(\d{3})(\d{3})/,"($1) $2"):t.length>0&&(t=t.replace(/(\d{3})/,"($1")),e.target.value=t}launchMeasurementTool(e){window.open(`/assets/measurement-tools/${e}.html`,"_blank")}loadMeasurementData(){v()&&(this.measurementData=y(),this.updateMeasurementStatus())}updateMeasurementStatus(){const e=document.getElementById("measurement-status");if(this.measurementData&&(this.measurementData.googleMaps||this.measurementData.arcgis)){const t=this.measurementData.googleMaps||this.measurementData.arcgis,n=t.areaInSquareFeet||t.area||0;e.innerHTML=`\n                <div class="measurement-success">\n                    <strong>‚úÖ Area Measured: ${n.toLocaleString()} sq ft</strong>\n                    <p>Using ${"google-maps"===this.measurementData.activeTool?"Google Maps":"ArcGIS 3D"} tool</p>\n                </div>\n            `,document.getElementById("calculatedSquareFootage").value=n,document.getElementById("measurementTool").value=this.measurementData.activeTool,document.getElementById("measurementTimestamp").value=(new Date).toISOString()}}updateSubmitButtonState(e=!1){const t=document.getElementById("submit-estimate"),n=document.getElementById("get-quote"),r=t.querySelector(".btn-text"),a=t.querySelector(".btn-loading"),s=n.querySelector(".btn-text"),o=n.querySelector(".btn-loading");if(e)return r.style.display="none",a.style.display="inline-flex",void(t.disabled=!0);r.style.display="inline",a.style.display="none";const i=this.checkRequiredFields(),l=this.measurementData&&(this.measurementData.googleMaps||this.measurementData.arcgis);t.disabled=!i||!l,n.disabled=!l,l||(s.style.display="inline",o.style.display="none")}checkRequiredFields(){return["firstName","lastName","email","phone","serviceType","streetAddress","city","state","zipCode"].every(e=>{const t=document.getElementById(e);return t&&t.value.trim()})}resetForm(){confirm("Are you sure you want to reset the form? All entered data will be lost.")&&(document.getElementById("estimate-form").reset(),this.measurementData=null,this.updateMeasurementStatus(),this.updateSubmitButtonState(),document.querySelectorAll(".error-message").forEach(e=>e.textContent=""),document.querySelectorAll(".form-input, .form-select, .form-textarea").forEach(e=>{e.classList.remove("error")}),ir(async()=>{const{handleFormReset:e}=await Promise.resolve().then(()=>E);return{handleFormReset:e}},void 0).then(({handleFormReset:e})=>{e()}))}initializeMeasurementTools(){this.loadArcGISMeasurementTool()}toggleMeasurementTool(e){const t=document.getElementById("arcgis-toggle"),n=document.getElementById("google-maps-toggle"),r=document.getElementById("arcgis-container"),a=document.getElementById("google-maps-container");document.querySelectorAll(".toggle-btn").forEach(e=>e.classList.remove("active")),"arcgis-3d"===e?(t.classList.add("active"),r.style.display="block",a.style.display="none",this.arcgisLoaded||this.loadArcGISMeasurementTool()):"google-maps"===e&&(n.classList.add("active"),r.style.display="none",a.style.display="block",this.googleMapsLoaded||this.loadGoogleMapsMeasurementTool()),this.activeMeasurementTool=e}async loadArcGISMeasurementTool(){if(!this.arcgisLoaded)try{this.arcgisLoaded=!0;const e=document.createElement("link");e.rel="stylesheet",e.href="https://js.arcgis.com/4.33/esri/themes/light/main.css",document.head.appendChild(e);const t=document.createElement("script");t.type="module",t.src="https://js.arcgis.com/calcite-components/3.2.1/calcite.esm.js",document.head.appendChild(t);const n=document.createElement("script");n.src="https://js.arcgis.com/4.33/",n.onload=()=>{const e=document.createElement("script");e.type="module",e.src="https://js.arcgis.com/4.33/map-components/",e.onload=()=>{this.initializeArcGISScene()},document.head.appendChild(e)},document.head.appendChild(n)}catch(e){console.error("Error loading ArcGIS:",e),this.showArcGISError(e)}}initializeArcGISScene(){const e=document.getElementById("arcgis-scene-view");document.getElementById("arcgis-placeholder");const t=document.getElementById("arcgis-results"),n=document.getElementById("line-result"),r=document.getElementById("area-result");e.innerHTML='\n            <arcgis-scene item-id="5ce0de673d3b41a3bf3a217942211c4b" style="height: 100%; width: 100%;">\n                <arcgis-zoom position="top-left"></arcgis-zoom>\n                <arcgis-navigation-toggle position="top-left"></arcgis-navigation-toggle>\n                <arcgis-compass position="top-left"></arcgis-compass>\n                <arcgis-expand id="expand-line" position="top-right" group="top-right">\n                    <arcgis-direct-line-measurement-3d></arcgis-direct-line-measurement-3d>\n                </arcgis-expand>\n                <arcgis-expand id="expand-area" position="top-right" group="top-right">\n                    <arcgis-area-measurement-3d></arcgis-area-measurement-3d>\n                </arcgis-expand>\n            </arcgis-scene>\n        ',setTimeout(()=>{const a=e.querySelector("arcgis-scene"),s=e.querySelector("arcgis-direct-line-measurement-3d"),o=e.querySelector("arcgis-area-measurement-3d"),i=e.querySelector("#expand-line"),l=e.querySelector("#expand-area");a&&s&&o&&a.viewOnReady().then(()=>{this.setupArcGISMeasurementObservers(i,l,s,o,n,r,t)})},1e3)}setupArcGISMeasurementObservers(e,t,n,r,a,s,o){new MutationObserver(e=>{e.forEach(e=>{e.target.expanded?(n.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",s.textContent="0 m¬≤",t.expanded||(o.style.display="none"))})}).observe(e,{attributeFilter:["expanded"]});new MutationObserver(t=>{t.forEach(t=>{t.target.expanded?(r.start(),o.style.display="block"):(n.clear(),r.clear(),a.textContent="0 m",s.textContent="0 m¬≤",e.expanded||(o.style.display="none"))})}).observe(t,{attributeFilter:["expanded"]}),n.addEventListener("measure-complete",e=>{e.detail&&e.detail.distance&&(a.textContent=`${e.detail.distance.toFixed(2)} ${e.detail.unit||"m"}`,this.updateProjectSizeFromMeasurement(e.detail,"distance"))}),r.addEventListener("measure-complete",e=>{e.detail&&e.detail.area&&(s.textContent=`${e.detail.area.toFixed(2)} ${e.detail.unit||"m¬≤"}`,this.updateProjectSizeFromMeasurement(e.detail,"area"))})}updateProjectSizeFromMeasurement(e,t){if("area"===t&&e.area){const t=Math.round(10.764*e.area);document.getElementById("calculatedSquareFootage").value=t,document.getElementById("measurementTool").value="arcgis-3d",document.getElementById("measurementTimestamp").value=(new Date).toISOString(),this.measurementData={arcgis:{area:t,areaInSquareFeet:t,coordinates:[],timestamp:(new Date).toISOString()},activeTool:"arcgis-3d"},this.updateMeasurementStatus(),this.updateSubmitButtonState()}}async loadGoogleMapsMeasurementTool(){document.getElementById("google-maps-measurement").innerHTML='<p style="text-align: center; padding: 2rem; color: #28a745;">Google Maps measurement tool coming soon!</p>',this.googleMapsLoaded=!0}showArcGISError(e){const t=document.getElementById("arcgis-placeholder");t&&(t.innerHTML='\n                <div style="text-align: center; padding: 2rem; color: #dc3545;">\n                    <div style="font-size: 48px; margin-bottom: 1rem;">‚ö†Ô∏è</div>\n                    <h3 style="margin-bottom: 1rem; color: #dc3545;">Failed to Load ArcGIS</h3>\n                    <p style="margin-bottom: 1.5rem; color: #6c757d;">Unable to load the 3D measurement tool. This might be due to a network issue or service unavailability.</p>\n                    <button onclick="window.location.reload();" \n                            style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Retry</button>\n                    <p style="margin-top: 1rem; font-size: 0.9rem; color: #6c757d;">Please try refreshing the page or contact us directly for assistance.</p>\n                </div>\n            ')}async handleGetQuote(){if(!this.measurementData||!this.measurementData.googleMaps&&!this.measurementData.arcgis)return void alert("Please measure the project area first using the map tool above.");const e=document.getElementById("get-quote"),t=e.querySelector(".btn-text"),n=e.querySelector(".btn-loading");t.style.display="none",n.style.display="inline-flex",e.disabled=!0;try{const e=document.getElementById("serviceType").value||"residential",t=this.calculatePricing(e);this.displayPricing(t)}catch(r){console.error("Error calculating pricing:",r),alert("Unable to calculate pricing. Please try again.")}finally{t.style.display="inline",n.style.display="none",e.disabled=!1}}calculatePricing(e="residential"){if(!this.measurementData)throw new Error("No measurement data available");const t=this.measurementData.googleMaps||this.measurementData.arcgis,n=t.areaInSquareFeet||t.area||0,r={residential:{asphalt:{min:3.5,max:7,avg:5.25},concrete:{min:6,max:12,avg:9},maintenance:{min:1.5,max:3,avg:2.25}},commercial:{asphalt:{min:4,max:8.5,avg:6.25},concrete:{min:7,max:15,avg:11},maintenance:{min:2,max:4,avg:3}},maintenance:{asphalt:{min:1.5,max:3.5,avg:2.5},concrete:{min:2,max:4.5,avg:3.25},maintenance:{min:1,max:2.5,avg:1.75}},custom:{asphalt:{min:4.5,max:9,avg:6.75},concrete:{min:8,max:16,avg:12},maintenance:{min:2.5,max:5,avg:3.75}},emergency:{asphalt:{min:5,max:10,avg:7.5},concrete:{min:9,max:18,avg:13.5},maintenance:{min:3,max:6,avg:4.5}}},a=r[e]||r.residential,s={asphalt:{min:Math.round(n*a.asphalt.min),max:Math.round(n*a.asphalt.max),avg:Math.round(n*a.asphalt.avg)},concrete:{min:Math.round(n*a.concrete.min),max:Math.round(n*a.concrete.max),avg:Math.round(n*a.concrete.avg)},maintenance:{min:Math.round(n*a.maintenance.min),max:Math.round(n*a.maintenance.max),avg:Math.round(n*a.maintenance.avg)}},o=this.getSizeMultiplier(n),i=this.getSeasonMultiplier();return Object.keys(s).forEach(e=>{s[e].min=Math.round(s[e].min*o*i),s[e].max=Math.round(s[e].max*o*i),s[e].avg=Math.round(s[e].avg*o*i)}),{squareFootage:n,serviceType:e,calculations:s,factors:{sizeMultiplier:o,seasonMultiplier:i},timestamp:(new Date).toISOString()}}getSizeMultiplier(e){return e<500?1.2:e<1e3?1.1:e<2e3?1:e<5e3?.95:.9}getSeasonMultiplier(){const e=(new Date).getMonth();return 11===e||0===e||1===e?1.15:e>=2&&e<=4||e>=8&&e<=9?1:.95}displayPricing(e){const t=document.getElementById("pricing-display"),n=document.getElementById("pricing-details");if(!t||!n)return;const{squareFootage:r,serviceType:a,calculations:s,factors:o}=e;n.innerHTML=`\n            <div class="pricing-overview">\n                <div class="pricing-stat">\n                    <span class="stat-label">Project Area:</span>\n                    <span class="stat-value">${r.toLocaleString()} sq ft</span>\n                </div>\n                <div class="pricing-stat">\n                    <span class="stat-label">Service Type:</span>\n                    <span class="stat-value">${this.formatServiceType(a)}</span>\n                </div>\n            </div>\n            \n            <div class="estimate-disclaimer" style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 1rem; margin: 1.5rem 0; color: #856404;">\n                <div style="display: flex; align-items: flex-start; gap: 0.75rem;">\n                    <span style="font-size: 1.25rem; flex-shrink: 0;">‚ö†Ô∏è</span>\n                    <div>\n                        <strong style="display: block; margin-bottom: 0.5rem; color: #856404;">Important Pricing Disclaimer</strong>\n                        <p style="margin: 0; line-height: 1.5; color: #856404;">These estimates are preliminary calculations based on basic measurements and standard pricing. The final project price may vary anywhere from <strong>25% to 50% higher or lower</strong> than the predicted cost depending on site conditions, material choices, accessibility, permits, and specific project requirements.</p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="material-pricing">\n                <h4>Pricing by Material</h4>\n                \n                <div class="material-option">\n                    <div class="material-header">\n                        <h5>üõ£Ô∏è Asphalt Paving</h5>\n                        <p>Durable, cost-effective option for driveways and parking lots</p>\n                    </div>\n                    <div class="price-range">\n                        <span class="price-min">$${s.asphalt.min.toLocaleString()}</span>\n                        <span class="price-separator">-</span>\n                        <span class="price-max">$${s.asphalt.max.toLocaleString()}</span>\n                        <span class="price-avg">Avg: $${s.asphalt.avg.toLocaleString()}</span>\n                    </div>\n                </div>\n                \n                <div class="material-option">\n                    <div class="material-header">\n                        <h5>üèóÔ∏è Concrete Paving</h5>\n                        <p>Long-lasting, premium option with excellent durability</p>\n                    </div>\n                    <div class="price-range">\n                        <span class="price-min">$${s.concrete.min.toLocaleString()}</span>\n                        <span class="price-separator">-</span>\n                        <span class="price-max">$${s.concrete.max.toLocaleString()}</span>\n                        <span class="price-avg">Avg: $${s.concrete.avg.toLocaleString()}</span>\n                    </div>\n                </div>\n                \n                <div class="material-option">\n                    <div class="material-header">\n                        <h5>üîß Maintenance Services</h5>\n                        <p>Repairs, sealing, and restoration services</p>\n                    </div>\n                    <div class="price-range">\n                        <span class="price-min">$${s.maintenance.min.toLocaleString()}</span>\n                        <span class="price-separator">-</span>\n                        <span class="price-max">$${s.maintenance.max.toLocaleString()}</span>\n                        <span class="price-avg">Avg: $${s.maintenance.avg.toLocaleString()}</span>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="pricing-factors">\n                <h4>Pricing Factors Applied</h4>\n                <ul>\n                    <li>Project Size: ${this.formatMultiplier(o.sizeMultiplier)} (${this.getSizeDescription(r)})</li>\n                    <li>Seasonal Rate: ${this.formatMultiplier(o.seasonMultiplier)} (${this.getSeasonDescription()})</li>\n                    <li>Service Type: ${this.formatServiceType(a)}</li>\n                </ul>\n            </div>\n            \n            <div class="pricing-actions">\n                <button type="button" class="btn btn-primary" onclick="document.getElementById('submit-estimate').scrollIntoView({behavior: 'smooth'})">\n                    Request Detailed Estimate\n                </button>\n                <button type="button" class="btn btn-outline" onclick="window.print()">\n                    Print Quote\n                </button>\n            </div>\n        `,t.style.display="block",t.scrollIntoView({behavior:"smooth"})}formatServiceType(e){return{residential:"Residential Paving",commercial:"Commercial Paving",maintenance:"Maintenance Services",custom:"Custom Projects",emergency:"Emergency Repairs"}[e]||"Residential Paving"}formatMultiplier(e){const t=Math.round(100*(e-1));return t>0?`+${t}%`:t<0?`${t}%`:"Standard"}getSizeDescription(e){return e<500?"Small project":e<1e3?"Medium project":e<2e3?"Large project":e<5e3?"Very large project":"Commercial scale"}getSeasonDescription(){const e=(new Date).getMonth();return 11===e||0===e||1===e?"Winter rates":e>=2&&e<=4||e>=8&&e<=9?"Peak season":"Summer rates"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("estimate-form-container");if(e)try{new dr("estimate-form-container");console.log("EstimateForm initialized successfully")}catch(t){console.error("Failed to initialize EstimateForm:",t),e.innerHTML=`\n                        <div style="text-align: center; padding: 3rem; color: #e74c3c; background: #fdf2f2; border: 2px solid #e74c3c; border-radius: 8px; ">\n                            <h3>Unable to Load Form</h3>\n                            <p>Please refresh the page to try again.</p>\n                            <p style="font-size: 0.9rem; margin-top: 1rem; color: #666; ">Error: ${t.message}</p>\n                        </div>\n                    `}});
//# sourceMappingURL=main-DMdI85PL.js.map
